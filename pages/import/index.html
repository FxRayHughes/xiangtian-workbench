<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>导入小助手</title>
  <script src="../../ext/vue/vue.js"></script>
  <script src="../../ext/vue/antd.min.js"></script>
  <link rel="stylesheet" href="../../ext/vue/antd.min.css"/>
  <link rel="icon" type="image/svg+xml" href="./img/logo.svg"/>
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-eval' 'unsafe-inline'"/>
</head>
<body style="background-color: #f1f1f1;overflow: hidden">
<div id="appVue">
  <div style="padding:15px">
    <template>
      <p>欢迎使用导入小助手。<br>
        小助手可以帮助您将其他浏览器中数据导入到想天浏览器。</p>
    <div>
      <h1>1.导入数据</h1>
      <ul class="import-type">
        <li>
          <a-row>
            <a-col span="4">
              <img src="./img/fav.svg">

            </a-col>
            <a-col :span="13">
      <h2>导入书签 <a href="tsb://app/redirect/?package=com.thisky.helper&url=https://www.yuque.com/tswork/ngd5zk/wwylnh" target="_blank">如何导出？</a></h2>
              <p>导出书签为<strong style="color: #333">html</strong>格式文件，再通过小助手导入到想天浏览器的<strong>收藏夹应用</strong>中。<br>相同目录相同地址的书签将被覆盖，请注意。</p>

            </a-col>
            <a-col :span="6" style="text-align: right">
              <a-button @click="importBookmarks"  type="default">选择文件导入</a-button>
            </a-col>
          </a-row>
        </li>
        <li>
          <a-row>
            <a-col :span="4">
              <img src="./img/pwd.svg">

            </a-col>
            <a-col :span="13">
              <h2>导入密码 <a href="tsb://app/redirect/?package=com.thisky.helper&url=https://www.yuque.com/tswork/ngd5zk/cdwuvn" target="_blank">如何导出？</a></h2>
              <p>导出密码为<strong style="color: #333">csv</strong>格式文件。<br>相同网站下相同用户名的帐号将被覆盖，请注意。</p>
              <p>目前支持Edge、Chrome、Safari、火狐导出格式。</p>
            </a-col>
            <a-col :span="6"  style="text-align: right">
              <a-button @click="ipc.send('importPwd')" type="primary">选择文件导入密码</a-button>
            </a-col>
          </a-row>
        </li>
      </ul>
    </div>
    </template>
  </div>

</div>
<style>
  h1{
    font-size: 18px;
  }
.import-type li{
  list-style: none;
}
.import-type h2{
  font-size: 16px;
}
.import-type h2 a{
  font-size: 14px;
}
.import-type p{
  color: #666;
}
</style>
</body>
<script>

  Vue.use(antd)
  const electron = require('electron')
  const ipc = electron.ipcRenderer
  let tools = require('../util/util.js').tools

  const fileHelper = require('../../js/extras/fileHelpers.js')
  const baseBookmark = require('../../js/extras/bookmark/baseBookmarkRepository.js')

  const appVue = new Vue({
    el: '#appVue',
    data () {
      return {
        ipc,
        face:'cry',
        defaultBrowser:false,
        hover:false,
        loading:false
      }
    },
    computed: {
    },
    mounted () {
      ipc.send('getIsDefaulBrowser')
      setInterval(()=>{
          ipc.send('getIsDefaulBrowser')
        },1000)
    },
    methods: {
      importBookmarks(){
        ipc.send('htmlImport')
      }
    }
  })

  ipc.on('importPwdFailed',(event,args)=>{
    appVue.$error({title:'导入失败',content:args.message})
  })
  ipc.on('importPwdSuccess',(event,args)=>{
    console.log(args.importedPwds)
    appVue.$success({title:'导入成功',content:'成功从 '+args.from+' 导入（含覆盖） '+args.imported+' 个密码。'})
  })
</script>
</html>
