<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>侧边栏</title>
		<script src="../../ext/vue/vue.js"></script>
		<script src="../../ext/vue/vuex.js"></script>
		<script src="../../ext/vue/sortable.min.js"></script>
		<script src="../../ext/vue/vuedraggable.umd.min.js"></script>
		<script src="../../ext/vue/antd.min.js"></script>
		<link rel="stylesheet" href="../../ext/vue/antd.min.css" />
		<link rel="stylesheet" href="sidebar.css" />
	</head>
	<body style="background-color: #00000000;overflow-x: hidden;overflow-y: hidden;">
		<div id="appVue" class="sidebar">
			<sidebar />
		</div>
		<div id="clickThroughElement"
			style="background-color: #00000000;height:100vh; position:absolute;left: 45px;width: 360px;">
		</div>

		<template id="sidebarTpl">
			<div id="sidebar" class="side-container">
				<div id="itemsEl" class="side-items">

					<ul id="pinGroup" class="app-task" style="margin-bottom: 0;">


						<draggable v-model="getPinItems" group="sideBtn" animation="300" dragClass="dragClass"
							ghostClass="ghostClass" chosenClass="chosenClass" @start="onStart" @end="onEnd">
							<transition-group>
								<li v-for="(item,i) in this.$store.getters.getPinItems" :key="item.id"
									@click="openPinItem(item.id,i)" :class="isActive(item.id)" style="position: relative;"
									:item-id="item.id">
									<a-popover :title="item.count>5?item.title+' -- 高负载（5+）':item.title" placement="right" :mouse-enter-delay="0.1"
										:mouse-leave-delay="0.1" :destroy-tooltip-on-hide="true" overlay-class-name="tips">
										<template slot="content">

											<ul class="tabs">
												<li class="tab-title" v-for="(tab,j) in item.tabs" :key="tab.id">
													<img class="tab-icon" :src="tab.icon"> {{ tab.title }}
												</li>
											</ul>
										</template>
										<div class="wrapper">
											<a-badge  :count="item.count" :dot="true" status="processing"  :style="{position: 'absolute',right:  '0px',top:'0px',visibility:item.count>5?'visible':'hidden'}" /></a-badge>
											<img class="icon" :src="item.icon">
										</div>
									</a-popover>
								</li>
							</transition-group>
						</draggable>
					</ul>

					<div style="border-top: 1px solid lightgrey;margin: 8px;"></div>

					<div class="app-box">

						<ul id="appGroup" class="app-task app-items">
							<draggable v-model="getItems" group="sideBtn" animation="300" dragClass="dragClass"
								ghostClass="ghostClass" chosenClass="chosenClass" @start="onStart" @end="onEnd">
								<transition-group>
									<li @click="openItem(item.id,i)" v-for="(item,i) in this.$store.getters.getItems"
										:key="item.id" :visible="item.count>1" data-role="task" :class="isActive(item.id)" :item-id="item.id" style="position: relative;">
										<a-badge  :count="item.count" :dot="true" status="processing"  :style="{position: 'absolute',right:  '0px',top:'0px',visibility:item.count>5?'visible':'hidden'}" /></a-badge>
										<a-popover :title="item.count>5?item.title+' -- 高负载（5+）':item.title" placement="right" :mouse-enter-delay="0"
											:mouse-leave-delay="0.1" :destroy-tooltip-on-hide="true" overlay-class-name="tips">
											<template slot="content">

												<ul class="tabs">
													<li class="tab-title"  v-for="(tab,j) in item.tabs" :key="tab.id">
														<img class="tab-icon" :src="tab.icon"> {{ tab.title }}
													</li>
												</ul>
											</template>
											<div class="wrapper">
												
												<img class="icon" :src="item.icon">
											</div>

										</a-popover>
									</li>
								</transition-group>
							</draggable>
						</ul>


					</div>
					

				</div>
				<div id="bottomsEl" class="bottom-container"  style="">
				
					<ul class="bottomBar">
						<template>
						  <div>
						    <a-collapse default-active-key="1" :bordered="false" @change="changeBottomSize">
						      <a-collapse-panel key="1" >
						        <li>
						        	<a-button @click="openBottom('mobile')" type="default" shape="circle" icon="mobile" />
						        </li>
						        <li>
						        	<a-button @click="openBottom('help')" type="default" shape="circle" icon="question-circle" />
						        </li>
						        <li>
						        	<a-button @click="openBottom('setting')" type="default" shape="circle" icon="setting"   />
						        </li>
						      </a-collapse-panel>
						    </a-collapse>
						  </div>
						</template>
						
						<li>
							<a-button @click="openBottom('home')" type="default" shape="circle" icon="home"   />
						</li>
					</ul>
				
				</div>

			</div>
		</template>
	</body>
	<script src="./sidebarComp.js"></script>
	<script src="./sidebar.js"></script>
	<style>
		.tabs,
		.sidebar ul {
			list-style: none;
			padding: 0
		}
		
		.ant-collapse-content>.ant-collapse-content-box{
			padding: 0;
		}
		.ant-collapse-borderless>.ant-collapse-item{
			border-bottom: none;
		}
		.tabs, .sidebar ul{
			margin-bottom: 0;
		}
	</style>

	<script>
		//对clickThrough区域进行穿透设置，这样鼠标移动到clickThroug的区域就会自动穿透
		const el = document.getElementById('clickThroughElement')

		function setIgnore() {
			ipc.send('set-ignore-mouse-events', true, {
				forward: true
			})
		}
		el.addEventListener('mouseenter', (e) => {
			setIgnore()
			console.log(e.target)
		})
		
		
		
	</script>
</html>
