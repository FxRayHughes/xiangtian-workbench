<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>侧边栏</title>
		<script src="../../ext/vue/vue.js"></script>
		<script src="../../ext/vue/vuex.js"></script>
		<script src="../../ext/vue/sortable.min.js"></script>
		<script src="../../ext/vue/vuedraggable.umd.min.js"></script>
		<script src="../../ext/vue/antd.min.js"></script>
		<link rel="stylesheet" href="../../ext/vue/antd.min.css" />
		<link rel="stylesheet" href="sidebar.css" />
	</head>
	<body style="background-color: #00000000;overflow-x: hidden;overflow-y: hidden;">
		<script>
		function mousenter(target){
			target.setAttribute('class','sidebar expanded')
			console.log('鼠标移入')
			document.getElementById('clickThroughElement').style.left="146px"
		}	
		function mouseleave(target){
			target.setAttribute('class','sidebar')
			console.log('鼠标移出')
			document.getElementById('clickThroughElement').style.left="46px"
		}
		
		</script>
		<div id="appVue" class="sidebar" onmouseenter="mousenter(this)" onmouseleave="mouseleave(this)">
			<sidebar />
		</div>
		<div id="clickThroughElement"
			style="background-color: #00000000;height:100vh; position:absolute;left: 46px;width: 560px;">
		</div>

		<template id="sidebarTpl">
			<div id="sidebar" class="side-container">
				<div id="itemsEl" class="side-items">

					<ul id="pinGroup" class="app-task" style="margin-bottom: 0;">


						<draggable v-model="getPinItems" group="sideBtn" animation="300" dragClass="dragClass"
							ghostClass="ghostClass" chosenClass="chosenClass" @start="onStart" @end="onEnd">
							<transition-group>
								<li v-for="(item,i) in this.$store.getters.getPinItems" :key="item.id"
									@click="openPinItem(item.id,i)" :class="isActive(item.id)"
									style="position: relative;" :item-id="item.id">
									<a-popover :title="item.count>5?item.title+' -- 高负载（5+）':item.title"
										placement="right" :mouse-enter-delay="0.1" :mouse-leave-delay="0.1"
										:destroy-tooltip-on-hide="true" overlay-class-name="tips">
										<template slot="content">

											<ul class="tabs">
												<li class="tab-title" v-for="(tab,j) in item.tabs" :key="tab.id">
													<img class="tab-icon" :src="tab.icon"> {{ tab.title }}
												</li>
											</ul>
										</template>
										<div class="wrapper">
											<div class="item-icon">
												
													<img class="icon" :src="item.icon">
													<a-badge :count="item.count" :dot="true" status="processing"
														:style="{position: 'absolute',right:  '-2px',top:'-13px',visibility:item.count>5?'visible':'hidden'}" />
													</a-badge>
											</div>
										
											<div class="item-title">{{ item.title }}</div>
										</div>
									</a-popover>
								</li>
							</transition-group>
						</draggable>
					</ul>

					<div style="border-top: 1px solid lightgrey;margin: 8px;"></div>

					<div class="app-box">

						<ul id="appGroup" class="app-task app-items">
							<draggable v-model="getItems" group="sideBtn" animation="300" dragClass="dragClass"
								ghostClass="ghostClass" chosenClass="chosenClass" @start="onStart" @end="onEnd">
								<transition-group>
									<li @click="openItem(item.id,i)" v-for="(item,i) in this.$store.getters.getItems"
										:key="item.id" :visible="item.count>1" data-role="task"
										:class="isActive(item.id)" :item-id="item.id" style="position: relative;">
										
										<a-popover :title="item.count>5?item.title+' -- 高负载（5+）':item.title"
											placement="right" :mouse-enter-delay="0.1" :mouse-leave-delay="0.1"
											:destroy-tooltip-on-hide="true" overlay-class-name="tips">
											<template slot="content">

												<ul class="tabs">
													<li class="tab-title" v-for="(tab,j) in item.tabs" :key="tab.id">
														<img class="tab-icon" :src="tab.icon">&nbsp;{{ tab.title }}
													</li>
												</ul>
											</template>
											<div class="wrapper">
												<div class="item-icon">
													
													<img class="icon" :src="item.icon">
													<a-badge :count="item.count" :dot="true" status="processing"
														:style="{position: 'absolute',right:  '-2px',top:'-13px',visibility:item.count>5?'visible':'hidden'}" />
													</a-badge>
												</div>
												<div class="item-title">{{ item.title }}</div>
											</div>

										</a-popover>
									</li>
								</transition-group>
							</draggable>
						</ul>


					</div>


				</div>
				<div id="bottomsEl" class="bottom-container" style="">

					<ul class="bottomBar">
						<template>
							<div>
								<a-collapse default-active-key="1" :bordered="false" @change="changeBottomSize">
									<a-collapse-panel key="1">
										<li @click="openBottom('mobile')">

											<!-- <a-popover title="手机模拟" placement="right" :mouse-enter-delay="0"
												:mouse-leave-delay="0.1" :destroy-tooltip-on-hide="true"
												overlay-class-name="tips">

												<template slot="content">
														<a-form id="validate_other" :form="form"
															style="width: 500px;" v-bind="{
      labelCol: { span: 5 },
      wrapperCol: { span: 16 },
    }">
															
															<a-form-item label="设备选择">
															      <a-radio-group :value="1"  v-decorator="['radio-group']">
															        <a-radio v-for="(device,index)  in devices" :value="index+1">
															          <a-icon :type="device.icon"></a-icon>
															          <strong>{{ device.name }}</strong>
															          {{device.width}} x {{device.height}}
															        </a-radio>
															      </a-radio-group>
															    </a-form-item>
															<a-form-item label="缩放比例">
																<a-slider :min="25" :max="200" v-decorator="['slider']" :default-value="100" :tooltipVisible="true"
																	:dots='true'
																	:marks="{25:'25%', 50: '50%', 75: '75%', 100: '100%', 125: '125%', 150: '150%',175:'175%', 200: '200%' }"
																	:step="25" />
															</a-form-item>


															<a-form-item label="启用设备模拟">
																<a-switch
																	v-decorator="['switch', { valuePropName: 'checked' }]" />
															</a-form-item>
														</a-form>



												</template> -->
											<a-button  type="default" shape="circle"
												icon="mobile" ></a-button>
											<div class="item-title">手机模式</div>
											<!-- </a-popover> -->
										</li>
										<li @click="openBottom('help')" >
											<a-button type="default" shape="circle"
												icon="question-circle" ></a-button>
											<div class="item-title">帮助中心</div>
										</li>
										<li  @click="openBottom('setting')">
											<a-button type="default" shape="circle"
												icon="setting" ></a-button>
											<div class="item-title">偏好设置</div>
										</li>
									</a-collapse-panel>
								</a-collapse>
							</div>
						</template>

						<li @click="openBottom('home')">
							<a-button  type="default" shape="circle" icon="home"></a-button> 
							<div class="item-title">应用中心</div>
						</li>
					</ul>

				</div>

			</div>
		</template>
	</body>
	<script src="./sidebarComp.js"></script>
	<script src="./sidebar.js"></script>
	<style>
		.tabs,
		.sidebar ul {
			list-style: none;
			padding: 0
		}

		.ant-collapse-content>.ant-collapse-content-box {
			padding: 0;
		}

		.ant-collapse-borderless>.ant-collapse-item {
			border-bottom: none;
		}

		.tabs,
		.sidebar ul {
			margin-bottom: 0;
		}
	</style>

	<script>
		//对clickThrough区域进行穿透设置，这样鼠标移动到clickThroug的区域就会自动穿透
		const el = document.getElementById('clickThroughElement')
		el.addEventListener('mouseenter', (e) => {
			ipc.send('setMouseIgnore')
		})
	</script>
</html>
