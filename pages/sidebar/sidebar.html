<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>侧边栏</title>
  <link rel="stylesheet" href="../../ext/flex-class.css"/>
  <script src="../../ext/vue/vue.js"></script>
  <script src="../../ext/vue/vuex.js"></script>
  <script src="../../ext/vue/sortable.min.js"></script>
  <script src="../../ext/vue/vuedraggable.umd.min.js"></script>
  <script src="../../ext/vue/antd.min.js"></script>
  <link rel="stylesheet" href="../../ext/vue/antd.min.css"/>
  <link rel="stylesheet" href="css/sidebar.css"/>
  <link rel="stylesheet" href="css/sidebar2.css"/>
  <link rel="stylesheet" href="css/sa-app.css"/>
  <link rel="stylesheet" href="css/messageCenter.css"/>
  <!--tippy鼠标弹窗，解决antdvue popover鼠标移动的时候不精准的问题-->
  <script src="../../ext/tippy/vue-tippy.min.js"></script>
  <link rel="stylesheet" href="../../ext/tippy/light.css"/>
  <script src="../util/tsbSdk.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/shepherd.js@8.3.1/dist/js/shepherd.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shepherd.js@8.3.1/dist/css/shepherd.css"/>

</head>
<body>
<script>
  const fs=require('fs')
  require('../util/util.js').tools.getWindowArgs(window)
  let settings=require('../../js/util/settings/settings')
  function mousenter (target) {
    if (appVue.mod==='auto') {
      target.setAttribute('class', 'sidebar expanded')
      document.getElementById('clickThroughElement').style.left = '155px'
    }
  }

  function mouseleave (target) {
    //
    // if(appVue.$refs.sidePanel.isPopoverShowing===false){
    //   target.setAttribute('class', 'sidebar')
    //   document.getElementById('clickThroughElement').style.left = '46px'
    // }
  }

  //对clickThrough区域进行穿透设置，这样鼠标移动到clickThroug的区域就会自动穿透
  function setMainWindow (e) {
    if (appVue.$refs.sidePanel.userPanelVisible === true) {
    } else {
      ipc.send('setMouseIgnore')
    }
  }

  function clickThroughMove () {
    setMainWindow()
    if (appVue.$refs.sidePanel.isPopoverShowing === false && document.getElementById('clickThroughElement').offsetLeft === 155 && appVue.mod==='auto') {
      setTimeout(function () {
        document.getElementById('clickThroughElement').style.left = '55px'
        document.getElementById('appVue').setAttribute('class', 'sidebar')
      }, 200)
    }
  }

  function clickThroughClick () {
    appVue.$refs.sidePanel.userPanelVisible = false
    setMainWindow()
  }
</script>
<div id="appVue" style="z-index: 2" :class="{'sidebar':true,'expanded':this.mod==='open'}" onmouseenter="mousenter(this)"
     onmouseleave="mouseleave(this)">
  <sidebar ref="sidePanel"/>
</div>
<div
  id="clickThroughElement"
  onclick="clickThroughClick()"
  onmousemove="clickThroughMove()"
  style="background-color: #00000000; height: 100vh; position: fixed; left: 46px; width: calc(100% - 46px)"
></div>
</body>
<script src="./comp/messageDialog.js"></script>
<script src="./sidebarComp.js"></script>
<script src="./sidebar.js"></script>
<script src="./comp/app-manager.js"></script>
<style>
  .tabs,
  .sidebar ul {
    list-style: none;
    padding: 0;
  }

  .ant-collapse-content > .ant-collapse-content-box {
    padding: 0;
  }

  .ant-collapse-borderless > .ant-collapse-item {
    border-bottom: none;
  }

  .tabs,
  .sidebar ul {
    margin-bottom: 0;
  }

 .sa-app-wrapper .ant-badge-count{
   right: 2px;
   padding:0 !important;
   font-size: 10px;
   height: 15px;
   width: 15px;
   line-height: 15px;
   min-width: 15px;
 }
</style>
</html>
