<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>应用推荐</title>
		<script src="../../ext/vue/vue.js"></script>
		<script src="../../ext/vue/antd.min.js"></script>
		<link rel="stylesheet" href="../../ext/vue/antd.min.css" />
		<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-eval' 'unsafe-inline'" />
		<link rel="stylesheet" href="./wizard.css" />
	</head>
	<body>

		<div id="app">

			<div id="stepWizard" class="step-wizard" >
				<template>

          <a-alert  type="info" show-icon >
            <div slot="message">应用推荐</div>
            <div slot="description">
              <p style="line-height: 28px">独立应用功能是想天浏览器独有的特色功能，这是一种将网页应用转变为接近桌面客户端的技术。
                从而<strong>无需安装软件</strong>就可以以独立窗体运行网页。
                <br>
                安装应用<strong>不会在您的电脑中下载和安装任何软件</strong>，仅在浏览器左侧栏中加入应用图标以便于您方便使用。
                <br>详细了解想天浏览器的功能请<a target="_blank" href="https://www.yuque.com/tswork/ngd5zk/mmcfd7">查看这里</a>。
              </p>
            </div>
          </a-alert>


				</template>

        <template>
          <div>
            <a-tabs size="large" default-active-key="1" @change="callback">
              <a-tab-pane key="1" >
                <span slot="tab">
                  <a-icon type="desktop" ></a-icon>
        必选系统功能
      </span>
                必选系统功能
              </a-tab-pane>
              <a-tab-pane key="2"  force-render>
                 <span slot="tab">
                  <a-icon type="like" ></a-icon>
        强烈推荐应用
      </span>强烈推荐应用
              </a-tab-pane>
              <a-tab-pane key="3" >
                <span slot="tab">
                  <a-icon type="fire" ></a-icon>
        热门应用
      </span>
              </a-tab-pane>
            </a-tabs>
          </div>
        </template>

			</div>
		</div>
		<script>

			Vue.use(antd)
			Vue.prototype.$form = antd.Form
      const fs=require('fs')
      const tools = require('../util/util.js').tools
      tools.getWindowArgs(window)
      let settings=require('../../js/util/settings/settings')

			var appVue = new Vue({
				el: '#app',
				data() {
					return {
            ipc:window.ipc,
						step: 'login', // login ,wizard,reg
						current: 0,
						steps: [{
								title: '基础设置',
								content: 'First-content',
								icon: 'setting'
							},
              {
                title: '导入书签',
                content: 'Second-content',
                icon: 'star'
              },
              {
              	title: '快速导览',
              	content: 'Last-content',
              	icon: 'smile'
              },
							// },
							// {
							// 	title: '新手教程',
							// 	content: 'Last-content',
							// 	icon: 'play-circle'
							// },
						],
						titleBar: 'theme',
						activeKey: ['3'],
						customStyle: 'background: #f7f7f7;border-radius: 4px;margin-bottom: 24px;border: 0;overflow: hidden',
						videoSource:"http://player.bilibili.com/player.html?aid=890908889&bvid=BV1hP4y187jw&cid=421342590&page=1",
						videoSources:[
							"http://player.bilibili.com/player.html?aid=890908889&bvid=BV1hP4y187jw&cid=421342590&page=1",
							"http://player.bilibili.com/player.html?aid=890908889&bvid=BV1hP4y187jw&cid=421342590&page=1&p=2",
							"http://player.bilibili.com/player.html?aid=890908889&bvid=BV1hP4y187jw&cid=421342590&page=1&p=3",
							"http://player.bilibili.com/player.html?aid=890908889&bvid=BV1hP4y187jw&cid=421342590&page=1&p=4"
						],
						currentVideoIndex:0,

            /**
             * 设置项目
             */
            formSetting:this.$form.createForm(this,{
              name:'setting'
            }),
            settingSiteTheme:true,
            settingCollectUsageStats:undefined,
            settingSearchEngine:{name:'Baidu'}
          }
        },
				beforeCreate() {
					// this.form = this.$form.createForm(this, {
					// 	name: 'normal_login'
					// });
          // this.formSetting=this.$form.createForm(this,{
          //   name:'setting'
          // })
				},
        mounted(){
          this.settingSiteTheme=settings.get('siteTheme')
          this.settingCollectUsageStats=settings.get('collectUsageStats')
          this.settingSearchEngine=settings.get('searchEngine')
        },
				methods: {
					handleSubmit(e) {
						e.preventDefault()
						this.form.validateFields((err, values) => {
							if (!err) {
                // console.log(values.siteTheme)
                // if(values.siteTheme==='no-theme'){
                //   settings.set('siteTheme',false)
                // }else{
                //   settings.set('siteTheme',true)
                // }
                // settings.set('searchEngine',{ name: values.searchEngine })
                // if(values.improve==='true'){
                //   settings.set('collectUsageStats', true)
                // }else{
                //   settings.set('collectUsageStats', false)
                // }
								// console.log('Received values of form: ', values)
							}
						})
					},
          handleSubmitSetting(e){
            e.preventDefault();
            //console.log(this.formSetting.getFieldsValue())
            // console.log(this.formSetting)
            this.formSetting.validateFields((err, values) => {
              if (!err) {
                if(values.siteTheme==='no-theme'){
                  settings.set('siteTheme',false)
                }else{
                  settings.set('siteTheme',true)
                }
                settings.set('searchEngine',{ name: values.searchEngine })
                if(values.improve==='true'){
                  settings.set('collectUsageStats', true)
                }else{
                  settings.set('collectUsageStats', false)
                }
                this.next()
              }
            })
          },
          saveSetting(next){ //next  close

          },
					next() {
            if(this.current===0){
            }
						this.current++
					},
					prev() {
						this.current--
					},
					changeTitleBar(e) {
						this.titleBar = e.target.value
						console.log(this.titleBar)
					},
					netxVideo() {
						this.$refs.videos.next()
						this.currentVideoIndex++
						if(this.currentVideoIndex==4){
							this.currentVideoIndex=0
						}
						this.videoSource=this.videoSources[this.currentVideoIndex]
					},
          close(){
            //todo 添加一些桌面

            localStorage.setItem('firstRun','1')
            ipc.send('closeWizard')
          }
				}
			})
		</script>


		<style>
			#components-form-demo-normal-login .login-form {
				max-width: 250px;
			}

			#components-form-demo-normal-login .login-form-forgot {
				float: right;
			}

			#components-form-demo-normal-login .login-form-button {
				width: 40%;
				margin-right: 5%;
			}

			.setting-type {
				padding-bottom: 10px;
				border-bottom: dashed 1px #ccc;
				margin-bottom: 20px;
			}

			.theme-carousel {}

			.carousel-el {
				position: relative;
				left: -18px;
				top: -25px;
				width: 796px;
			}

			.ant-carousel>>>.slick-slide {
				text-align: center;
				height: 160px;
				line-height: 160px;
				background: #364d79;
				overflow: hidden;
			}

			.ant-carousel>>>.custom-slick-arrow {
				width: 25px;
				height: 25px;
				font-size: 25px;
				color: #fff;
				background-color: rgba(31, 45, 61, 0.11);
				opacity: 0.3;
			}

			.ant-carousel>>>.custom-slick-arrow:before {
				display: none;
			}

			.ant-carousel>>>.custom-slick-arrow:hover {
				opacity: 0.5;
			}
		</style>
	</body>
</html>
