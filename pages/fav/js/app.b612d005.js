(function(){var __webpack_modules__={6700:function(e,t,a){var o={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":3766,"./is.js":3766,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":3902,"./ms-my.js":3902,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4592,"./tr.js":4592,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=s,e.exports=n,n.id=6700},4538:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var vuex__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9749),_utils_ipc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3391),ant_design_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3330),_ant_design_icons_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8355),_ant_design_icons_vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3218),_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8267),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4117),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2744);const fs=eval("require")("fs");__webpack_exports__["Z"]={name:"SubFolderList",props:{msg:String},components:{CaretDownOutlined:_ant_design_icons_vue__WEBPACK_IMPORTED_MODULE_4__.Z,CaretRightOutlined:_ant_design_icons_vue__WEBPACK_IMPORTED_MODULE_5__.Z},data(){return{showFolderList:!0,askModelVisible:!1,waitingMoveList:[],movedContentCount:0,failureContentCount:0,askingContent:{},targetFolder:null}},computed:{...(0,vuex__WEBPACK_IMPORTED_MODULE_6__.rn)({subFolders:e=>e.subFolder.subFolders,itemSize:e=>e.ui.itemSize,focusItem:e=>e.ui.focusedItem})},methods:{onDragEnter(e,t){t.hover=!0},onDragLeave(e,t){t.hover=!1},onDragOver(e,t){t.hover||(t.hover=!0),e.preventDefault()},moveNextContent(){let e=this.targetFolder;if(this.waitingMoveList.length<=0)return this.$message.success(`成功移动 ${this.movedContentCount} 个文件到文件夹内`),void(e.hover=!1);let t=this.waitingMoveList.shift();console.log("要移动的对象",t);let a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getAllFromRelativeFullPath(t.meta.relative_path_full),o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getAllFromRelativeFullPath(e.meta.relative_path_full);if(fs.existsSync(o.storeFullPath+"/"+a.filename))return this.askingContent=t,this.askingContent.filename=a.filename,void(this.askModelVisible=!0);this.moveContent(t)},startMoveContents(e,t){this.waitingMoveList=e,this.targetFolder=t,this.movedContentCount=0,this.failureContentCount=0,this.moveNextContent(t)},stopMove(){this.askModelVisible=!1,this.targetFolder.hover=!1},copyContent(e,t=!0){let a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getAllFromRelativeFullPath(e.meta.relative_path_full),o=this.targetFolder.meta.relative_path_full+"/"+a.name+a.ext,n=o,s=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getStorePathFromRelativePath(n),i=1;while(fs.existsSync(s))n=this.targetFolder.meta.relative_path_full+"/"+a.name+" 副本"+(i>1?String(i):"")+a.ext,s=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getStorePathFromRelativePath(n),console.log("while testPath="+s),i++;let r=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_2__.Z.move(e.meta.uuid,n,!1);r.status===_utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__.Z.successCode?this.movedContentCount=this.movedContentCount+1:this.failureContentCount=this.failureContentCount+1,t&&this.moveNextContent()},moveContent(e,t=!0){let a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getAllFromRelativeFullPath(e.meta.relative_path_full),o=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_2__.Z.move(e.meta.uuid,this.targetFolder.meta.relative_path_full+"/"+a.filename,!0);o.status===_utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__.Z.successCode?this.movedContentCount=this.movedContentCount+1:this.failureContentCount=this.failureContentCount+1,t&&this.moveNextContent()},onDrop(e,t){this.startMoveContents(this.$store.state.ui.selectedItems,t)},toggleShowFolderList(){this.showFolderList=!this.showFolderList,console.log(this.showFolderList)},changePath(e){this.$store.dispatch("ui/changeFolder",{path:this.$store.state.ui.currentFolder.path+e+"/"})},selectItem(e){this.$store.commit("ui/focusItem",{type:"folder",data:e})},open:_utils_ipc__WEBPACK_IMPORTED_MODULE_0__.Z.openExternal,showItemInFolder:_utils_ipc__WEBPACK_IMPORTED_MODULE_0__.Z.showItemInFolder,trashItem(e){let t=this;ant_design_vue__WEBPACK_IMPORTED_MODULE_7__.Z.confirm({title:"删除确认",content:"是否确认删除文件夹？此操作会删除文件夹下面全部的内容。",okText:"确认",cancelText:"取消",onOk:()=>{_utils_ipc__WEBPACK_IMPORTED_MODULE_0__.Z.trashFolder(e),setTimeout((()=>{t.$store.dispatch("ui/changeTab",{name:"all"})}),200),this.$message.success("删除文件夹成功。")}})}}}},5200:function(e,t,a){a(1703),function(t,a){e.exports=a()}(0,(function(){return(()=>{"use strict";var e={};(()=>{e.d=(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})}})(),(()=>{e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{e.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})();var t={};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.r(t),e.d(t,{default:()=>i});var i=function(){function e(t,o){a(this,e),this.self=o,this.accessKey=t.accessKey}return n(e,null,[{key:"config",value:function(t){if(Object.keys(e.secretInfo).length>0)return new Promise((function(t,a){window.postMessage({eventName:"checkAuth",secretInfo:e.secretInfo},"".concat(window.origin)),e.listener(t,a)}));for(var a=Object.keys(t),o=0;o<a.length;o++)e.secretInfo[a[o]]=t[a[o]]}},{key:"listener",value:function(t,a){window.addEventListener("message",(function(o){var n=o.data.eventName;switch(n){case"authResult":e.secretInfo.signature===o.data.signature?(e.sdkSwitch=o.data.sdkSwitch,t(e.sdkSwitch)):(e.sdkSwitch=!1,a({code:401,msg:"SDK接口鉴权失败"}));break}}))}},{key:"ready",value:function(t){e.config().then((function(e){t()})),window.addEventListener("message",(function(t){var a=t.data.eventName,o=t.data.args;a&&e.events.forEach((function(e){a===e.event&&e.callBack(t,o)}))}))}},{key:"error",value:function(t){e.config()["catch"]((function(e){t(e)}))}},{key:"hideApp",value:function(t){if(t&&e.sdkSwitch)window.postMessage({eventName:"hideApp"},"".concat(window.origin)),t.hasOwnProperty("success")&&t.success();else{if(!e.sdkSwitch)return void(t.hasOwnProperty("fail")&&t.fail());window.postMessage({eventName:"hideApp"},"".concat(window.origin))}}},{key:"tabLinkJump",value:function(t){var a;t&&e.sdkSwitch?(window.postMessage({eventName:"tabLinkJump",url:null!==(a=t.url)&&void 0!==a?a:""}),t.hasOwnProperty("success")&&t.success()):t.hasOwnProperty("fail")&&t.fail()}},{key:"notice",value:function(t){if(t&&e.sdkSwitch)window.postMessage({eventName:"saAppNotice",options:t}),t.hasOwnProperty("success")&&t.success();else{if(!e.sdkSwitch)return void(t.hasOwnProperty("fail")&&t.fail());window.postMessage({eventName:"saAppNotice",options:t})}}},{key:"autoLoginSysApp",value:function(t){if(t&&e.sdkSwitch)window.postMessage({eventName:"autoLoginSysApp"}),t.hasOwnProperty("success")&&t.success();else{if(!e.sdkSwitch)return void(t.hasOwnProperty("fail")&&t.fail());window.postMessage({eventName:"autoLoginSysApp"})}}},{key:"on",value:function(t,a){e.events.push({event:t,callBack:a})}}]),e}();return s(i,"events",[]),s(i,"secretInfo",{}),s(i,"sdkSwitch",!1),t})()}))},107:function(e,t,a){"use strict";var o=a(9242),n=a(1125),s=a(3396);function i(e,t,a,o,n,i){const r=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(r)}var r=a(9749),l=a(7214),u=a(8938),_=a(1960);l.Z.getWindowArgs(window),u.Z.init(window.globalArgs["user-data-dir"]),window.configDb=u.Z;const d=u.Z.getStorePath()+"/";window.$defaultStrorePath=d,_.Z.init(d),window.libDb=_.Z;var c={name:"App",components:{},data(){return{isApp:window.isApp}},computed:{...(0,r.rn)({userInfo:e=>e.user.userInfo,storePath:e=>e.config.storePath})},mounted(){this.$store.commit("config/setStorePath",d)},methods:{}},p=a(89);const m=(0,p.Z)(c,[["render",i]]);var h=m,f=(a(2467),a(5517)),g=a(631);const b="https://s.apps.vip/",v="10001",w={namespaced:!0,state:()=>({server:{loginUrl:b+"login?response_type=code&client_id="+v+"&state=1",userSpaceUrl:b+"user"},storePath:"",isApp:!1}),mutations:{setStorePath(e,t){e.storePath=t},setIsApp(e,t){e.isApp=t}},getters:{}};var I=w,D=a(4117);const k={namespaced:!0,state:()=>({openHistory:[],itemSize:120,filters:[],orders:["create_time"],config:{showSubFolders:!0},focusedItem:void 0,selectedItems:[],currentTab:{name:"all",alias:"全部",path:""},currentFolder:{path:"",name:"我的图片"}}),mutations:{setSelectedItemsByUuids(e,t){let a=t.map((e=>D.Z.getContentFromUuid(e)));e.selectedItems=a},setOrders(e,t){e.orders=t},setFilter(e,t){e.filters=t},addFilter(e,t){e.filters.push(t)},pushHistory(e,t){e.openHistory.push(t)},popHistory(e){e.openHistory.pop()},clearHistory(e){e.openHistory=[]},setItemSize(e,t){e.itemSize=t},setTab(e,t){e.currentTab=t},setCurrentFolder(e,t){e.currentFolder=t},focusItem(e,t){t.data.meta.new&&(t.data.meta.new=!1,window.libDb.setNotNew(t.data.meta.uuid)),e.focusedItem=t},clearFocusItem(e){e.focusedItem=void 0},setConfig(e,t){e.config=Object.assign(e.config,t)}},getters:{},actions:{init(e){e.dispatch("subFolder/updateTreeData",null,{root:!0})},goBackFolder(e){if(e.state.openHistory.length<2)return;let t=e.state.openHistory[e.state.openHistory.length-2];e.commit("popHistory"),e.commit("popHistory"),e.dispatch("changeFolder",t)},reload(e,t){window.libDb.reload(),e.dispatch("content/loadFolderContents",e.state.currentFolder.path,{root:!0}),t&&t()},changeFolder(e,t){e.dispatch("content/loadFolderContents",t.path,{root:!0}),e.commit("setCurrentFolder",t),e.commit("pushHistory",t)},changeToRecent(e){e.dispatch("content/changeToRecent",void 0,{root:!0})},changeTab(e,t){if(e.commit("clearHistory"),"all"===t.name)t.alias="全部",e.commit("setFilter",[]),e.dispatch("changeFolder",{relativePath:"/",path:e.rootState.config.storePath,name:""});else if("recent"===t.name)e.commit("setFilter",[]),e.dispatch("changeToRecent");else{switch(t.name){case"bookmark":t.alias="书签";break;case"img":t.alias="图片";break;case"video":t.alias="视频";break;case"doc":t.alias="文档"}e.dispatch("changeFolder",{relativePath:"/",path:e.rootState.config.storePath,name:""})}e.commit("setTab",t)}}};var y=k;const P={namespaced:!0,state:()=>({userInfo:{nickname:"想天浏览器",avatar:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?undefined",uid:0,spaceUrl:"https://s.apps.vip/user",userToken:"",token:"",userData:{}},folders:[]}),mutations:{setUserInfo(e,t){e.userInfo=t?{nickname:t.nickname,avatar:t.avatar,uid:t.uid,spaceUrl:"https://s.apps.vip/user",userToken:t.token,userData:t}:{nickname:"未登录",avatar:"",uid:0,spaceUrl:"",userToken:"",userData:null}}},getters:{},actions:{}};var C=P;const E={namespaced:!0,state:()=>({groups:[{icon:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?undefined",name:"想天软件",folders:[],foldersCount:4},{icon:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?undefined",name:"浏览器研发组",folders:[],foldersCount:7}]}),mutations:{saveUserInfo(e,t){e.userInfo=t?{nickname:t.nickname,avatar:t.avatar,uid:t.uid,spaceUrl:"https://s.apps.vip/user",userToken:t.token,userData:t}:{nickname:"未登录",avatar:"",uid:0,spaceUrl:"",userToken:"",userData:null}}},getters:{}};var M=E;const F=(0,r.MT)({modules:{content:f.Z,subFolder:g.Z,config:I,ui:y,user:C,group:M}});var O=F,x=a(5200),T=a.n(x);function S(e,t,a,o,n,i){const r=(0,s.up)("ContentHeader"),l=(0,s.up)("ContentList"),u=(0,s.up)("a-layout-content");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s._)("a",{onClick:t[0]||(t[0]=t=>e.history.go(-1))}),(0,s.Wm)(u,{style:{background:"white",padding:"20px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(l)])),_:1})],64)}var W=a(7139);const R=e=>((0,s.dD)("data-v-3158d8ce"),e=e(),(0,s.Cn)(),e),U={key:1},A={style:{display:"flex","vertical-align":"center"}},j={style:{flex:"200px","padding-right":"10px"}},Z=R((()=>(0,s._)("div",{style:{flex:"auto"}},null,-1))),L={style:{flex:"120px","padding-top":"7px"}},B=(0,s.Uk)("名称"),z=(0,s.Uk)("扩展名"),K=(0,s.Uk)("显示子文件夹内容"),$=(0,s.Uk)("添加时间"),q=(0,s.Uk)("创建时间"),H=(0,s.Uk)("修改时间"),V=(0,s.Uk)(" 网格 "),N=(0,s.Uk)(" 列表 "),Y={shape:"circle",style:{"margin-right":"10px"}},J={style:{position:"fixed",right:"260px","text-align":"center"}};function G(e,t,a,o,n,i){const r=(0,s.up)("login-outlined"),l=(0,s.up)("a-tooltip"),u=(0,s.up)("a-slider"),_=(0,s.up)("a-checkbox"),d=(0,s.up)("a-menu-item"),c=(0,s.up)("a-sub-menu"),p=(0,s.up)("a-menu-divider"),m=(0,s.up)("a-menu"),h=(0,s.up)("BorderOuterOutlined"),f=(0,s.up)("a-dropdown"),g=(0,s.up)("a-input-search"),b=(0,s.up)("a-page-header"),v=(0,s.up)("RedoOutlined"),w=(0,s.up)("a-button");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(b,{class:"content-header",backIcon:!(e.openHistory.length<=1)&&null,onBack:t[2]||(t[2]=()=>{this.$store.dispatch("ui/goBackFolder")})},{subTitle:(0,s.w5)((()=>[e.isApp&&e.currentTab.path?((0,s.wg)(),(0,s.j4)(l,{key:0,placement:"bottom",overlayStyle:{maxWidth:"1000px"}},{title:(0,s.w5)((()=>[(0,s._)("span",null,"点击打开完整路径："+(0,W.zw)(e.currentTab.path),1)])),default:(0,s.w5)((()=>[(0,s._)("span",{onClick:t[0]||(t[0]=t=>i.openDir(e.currentTab.path))},[(0,s.Uk)((0,W.zw)(e.currentTab.alias)+" ",1),(0,s.Wm)(r)])])),_:1})):((0,s.wg)(),(0,s.iD)("span",U,(0,W.zw)(e.currentTab.alias),1)),(0,s.Uk)(" "+(0,W.zw)(e.currentFolder.name),1)])),extra:(0,s.w5)((()=>[(0,s._)("div",A,[(0,s._)("div",j,[(0,s.Wm)(u,{value:i.itemSize,"onUpdate:value":t[1]||(t[1]=e=>i.itemSize=e),min:60,step:5,max:300},null,8,["value"])]),Z,(0,s._)("div",L,[(0,s.Wm)(f,null,{overlay:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{key:"info",title:"显示信息"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[B])),_:1})])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[z])),_:1})])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[K])),_:1})])),_:1})])),_:1}),(0,s.Wm)(c,{key:"order",title:"排序方式"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[$])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[q])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[H])),_:1})])),_:1}),(0,s.Wm)(p),(0,s.Wm)(d,{key:"grid"},{default:(0,s.w5)((()=>[V])),_:1}),(0,s.Wm)(d,{key:"list"},{default:(0,s.w5)((()=>[N])),_:1}),(0,s.Wm)(p)])),_:1})])),default:(0,s.w5)((()=>[(0,s._)("span",Y,[(0,s.Wm)(h)])])),_:1}),(0,s.Wm)(g,{size:"small",placeholder:"搜索",style:{width:"100px"}})])])])),_:1},8,["backIcon"]),(0,s._)("div",J,[(0,s.Wm)(w,{title:"刷新",onClick:t[3]||(t[3]=e=>i.refresh()),id:"refreshingBtn",loading:n.refreshing,type:"primary",shape:"circle",style:{"text-align":"center"}},{icon:(0,s.w5)((()=>[(0,s.Wm)(v)])),_:1},8,["loading"])])])}var X=a(5792),Q=a(2876),ee=a(851),te=a(3391),ae={name:"ContentHeader",props:{},mounted(){this.$store.commit("ui/setItemSize",Number(localStorage.getItem("itemSize")))},components:{BorderOuterOutlined:X.Z,RedoOutlined:Q.Z,LoginOutlined:ee.Z},methods:{refresh(){this.refreshing=!0,this.$store.dispatch("ui/reload",(()=>{this.refreshing=!1})),document.getElementById("refreshingBtn").classList.add("refreshing"),setTimeout((()=>{document.getElementById("refreshingBtn").classList.remove("refreshing")}),500)},openDir(e){te.Z.openDir(e)},changeTab(){this.refreshing=!0,this.$store.dispatch("ui/changeTab",{name:"all"}),setTimeout((()=>this.refreshing=!1),500)}},computed:{itemSize:{get(){return this.$store.state.ui.itemSize},set(e){this.$store.commit("ui/setItemSize",e),localStorage.setItem("itemSize",e)}},...(0,r.rn)({isApp:e=>e.config.isApp,currentFolder:e=>e.ui.currentFolder,currentTab:e=>e.ui.currentTab,openHistory:e=>e.ui.openHistory})},data(){return{refreshing:!1,routes:[{path:"index",breadcrumbName:"First-level Menu"},{path:"first",breadcrumbName:"Second-level Menu"},{path:"second",breadcrumbName:"Third-level Menu"}]}}};const oe=(0,p.Z)(ae,[["render",G],["__scopeId","data-v-3158d8ce"]]);var ne=oe;function se(e,t,a,o,n,i){const r=(0,s.up)("SubFolderList"),l=(0,s.up)("ContentItemList");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",null,[(0,s.Wm)(r)]),(0,s._)("div",null,[(0,s.Wm)(l)])],64)}const ie={key:0},re={style:{"margin-bottom":"10px"}},le={style:{"min-height":"150px"}},ue=["onClick","onDblclick"],_e=["onDragenter","onDragleave","onDragover","onDrop"],de={key:0,class:"type-label new-label"},ce={class:"folder-name"},pe={class:"inner-content-count"},me=(0,s.Uk)("打开"),he=(0,s.Uk)("查看所在位置 "),fe=(0,s.Uk)("删除文件夹 "),ge=(0,s.Uk)("全部应用"),be=(0,s.Uk)("保留两者"),ve=(0,s.Uk)("替换"),we=(0,s.Uk)("终止移动"),Ie=(0,s.Uk)('此文件夹已经存在名称为"'),De=(0,s.Uk)('"的内容。您要使用正在移动的内容来替换它吗？');function ke(e,t,a,n,i,r){const l=(0,s.up)("caret-down-outlined"),u=(0,s.up)("caret-right-outlined"),_=(0,s.up)("a-image"),d=(0,s.up)("a-menu-item"),c=(0,s.up)("a-menu"),p=(0,s.up)("a-dropdown"),m=(0,s.up)("a-checkbox"),h=(0,s.up)("a-button"),f=(0,s.up)("a-modal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[e.subFolders.length>0?((0,s.wg)(),(0,s.iD)("div",ie,[(0,s._)("h3",re,[(0,s._)("span",{style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...e)=>r.toggleShowFolderList&&r.toggleShowFolderList(...e))},[(0,s.Uk)("文件夹（"+(0,W.zw)(e.subFolders.length)+"） ",1),(0,s.wy)((0,s.Wm)(l,null,null,512),[[o.F8,i.showFolderList]]),(0,s.wy)((0,s.Wm)(u,null,null,512),[[o.F8,!i.showFolderList]])])]),(0,s.wy)((0,s._)("div",le,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.subFolders,(t=>((0,s.wg)(),(0,s.j4)(p,{trigger:["contextmenu"],key:t},{overlay:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{key:"openPath",onClick:e=>r.open(t.baseInfo.path+t.baseInfo.filename)},{default:(0,s.w5)((()=>[me])),_:2},1032,["onClick"]),(0,s.Wm)(d,{key:"find",onClick:e=>r.showItemInFolder(t.baseInfo.path+t.baseInfo.filename)},{default:(0,s.w5)((()=>[he])),_:2},1032,["onClick"]),(0,s.Wm)(d,{key:"delete",onClick:e=>r.trashItem(t.baseInfo.path+t.baseInfo.filename)},{default:(0,s.w5)((()=>[fe])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,s.w5)((()=>[(0,s._)("div",{class:"sub-folder-wrapper",onClick:e=>r.selectItem(t),onDblclick:e=>r.changePath(t.name),style:(0,W.j5)([{width:e.itemSize+"px",height:e.itemSize+50+"px"},{}])},[(0,s._)("div",{class:(0,W.C_)([{hover:t.hover},"cover-wrapper"]),onDragenter:e=>r.onDragEnter(e,t),onDragleave:e=>r.onDragLeave(e,t),onDragover:e=>r.onDragOver(e,t),onDrop:e=>r.onDrop(e,t),style:(0,W.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[(0,s._)("div",{class:"sub-folder-frame",style:(0,W.j5)({width:e.itemSize+"px",height:e.itemSize+"px"})},null,4),t.meta.new?((0,s.wg)(),(0,s.iD)("div",de,"New")):(0,s.kq)("",!0),(0,s.Wm)(_,{style:(0,W.j5)([{},{width:e.itemSize+"px",height:e.itemSize+"px"}]),preview:!1,class:(0,W.C_)(["sub-folder-cover",{selected:"undefined"!==typeof this.focusItem&&this.focusItem.data===t}]),src:t.cover},null,8,["style","class","src"])],46,_e),(0,s._)("div",ce,(0,W.zw)(t.name),1),(0,s._)("div",pe,(0,W.zw)(t.contentsCount)+" 内容",1)],44,ue)])),_:2},1024)))),128))],512),[[o.F8,i.showFolderList]])])):(0,s.kq)("",!0),(0,s.Wm)(f,{visible:i.askModelVisible,"onUpdate:visible":t[3]||(t[3]=e=>i.askModelVisible=e),closable:!1,centered:!0},{footer:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[ge])),_:1}),(0,s.Wm)(h,{onClick:t[1]||(t[1]=e=>{this.askModelVisible=!1,this.copyContent(this.askingContent)})},{default:(0,s.w5)((()=>[be])),_:1}),(0,s.Wm)(h,{onClick:t[2]||(t[2]=e=>{this.askModelVisible=!1,this.moveContent(this.askingContent)})},{default:(0,s.w5)((()=>[ve])),_:1}),(0,s.Wm)(h,{onClick:r.stopMove},{default:(0,s.w5)((()=>[we])),_:1},8,["onClick"])])),default:(0,s.w5)((()=>[(0,s._)("p",null,[Ie,(0,s._)("strong",null,(0,W.zw)(i.askingContent.filename),1),De])])),_:1},8,["visible"])],64)}var ye=a(4538);const Pe=(0,p.Z)(ye.Z,[["render",ke],["__scopeId","data-v-143a1eb0"]]);var Ce=Pe;const Ee={class:"hello"},Me={style:{"margin-bottom":"10px","margin-top":"20px"}},Fe=(0,s._)("div",{style:{position:"fixed",display:"inline-block",width:"30px",height:"30px","text-align":"center"}},null,-1),Oe={id:"itemsLists",style:{"min-height":"150px"}},xe=["uuid","onDragstart","onClick"],Te={key:4,class:"type-label new-label"},Se=(0,s.Uk)("打开"),We=(0,s.Uk)("查看所在位置 "),Re=(0,s.Uk)("删除文件 "),Ue=(0,s.Uk)("编辑图片 "),Ae=(0,s.Uk)("设为新标签页默认壁纸 ");function je(e,t,a,n,i,r){const l=(0,s.up)("a-empty"),u=(0,s.up)("TypePwd"),_=(0,s.up)("TypeImg"),d=(0,s.up)("TypeUrl"),c=(0,s.up)("TypeVideo"),p=(0,s.up)("TypeOther"),m=(0,s.up)("a-menu-item"),h=(0,s.up)("a-menu"),f=(0,s.up)("a-dropdown"),g=(0,s.up)("VueSelecto");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Ee,[(0,s._)("h3",Me,"内容（"+(0,W.zw)(e.contents.length)+"）",1),Fe,(0,s._)("div",Oe,[0===e.contents.length?((0,s.wg)(),(0,s.j4)(l,{key:0,style:{"margin-top":"60px"},description:"此文件夹下无内容"})):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(e.contentsOrderByConfig,(a=>((0,s.wg)(),(0,s.j4)(f,{trigger:["contextmenu"],key:a},{overlay:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{key:"openPath",onClick:e=>r.open(a.baseInfo.path+a.baseInfo.filename)},{default:(0,s.w5)((()=>[Se])),_:2},1032,["onClick"]),(0,s.Wm)(m,{key:"find",onClick:e=>r.showItemInFolder(a.baseInfo.path+a.baseInfo.filename)},{default:(0,s.w5)((()=>[We])),_:2},1032,["onClick"]),(0,s.Wm)(m,{key:"delete",onClick:e=>r.trashItem(a.baseInfo.path+a.baseInfo.filename)},{default:(0,s.w5)((()=>[Re])),_:2},1032,["onClick"]),"img"===a.type?((0,s.wg)(),(0,s.j4)(m,{key:"edit",onClick:e=>r.editPicture(a.baseInfo.path+a.baseInfo.filename)},{default:(0,s.w5)((()=>[Ue])),_:2},1032,["onClick"])):(0,s.kq)("",!0),"img"===a.type?((0,s.wg)(),(0,s.j4)(m,{key:"setWallpaper",onClick:e=>r.setWallPaper(a.baseInfo.path+a.baseInfo.filename)},{default:(0,s.w5)((()=>[Ae])),_:2},1032,["onClick"])):(0,s.kq)("",!0)])),_:2},1024)])),default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,W.C_)(["content-wrapper",{selected:"undefined"!==typeof this.focusItem&&this.focusItem.data===a}]),onMousedown:t[0]||(t[0]=(0,o.iM)((()=>{}),["stop"])),onMouseup:t[1]||(t[1]=e=>i.dragging=!1),uuid:a.meta.uuid,draggable:"true",onDragstart:e=>r.onDragStart(e,a),onDragend:t[2]||(t[2]=(...e)=>r.onDragEnd&&r.onDragEnd(...e)),onDragover:t[3]||(t[3]=(...e)=>r.onDragOver&&r.onDragOver(...e)),onClick:e=>i.selectedKey=a,style:(0,W.j5)({width:e.itemSize+"px",height:e.itemSize+50+"px"})},[a.extCanOpenInside?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},["pwd"===a.type?((0,s.wg)(),(0,s.j4)(u,{key:0,onSetSelected:e=>r.selectItem(a),onOpenDetail:r.openDetail,content:a},null,8,["onSetSelected","onOpenDetail","content"])):(0,s.kq)("",!0),"img"===a.type?((0,s.wg)(),(0,s.j4)(_,{key:1,onSetSelected:e=>r.selectItem(a),onOpenDetail:r.openDetail,content:a},null,8,["onSetSelected","onOpenDetail","content"])):(0,s.kq)("",!0),"url"===a.type?((0,s.wg)(),(0,s.j4)(d,{key:2,onSetSelected:e=>r.selectItem(a),onOpenDetail:r.openDetail,content:a},null,8,["onSetSelected","onOpenDetail","content"])):(0,s.kq)("",!0),"video"===a.type?((0,s.wg)(),(0,s.j4)(c,{key:3,onSetSelected:e=>r.selectItem(a),onOpenDetail:r.openDetail,content:a},null,8,["onSetSelected","onOpenDetail","content"])):(0,s.kq)("",!0),a.meta.new?((0,s.wg)(),(0,s.iD)("div",Te,"New")):(0,s.kq)("",!0)],64)):((0,s.wg)(),(0,s.j4)(p,{key:1,onSetSelected:e=>r.selectItem(a),onOpenDetail:r.openPath,content:a},null,8,["onSetSelected","onOpenDetail","content"]))],46,xe)])),_:2},1024)))),128))])]),(0,s.Wm)(g,{dragContainer:"#itemsLists",selectableTargets:[".content-wrapper"],selectByClick:!0,selectFromInside:!0,continueSelect:!1,toggleContinueSelect:"shift",hitRate:50,onSelect:r.onSelect},null,8,["selectableTargets","onSelect"])],64)}const Ze=(0,s._)("div",{class:"type-label"},"密码",-1),Le={class:"folder-name"},Be={class:"ext"};function ze(e,t,a,o,n,i){const r=(0,s.up)("a-image");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:"cover-wrapper",style:(0,W.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[Ze,(0,s.Wm)(r,{style:(0,W.j5)([{width:e.itemSize+"px",height:e.itemSize+"px"},{background:"#f1f1f1"}]),preview:!1,class:"sub-folder-cover",src:"./img/type/pwd.svg"},null,8,["style"])],4),(0,s._)("div",Le,(0,W.zw)(a.content.name)+"-"+(0,W.zw)(a.content.extData.username),1),(0,s._)("div",Be,(0,W.zw)(a.content.extData.domain),1)],64)}var Ke={name:"TypePwd",props:{content:Object},computed:{...(0,r.rn)({itemSize:e=>e.ui.itemSize})}};const $e=(0,p.Z)(Ke,[["render",ze]]);var qe=$e;const He=(0,s._)("div",{class:"type-label"},"图片",-1),Ve={class:"folder-name",style:{position:"relative"}},Ne={class:"ext"};function Ye(e,t,a,n,i,r){const l=(0,s.up)("a-image"),u=(0,s.up)("zoom-in-outlined");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{onDblclick:t[1]||(t[1]=e=>r.openDetail(a.content)),onClick:t[2]||(t[2]=(...e)=>r.setSelected&&r.setSelected(...e)),class:"cover-wrapper",style:(0,W.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[He,(0,s.Wm)(l,{style:(0,W.j5)([{width:e.itemSize+"px",height:e.itemSize+"px",objectFit:"cover"},{background:"#f1f1f1"}]),preview:!1,class:"content-cover",src:r.cover},null,8,["style","src"]),(0,s._)("div",{class:"type-label preview",onClick:t[0]||(t[0]=(0,o.iM)((()=>{}),["stop"]))},[(0,s.Wm)(u)])],36),(0,s._)("div",Ve,(0,W.zw)(a.content.name),1),(0,s._)("div",Ne,[(0,s._)("span",null,(0,W.zw)(a.content.ext.substr(a.content.ext.lastIndexOf(".")+1)),1),(0,s.Uk)(" "+(0,W.zw)(a.content.extData.width)+" X "+(0,W.zw)(a.content.extData.height),1)])],64)}var Je=a(2493),Ge=a(5451),Xe={name:"TypeImg",emits:["setSelected","openDetail"],components:{ZoomInOutlined:Je.Z},props:{content:Object},data(){return{contentTypeHelper:Ge.Z}},computed:{...(0,r.rn)({itemSize:e=>e.ui.itemSize}),cover(){return this.content.cover.startsWith("/")?"file://"+this.$store.state.config.storePath+this.content.cover:this.content.cover}},methods:{openDetail(e){this.$emit("openDetail",e)},setSelected(){this.$emit("setSelected")}}};const Qe=(0,p.Z)(Xe,[["render",Ye]]);var et=Qe,tt=a(3330);const at={class:"type-label"},ot={class:"folder-name"},nt={class:"ext"};function st(e,t,a,n,i,r){const l=(0,s.up)("a-image"),u=(0,s.up)("zoom-in-outlined");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{onDblclick:t[1]||(t[1]=e=>r.openDetail(a.content)),onClick:t[2]||(t[2]=(...e)=>r.setSelected&&r.setSelected(...e)),class:"cover-wrapper",style:(0,W.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[(0,s._)("div",at,(0,W.zw)(r.typeAlias),1),(0,s.Wm)(l,{style:(0,W.j5)([{width:e.itemSize+"px",height:e.itemSize+"px",objectFit:"cover",padding:.2*e.itemSize+"px"},{background:"white"}]),preview:!1,class:"sub-folder-cover content-cover",src:r.contentCover(a.content)},null,8,["style","src"]),(0,s._)("div",{class:"type-label preview",onClick:t[0]||(t[0]=(0,o.iM)((()=>{}),["stop"]))},[(0,s.Wm)(u)])],36),(0,s._)("div",ot,(0,W.zw)(a.content.name),1),(0,s._)("div",nt,[(0,s._)("span",null,(0,W.zw)(a.content.ext.substr(a.content.ext.lastIndexOf(".")+1)),1),(0,s.Uk)(" "+(0,W.zw)(i.tools.convertToText(a.content.baseInfo.size)),1)])],64)}var it={name:"TypeOther",emits:["setSelected","openDetail"],components:{ZoomInOutlined:Je.Z},props:{content:Object},computed:{...(0,r.rn)({itemSize:e=>e.ui.itemSize}),typeAlias(){try{return Ge.Z.getContentTypeAliasFromExt(this.content.ext)}catch(e){return console.log("未识别类型"),"未识别"}}},data(){return{tools:l.Z}},methods:{getExtNoDotFromFilename:Ge.Z.getExtNoDotFromFilename,contentCover(e){let t="other/"+e.type;switch(console.log(e.ext),e.ext){case".pdf":t="pdf";break;case".ppt":case".pptx":t="ppt";break;case".doc":case".docx":t="word";break;case".xls":case".xlsx":t="excel";break;case".zip":case".7z":case".rar":case".tar.gz":t="zip"}return"./img/type/"+t+".svg"},openDetail(e){this.$emit("openDetail",e)},...(0,r.OI)({focusItem:"ui/focusItem"}),setSelected(){this.$emit("setSelected")}}};const rt=(0,p.Z)(it,[["render",st]]);var lt=rt;const ut={class:"folder-name"},_t={class:"ext"};function dt(e,t,a,o,n,i){const r=(0,s.up)("a-progress");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{onDblclick:t[1]||(t[1]=e=>i.openDetail(a.content)),onClick:t[2]||(t[2]=(...e)=>i.setSelected&&i.setSelected(...e)),onMouseenter:t[3]||(t[3]=(...e)=>i.handleMouseEnter&&i.handleMouseEnter(...e)),onMouseleave:t[4]||(t[4]=(...e)=>i.handleMouseLeave&&i.handleMouseLeave(...e)),onMousemove:t[5]||(t[5]=(...e)=>i.handleMouseMove&&i.handleMouseMove(...e)),class:"cover-wrapper",style:(0,W.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[(0,s._)("div",{class:"type-label",style:(0,W.j5)({display:"none"===this.progressVisible?"inline-block":"none"})},"视频",4),(0,s._)("span",{style:(0,W.j5)([{position:"absolute",top:"5px","z-index":"99","margin-inline":"5px"},{width:e.itemSize-10+"px",display:n.progressVisible}])},[(0,s.Wm)(r,{percent:n.progress,size:"small",showInfo:!1},null,8,["percent"])],4),(0,s._)("video",{onDblclick:t[0]||(t[0]=e=>i.openDetail(a.content)),controls:"",ref:"videoPlayer",class:"video-js content-cover",style:{position:"absolute",top:"5px"}},null,544)],36),(0,s._)("div",ut,(0,W.zw)(a.content.name),1),(0,s._)("div",_t,[(0,s._)("span",null,(0,W.zw)(a.content.ext.substr(a.content.ext.lastIndexOf(".")+1)),1),(0,s.Uk)(" "+(0,W.zw)(n.duration),1)])],64)}var ct=a(2595);window.$video=ct.Z;var pt={name:"TypeVideo",emits:["setSelected","openDetail"],props:{content:Object},components:{},computed:{...(0,r.rn)({itemSize:e=>e.ui.itemSize})},data(){return{duration:"loading",progressVisible:"none",player:null,loading:!0,videoOptions:{autoplay:!1,controls:!1,loop:!0,muted:!0,aspectRatio:"1:1",poster:"",width:this.itemSize,height:this.itemSize,fullscreen:{options:{navigationUI:"hide"}},sources:""},progress:0}},created(){this.videoOptions.sources="file://"+this.content.baseInfo.path+this.content.baseInfo.filename,this.videoOptions.poster=this.poster},mounted(){let e=this;this.player=window.$video(this.$refs.videoPlayer,this.videoOptions,(function(){this.on("error",(function(){})),this.on("canplaythrough",(function(){e.loading=!1})),this.on("canplay",(()=>{let t=this.duration();this.play(),e.duration=(t/60).toFixed(0)+"分"+(t-60*(t/60).toFixed(0)).toFixed(0)+"秒",setTimeout((()=>this.pause()),5e3)}))}))},methods:{openDetail(e){this.$emit("openDetail",e)},setSelected(){this.$emit("setSelected")},handleMouseEnter(){this.progressVisible="inline-block",this.player&&this.player.play(),this.$emit("videoTime",this.player.duration())},handleMouseLeave(){this.progressVisible="none",this.player&&this.player.pause()},handleMouseMove(e){var t=this.$refs.videoPlayer.getBoundingClientRect().left,a=e.clientX,o=this.$refs.videoPlayer.clientWidth,n=(a-t)/o,s=this.player.duration();this.player.currentTime(s*n),this.progress=(100*n).toFixed(0),this.$emit("videoratio",n)}}};const mt=(0,p.Z)(pt,[["render",dt]]);var ht=mt;const ft=(0,s._)("div",{class:"type-label"},"网页",-1),gt=["src"],bt={class:"folder-name",style:{position:"relative"}},vt={class:"ext"};function wt(e,t,a,o,n,i){const r=(0,s.up)("a-image");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{onDblclick:t[0]||(t[0]=e=>i.openDetail(a.content)),onClick:t[1]||(t[1]=(...e)=>i.setSelected&&i.setSelected(...e)),class:"cover-wrapper",style:(0,W.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[ft,(0,s.Wm)(r,{onerror:"this.src='./img/default.svg'",style:(0,W.j5)([{width:e.itemSize+"px",height:e.itemSize+"px",objectFit:"cover"},{background:"#f1f1f1"}]),preview:!1,class:"sub-folder-cover content-cover",src:i.cover},null,8,["style","src"]),""!==a.content.meta.ext_data.favicon?((0,s.wg)(),(0,s.iD)("img",{key:0,onerror:"this.src='./img/default.svg'",src:a.content.meta.ext_data.favicon,class:"favicon",style:{bottom:"-10px",right:"-10px"}},null,8,gt)):(0,s.kq)("",!0)],36),(0,s._)("div",bt,(0,W.zw)(a.content.meta.name),1),(0,s._)("div",vt,[(0,s._)("span",null,(0,W.zw)(a.content.meta.href),1)])],64)}var It={name:"TypeUrl",emits:["setSelected","openDetail"],components:{},props:{content:Object},data(){return{contentTypeHelper:Ge.Z}},computed:{...(0,r.rn)({itemSize:e=>e.ui.itemSize}),cover(){return this.content.meta.cover?this.content.meta.cover.startsWith("/")?"file://"+this.$store.state.config.storePath+this.content.meta.cover:this.content.meta.cover:"/img/default.svg"}},methods:{openDetail(e){this.$emit("openDetail",e)},setSelected(){this.$emit("setSelected")}}};const Dt=(0,p.Z)(It,[["render",wt]]);var kt=Dt,yt=a(9805),Pt={name:"ContentItemList",components:{TypePwd:qe,TypeImg:et,TypeOther:lt,TypeVideo:ht,TypeUrl:kt,VueSelecto:yt.y},props:{},data(){return{selectedKey:null,dragging:!1,left:0,top:0,timer:null}},mounted(){},methods:{onDragOver(){},async onDragStart(e,t){if(this.$store.state.ui.selectedItems.length<=1)return void this.selectItem(t);this.dragging=!0;let a=document.getElementById("selectedItemsCover");e.dataTransfer.setDragImage(document.getElementById("selectedItemsCover"),a.offsetWidth/2,a.offsetHeight/2)},onDragEnd(){this.dragging=!1},onSelect(e){if(e.added.forEach((e=>{e.classList.add("selected")})),e.removed.forEach((e=>{e.classList.remove("selected")})),1===e.selected.length)return void this.$store.commit("ui/focusItem",{type:"content",data:D.Z.getContentFromUuid(e.selected[0].attributes["uuid"].value)});let t=[];e.selected.forEach((e=>{t.push(e.attributes["uuid"].value)})),this.$store.commit("ui/setSelectedItemsByUuids",t)},...(0,r.OI)({unshiftRecent:"content/unshiftRecent"}),open:te.Z.openExternal,showItemInFolder:te.Z.showItemInFolder,selectItem(e){this.$store.commit("ui/focusItem",{type:"content",data:e}),this.$store.commit("ui/setSelectedItemsByUuids",[e.meta.uuid])},openPath(e){te.Z.openExternal(e.baseInfo.path+"/"+e.baseInfo.filename)},openDetail(e){if("img"===e.type)this.$router.push({path:"/main/img/"+encodeURIComponent(e.baseInfo.path+"/"+e.baseInfo.filename)});else{if("url"!==e.type)return;te.Z.addTab(e.href)}this.unshiftRecent(e.meta.uuid)},trashItem(e){let t=this;tt.Z.confirm({title:"删除确认",content:"是否确认删除内容？此操作会删除内容的其他信息，此操作无法恢复。",okText:"确认",cancelText:"取消",onOk:()=>{te.Z.trashItem(e),setTimeout((()=>{t.$store.dispatch("ui/changeTab",{name:"all"})}),200),this.$message.success("删除内容成功。")}})},setWallPaper(e){te.Z.setWallPaper(e),this.$message.success("设置为桌面默认壁纸成功，如果当前桌面单独设置了壁纸，则仍然以原壁纸显示。未设置单独壁纸的桌面将以新壁纸显示。")},editPicture(e){te.Z.handleFileAssign("image",{filePath:"file://"+e})}},computed:{...(0,r.rn)({subFolders:e=>e.subFolder.subFolders,itemSize:e=>e.ui.itemSize,contents:e=>e.content.contents,focusItem:e=>e.ui.focusedItem,selectedItems:e=>e.ui.selectedItems}),...(0,r.Se)("content",["contentsOrderByConfig"])}};const Ct=(0,p.Z)(Pt,[["render",je]]);var Et=Ct,Mt={name:"ContentList",props:{msg:String},mounted(){},methods:{},components:{SubFolderList:Ce,ContentItemList:Et}};const Ft=(0,p.Z)(Mt,[["render",se],["__scopeId","data-v-85d47c9a"]]);var Ot=Ft,xt={name:"ContentListPage",components:{ContentHeader:ne,ContentList:Ot}};const Tt=(0,p.Z)(xt,[["render",S]]);var St=Tt;const Wt=e=>((0,s.dD)("data-v-e2a6d5e0"),e=e(),(0,s.Cn)(),e),Rt={style:{background:"#171717"}},Ut={style:{height:"54px"}},At={style:{float:"right",width:"200px",display:"flex"}},jt={style:{position:"absolute",right:"20px",top:"10px","z-index":"9"}},Zt=(0,s.Uk)("保存"),Lt=(0,s.Uk)("另存为"),Bt=Wt((()=>(0,s._)("div",{id:"tui-image-editor"},null,-1)));function zt(e,t,a,o,n,i){const r=(0,s.up)("ArrowLeftOutlined"),l=(0,s.up)("a-button"),u=(0,s.up)("a-layout-content");return(0,s.wg)(),(0,s.iD)("div",Rt,[(0,s._)("div",Ut,[(0,s.Wm)(r,{class:"action-icon",style:{color:"white"},onClick:t[0]||(t[0]=e=>this.$router.back())}),(0,s._)("div",At,[(0,s._)("div",jt,[(0,s.Wm)(l,{shape:"round",onClick:i.save,style:{"margin-right":"10px"}},{default:(0,s.w5)((()=>[Zt])),_:1},8,["onClick"]),(0,s.Wm)(l,{shape:"round",onClick:t[1]||(t[1]=e=>i.saveAs()),type:"primary",style:{}},{default:(0,s.w5)((()=>[Lt])),_:1})])])]),(0,s.Wm)(u,{style:{background:"white",height:"calc(100vh - 54px)",position:"relative"}},{default:(0,s.w5)((()=>[Bt])),_:1})])}a(2801),a(8675),a(3462);var Kt=a(6380),$t=a.n(Kt),qt=a(5358);const Ht={ZoomIn:"放大",ZoomOut:"缩小",Hand:"手掌",History:"历史",Resize:"调整宽高",Crop:"裁剪",DeleteAll:"全部删除",Delete:"删除",Undo:"撤销",Redo:"反撤销",Reset:"重置",Flip:"镜像",Rotate:"旋转",Draw:"画",Shape:"形状标注",Icon:"图标标注",Text:"文字标注",Mask:"遮罩",Filter:"滤镜",Bold:"加粗",Italic:"斜体",Underline:"下划线",Left:"左对齐",Center:"居中",Right:"右对齐",Color:"颜色","Text size":"字体大小",Custom:"自定义",Square:"正方形",Apply:"应用",Cancel:"取消","Flip X":"X 轴","Flip Y":"Y 轴",Range:"区间",Stroke:"描边",Fill:"填充",Circle:"圆",Triangle:"三角",Rectangle:"矩形",Free:"曲线",Straight:"直线",Arrow:"箭头","Arrow-2":"箭头2","Arrow-3":"箭头3","Star-1":"星星1","Star-2":"星星2",Polygon:"多边形",Location:"定位",Heart:"心形",Bubble:"气泡","Custom icon":"自定义图标","Load Mask Image":"加载蒙层图片",Grayscale:"灰度",Blur:"模糊",Sharpen:"锐化",Emboss:"浮雕","Remove White":"除去白色",Distance:"距离",Brightness:"亮度",Noise:"噪音","Color Filter":"彩色滤镜",Sepia:"棕色",Sepia2:"棕色2",Invert:"负片",Pixelate:"像素化",Threshold:"阈值",Tint:"色调",Multiply:"正片叠底",Blend:"混合色",Width:"宽度",Height:"高度","Lock Aspect Ratio":"锁定宽高比例"},Vt={"common.bi.image":"","common.bisize.width":"0px","common.bisize.height":"0px","common.backgroundImage":"none","common.backgroundColor":"#f3f4f6","common.border":"1px solid #333","header.backgroundImage":"none","header.backgroundColor":"#f3f4f6","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"NotoSans, sans-serif","loadButton.fontSize":"12px","loadButton.display":"none","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"NotoSans, sans-serif","downloadButton.fontSize":"12px","downloadButton.display":"none","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#ccc","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#858585","submenu.normalLabel.color":"#858585","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"1px solid #ccc","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"};var Nt={name:"ImageDetailPage",components:{ArrowLeftOutlined:qt.Z},data(){return{path:"",instance:null}},mounted(){console.log("getpath",this.$route.params["path"]),this.path="file://"+this.$route.params["path"],this.init(this.path)},methods:{init(e){return this.instance=new($t())(document.querySelector("#tui-image-editor"),{includeUI:{loadImage:{path:e,name:"图片"},initMenu:"draw",menuBarPosition:"bottom",theme:{"common.bi.image":"","common.bisize.width":"0px","common.bisize.height":"0px","loadButton.display":"none","downloadButton.display":"none"},locale:Ht},initMenu:"rotate",cssMaxWidth:1e3,cssMaxHeight:600}),Vt},save(){const e=this.instance.toDataURL(),t=window.atob(e.split(",")[1]),a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);const o=new Blob([a],{type:"image/png"}),n=new FormData;n.append("image",o)},saveAs(){}}};const Yt=(0,p.Z)(Nt,[["render",zt],["__scopeId","data-v-e2a6d5e0"]]);var Jt=Yt;const Gt=e=>((0,s.dD)("data-v-420132a5"),e=e(),(0,s.Cn)(),e),Xt={style:{height:"54px"}},Qt=(0,s.Uk)(" 密码 "),ea={style:{float:"right",width:"300px",display:"flex"}},ta=Gt((()=>(0,s._)("div",{style:{width:"200px"}},null,-1))),aa={style:{flex:"1"}},oa={href:"tsb://app/redirect/?package=com.thisky.import&url=/",title:"导入密码"},na={style:{padding:"15px"}},sa={key:0},ia={key:1,class:"editable-row-operations"},ra={key:0},la=["onClick"],ua=Gt((()=>(0,s._)("a",null,"取消",-1))),_a={key:1},da=["onClick"];function ca(e,t,a,o,n,i){const r=(0,s.up)("ArrowLeftOutlined"),l=(0,s.up)("ImportOutlined"),u=(0,s.up)("EditOutlined"),_=(0,s.up)("a-input"),d=(0,s.up)("a-popconfirm"),c=(0,s.up)("a-table");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Xt,[(0,s.Wm)(r,{class:"action-icon",onClick:t[0]||(t[0]=e=>this.$router.back())}),Qt,(0,s._)("div",ea,[ta,(0,s._)("div",aa,[(0,s._)("a",oa,[(0,s.Wm)(l,{class:"action-icon"})]),(0,s.Wm)(u,{class:"action-icon"})])])]),(0,s._)("div",na,[(0,s.Wm)(c,{columns:n.columns,dataSource:n.dataSource,pagination:!1,rowClassName:(e,t)=>t%2===1?"table-striped":null,size:n.size,bordered:"",class:"ant-table-striped",rowKey:"id"},{bodyCell:(0,s.w5)((({column:e,text:t,record:a})=>[["title","username","pwdText"].includes(e.dataIndex)?((0,s.wg)(),(0,s.iD)("div",sa,[n.editableData[a.key]?((0,s.wg)(),(0,s.j4)(_,{key:0,value:n.editableData[a.key][e.dataIndex],"onUpdate:value":t=>n.editableData[a.key][e.dataIndex]=t,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s.Uk)((0,W.zw)(t),1)],64))])):"action"===e.dataIndex?((0,s.wg)(),(0,s.iD)("div",ia,[n.editableData[a.key]?((0,s.wg)(),(0,s.iD)("span",ra,[(0,s._)("a",{onClick:e=>i.save(a.key)},"保存",8,la),(0,s.Wm)(d,{title:"确认保存？",onConfirm:e=>i.cancel(a.key)},{default:(0,s.w5)((()=>[ua])),_:2},1032,["onConfirm"])])):((0,s.wg)(),(0,s.iD)("span",_a,[(0,s._)("a",{onClick:e=>i.edit(a.key)},"编辑",8,da)]))])):(0,s.kq)("",!0)])),_:1},8,["columns","dataSource","rowClassName","size"])])])}var pa=a(3875),ma=a(6468),ha={name:"PasswordListPage",components:{ArrowLeftOutlined:qt.Z,ImportOutlined:pa.Z},methods:{edit(e){this.editableData[e]=(0,ma.Z)(this.dataSource.value.filter((t=>e===t.key))[0])},save(e){Object.assign(this.dataSource.value.filter((t=>e===t.key))[0],this.editableData[e]),delete this.editableData[e]},cancel(e){delete this.editableData[e]}},data(){return{editableData:{},size:"middle",columns:[{title:"序号",dataIndex:"id",key:"id",width:50},{title:"站点",dataIndex:"domain",key:"domain",sorter:!0,width:200},{title:"标题",dataIndex:"title",key:"title",sorter:!0},{title:"级别",dataIndex:"starText",key:"starText",sorter:!0,width:100,filters:[{text:"⭐⭐⭐️",value:"3"},{text:"⭐⭐",value:"2"},{text:"⭐",value:"1"}]},{title:"用户名",dataIndex:"username",key:"username",sorter:!0},{title:"密码",dataIndex:"pwdText",key:"pwdText"},{title:"操作",dataIndex:"action",key:"action"}],dataSource:[]}},created(){let e=this;te.Z.fetchAllPwds().then((t=>{let a=[],o=1;a=t.map((e=>(e.id=o,o++,e.pwdText="···",e.pwd=e.password,e.star=String(1),e.action="",e))),e.dataSource=a})).catch((t=>{e.$message.error("获取密码失败，错误原因："+t+"。")}))}};const fa=(0,p.Z)(ha,[["render",ca],["__scopeId","data-v-420132a5"]]);var ga=fa;const ba={class:"input",style:{height:"200px",position:"relative",background:"rgba(0,0,0,0.23)","border-radius":"6px"}},va=["src"],wa={style:{"padding-bottom":"10px"}},Ia={class:"wrapper-scroller",style:{height:"calc(100vh - 135px )",overflow:"auto"}},Da={style:{position:"fixed",bottom:"0","padding-bottom":"5px","font-size":"12px",color:"#999","max-width":"300px"}},ka={key:0},ya={key:1},Pa=(0,s.Uk)("确定");function Ca(e,t,a,o,n,i){const r=(0,s.up)("a-image"),l=(0,s.up)("a-textarea"),u=(0,s.up)("a-select"),_=(0,s.up)("a-col"),d=(0,s.up)("a-input-search"),c=(0,s.up)("TreeList"),p=(0,s.up)("a-tab-pane"),m=(0,s.up)("a-tabs"),h=(0,s.up)("a-button"),f=(0,s.up)("a-row");return(0,s.wg)(),(0,s.j4)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{flex:"220px",class:"wrapper-scroller",style:{height:"100vh",overflow:"auto","background-color":"#f1f1f1",padding:"10px","box-shadow":"0 0 8px rgba(65,65,65,0.49)"}},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",ba,[(0,s.Wm)(r,{height:200,width:200,src:n.addContentInfo.cover,style:{"object-fit":"scale-down",height:"200px !important","border-radius":"6px","box-shadow":"0 0 8px rgba(73, 73, 73, 0.4)"}},null,8,["src"]),(0,s._)("img",{src:n.addContentInfo.extData.favicon,class:"favicon"},null,8,va)])]),(0,s._)("div",null,[(0,s.Wm)(l,{class:"input","place-holder":"输入标题",value:n.addContentInfo.name},null,8,["value"])]),(0,s._)("div",null,[(0,s.Wm)(l,{class:"input","place-holder":"网址",value:n.addContentInfo.href},null,8,["value"])]),(0,s._)("div",null,[(0,s.Wm)(l,{class:"input","place-holder":"添加备注",value:n.addContentInfo.remark},null,8,["value"])]),(0,s.Wm)(u,{value:e.value,"onUpdate:value":t[0]||(t[0]=t=>e.value=t),mode:"tags",style:{width:"100%"},placeholder:"选择特殊标记",options:n.options,onChange:e.handleChange},null,8,["value","options","onChange"])])),_:1}),(0,s.Wm)(_,{flex:"auto",style:{padding:"10px"}},{default:(0,s.w5)((()=>[(0,s._)("div",wa,[(0,s.Wm)(d,{value:e.value,"onUpdate:value":t[1]||(t[1]=t=>e.value=t),placeholder:"快速搜索文件夹",style:{width:"100%"},onSearch:e.onSearch},null,8,["value","onSearch"])]),(0,s.Wm)(m,{size:"small",centered:"",animated:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{key:"my",tab:"我的收藏夹",style:{padding:"0 !important"}},{default:(0,s.w5)((()=>[(0,s._)("div",Ia,[(0,s.Wm)(c,{onOnSelect:i.setSelectedFolder,treeData:e.userFolders},null,8,["onOnSelect","treeData"])])])),_:1})])),_:1}),(0,s._)("div",Da,[n.selectedFolder?((0,s.wg)(),(0,s.iD)("div",ka," 收藏到：/"+(0,W.zw)(n.selectedFolder),1)):((0,s.wg)(),(0,s.iD)("div",ya,"添加到收集箱"))]),(0,s.Wm)(h,{onClick:i.save,style:{position:"fixed",right:"10px"},size:"small",type:"primary"},{default:(0,s.w5)((()=>[Pa])),_:1},8,["onClick"])])),_:1})])),_:1})}const Ea=(0,s.Uk)(" 请输入同级文件夹的名称， 此文件夹将会创建到此文件夹下 "),Ma={class:"pathBlock"},Fa=(0,s.Uk)(" 请输入同级文件夹的名称， 此文件夹将会创建到此文件夹下 "),Oa={class:"pathBlock"},xa=(0,s.Uk)(" 您正在重命名以下文件夹的名称 "),Ta={class:"pathBlock"},Sa=(0,s.Uk)(" 个人收藏"),Wa={key:0},Ra=(0,s.Uk)("创建文件夹（同级）"),Ua=(0,s.Uk)("创建子文件夹"),Aa=(0,s.Uk)("定位"),ja=(0,s.Uk)("重命名"),Za=(0,s.Uk)("删除文件夹"),La=(0,s.Uk)("刷新列表");function Ba(e,t,a,o,n,i){const r=(0,s.up)("PromptModal"),l=(0,s.up)("HomeOutlined"),u=(0,s.up)("a-empty"),_=(0,s.up)("a-menu-item"),d=(0,s.up)("a-menu-divider"),c=(0,s.up)("a-menu"),p=(0,s.up)("a-dropdown"),m=(0,s.up)("a-directory-tree");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r,{width:400,title:"创建同级文件夹",visible:n.promptVisible,onHandleOk:i.handleCreateFolder,onChangeVisible:t[0]||(t[0]=e=>this.promptVisible=e)},{message:(0,s.w5)((()=>[Ea,(0,s._)("blockquote",Ma,(0,W.zw)(this.selectedDir),1)])),_:1},8,["visible","onHandleOk"]),(0,s.Wm)(r,{message:"请输入子文件夹名称",title:"创建子文件夹",visible:n.promptVisibleCreateChild,onHandleOk:t[1]||(t[1]=e=>i.handleCreateSubFolder()),onChangeVisible:t[2]||(t[2]=e=>this.promptVisibleCreateChild=e)},{message:(0,s.w5)((()=>[Fa,(0,s._)("blockquote",Oa,(0,W.zw)(this.selectedDir),1)])),_:1},8,["visible"]),(0,s.Wm)(r,{width:400,title:"重命名文件夹",defaultValue:n.renameFolderName,visible:n.promptRenameVisible,onHandleOk:i.handleRenameFolder,onChangeVisible:t[3]||(t[3]=e=>this.promptRenameVisible=e)},{message:(0,s.w5)((()=>[xa,(0,s._)("blockquote",Ta,(0,W.zw)(this.selectedDir),1)])),_:1},8,["defaultValue","visible","onHandleOk"]),(0,s._)("div",{class:(0,W.C_)(["tree-root",{"active-root":""===this.selectedKeys[0]}]),style:{"font-size":"13px","margin-top":"5px",cursor:"pointer"},onClick:t[4]||(t[4]=e=>i.select([""]))},[(0,s.Wm)(l),Sa],2),0===a.treeData.length?((0,s.wg)(),(0,s.j4)(u,{key:0,description:"",image:n.simpleImage},null,8,["image"])):((0,s.wg)(),(0,s.j4)(m,{key:1,selectedKeys:n.selectedKeys,ref:"tree",class:"tree","field-names":a.fields,"tree-data":a.treeData,onSelect:i.select},{title:(0,s.w5)((({path:e,parentDir:t,relativePath:a,title:o,contentCount:n,dirname:r})=>[(0,s.Wm)(p,{trigger:["contextmenu"]},{overlay:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(_,{key:"create",onClick:e=>i.createFolder(t)},{default:(0,s.w5)((()=>[Ra])),_:2},1032,["onClick"]),(0,s.Wm)(_,{key:"createChild",onClick:e=>i.createSubFolder(a)},{default:(0,s.w5)((()=>[Ua])),_:2},1032,["onClick"]),(0,s.Wm)(_,{onClick:e=>i.openDir(a),key:"locate"},{default:(0,s.w5)((()=>[Aa])),_:2},1032,["onClick"]),(0,s.Wm)(d),(0,s.Wm)(_,{onClick:e=>i.renameFolder(a,r),key:"rename"},{default:(0,s.w5)((()=>[ja])),_:2},1032,["onClick"]),(0,s.Wm)(_,{onClick:t=>i.removeDir(e),key:"remove"},{default:(0,s.w5)((()=>[Za])),_:2},1032,["onClick"]),(0,s.Wm)(d),(0,s.Wm)(_,{onClick:i.refresh,key:"locate"},{default:(0,s.w5)((()=>[La])),_:1},8,["onClick"])])),_:2},1024)])),default:(0,s.w5)((()=>[(0,s._)("span",null,[(0,s.Uk)((0,W.zw)(o)+" ",1),Number(n>0)?((0,s.wg)(),(0,s.iD)("span",Wa,"("+(0,W.zw)(n)+")",1)):(0,s.kq)("",!0)])])),_:2},1024)])),_:1},8,["selectedKeys","field-names","tree-data","onSelect"]))],64)}function za(e,t,a,o,n,i){const r=(0,s.up)("a-input"),l=(0,s.up)("a-modal");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(l,{visible:a.visible,title:a.title,width:a.width,onOk:i.handleOk,okText:"确定",cancelText:"取消",onCancel:i.visibleChange},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.WI)(e.$slots,"message",{},(()=>[(0,s._)("p",null,(0,W.zw)(a.message),1)]))]),(0,s._)("div",null,[(0,s.Wm)(r,{ref:"input",defaultValue:a.defaultValue},null,8,["defaultValue"])])])),_:3},8,["visible","title","width","onOk","onCancel"])])}var Ka={name:"PromptModal",props:{visible:{type:Boolean,default:!1},width:{type:Number,default:300},message:{type:String,default:"请输入内容"},title:{type:String,default:"输入"},defaultValue:{type:String,default:""}},model:{event:["changeVisible","handleOk"]},watch:{defaultValue:{handler(e){this.$nextTick((()=>{this.$refs.input.setValue(e),setTimeout((()=>{this.$refs.input.input.select()}),100)}))}}},data(){return{}},mounted(){},methods:{handleOk(e){this.$emit("handleOk",{e:e,value:this.$refs.input.input.value,input:this.$refs.input})},visibleChange(){this.$emit("changeVisible",!this.visible)}},computed:{}};const $a=(0,p.Z)(Ka,[["render",za]]);var qa=$a,Ha=a(5925),Va=a(5050),Na={name:"TreeList",props:["treeData","fields"],components:{PromptModal:qa,HomeOutlined:Va.Z},emit:["selected"],data(){return{promptVisible:!1,promptVisibleCreateChild:!1,promptRenameVisible:!1,selectedDir:"",renameFolderName:"",simpleImage:Ha.Z.PRESENTED_IMAGE_SIMPLE,selectedKeys:[]}},methods:{refresh(){window.app.$store.dispatch("subFolder/updateTreeData")},openDir(e){te.Z.openDir(this.$store.state.config.storePath+e)},select(e,t){""===e[0]&&(this.selectedKeys=[]),this.selectedKeys=e,this.$emit("onSelect",e,t)},createFolder(e){this.selectedDir=e,this.promptVisible=!0},handleCreateFolder(e){te.Z.createDir(this.$store.state.config.storePath+this.selectedDir,e.value,this.$message),e.input.setValue(""),this.promptVisible=!1},renameFolder(e,t){this.selectedDir="/"+e,this.renameFolderName=t,this.promptRenameVisible=!0},handleRenameFolder(e){te.Z.renameFolder(this.selectedDir,e.input.input.value),e.input.setValue(""),this.promptRenameVisible=!1},createSubFolder(e){this.selectedDir="/"+e,this.promptVisible=!0},handleCreateSubFolder(e){te.Z.createDir(this.$store.state.config.storePath+this.selectedDir,e.value,this.$message),e.input.setValue(""),this.promptVisible=!1},removeDir(e){tt.Z.confirm({title:"删除确认",content:"是否确认删除文件夹？此操作将把本地文件夹移入计算机的回收站。",okText:"确认",cancelText:"取消",onOk:()=>{te.Z.trashItem(e),setTimeout((function(){window.app.$store.dispatch("subFolder/updateTreeData")}),1e3)}})}}};const Ya=(0,p.Z)(Na,[["render",Ba],["__scopeId","data-v-79aadbd4"]]);var Ja=Ya,Ga=a(8267),Xa={name:"PopSaveToFolderPage",data(){return{selectedFolder:"",options:[{value:"toRead",label:"稍后读"},{value:"toDo",label:"代办"},{value:"other",label:"其他"}],addContentInfo:{name:"",href:"",cover:"",extData:{}}}},components:{TreeList:Ja},methods:{setSelectedFolder(e,t){console.log(e,t),this.selectedFolder=e[0]},updateCapture(e){this.addContentInfo.cover="file://"+e.url},countDown(){let e=3;const t=tt.Z.success({title:"添加收藏成功",content:`弹窗将在${e}秒后自动关闭.`,okText:"好的"}),a=setInterval((()=>{e-=1,t.update({content:`弹窗将在${e}秒后自动关闭.`})}),1e3);setTimeout((()=>{clearInterval(a),t.destroy(),te.Z.hideFavPop()}),1e3*e)},save(){let e=Ga.Z.filterFilename(this.addContentInfo.name);if(e.hadMapped.length)return this.addContentInfo.name=e.filename,void window.app.$message.error({content:"文件名不可包含以下文字: "+e.hadMapped.join(" ")+" 已为您自动替换。请确认后重新提交。"});console.log("文件名通过检测"),window.libDb.reload(),D.Z.addLink(this.selectedFolder,this.addContentInfo.name,this.addContentInfo.href,this.addContentInfo.cover,this.addContentInfo.extData.favicon,this.addContentInfo.remark)&&(window.app.$store.dispatch("subFolder/updateTreeData"),this.countDown())}},mounted(){this.$store.dispatch("ui/init"),te.Z.bindAddPageInfoListener((e=>{let t={};t.name=Ga.Z.filterFilename(e.title).filename,t.href=e.url,t.remark="",t.extData={},null===e.favicon?t.extData.favicon="":t.extData.favicon=e.favicon.url,this.addContentInfo=t}),this.updateCapture),window.getAddPageInfo=()=>{te.Z.getAddPageInfo()},te.Z.noticeAddPageReady()},computed:{...(0,r.rn)({userFolders:e=>e.subFolder.myAllFolders})}};const Qa=(0,p.Z)(Xa,[["render",Ca],["__scopeId","data-v-f21c433e"]]);var eo=Qa;const to=(0,s.Uk)(" 点击登录 ");function ao(e,t,a,o,n,i){const r=(0,s.up)("a-button"),l=(0,s.up)("a-result"),u=(0,s.up)("SideBar"),_=(0,s.up)("a-layout-sider"),d=(0,s.up)("router-view"),c=(0,s.up)("a-layout"),p=(0,s.up)("FocusItem");return n.isApp||0!==e.userInfo.uid?((0,s.wg)(),(0,s.j4)(c,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{class:"wrapper-scroller",theme:"light",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,background:"#f1f1f1"}},{default:(0,s.w5)((()=>[(0,s.Wm)(u)])),_:1}),(0,s.Wm)(c,{class:"wrapper-scroller",style:(0,W.j5)({background:"white",marginLeft:"200px",marginRight:"240px",height:"100vh",position:"fixed",width:"calc(100vw - 440px)",overflowY:"auto"})},{default:(0,s.w5)((()=>[(0,s.Wm)(d)])),_:1},8,["style"]),(0,s.Wm)(_,{class:"wrapper-scroller",theme:"light",width:240,style:{background:"#f1f1f1",height:"100vh",position:"fixed",overflow:"auto",right:"0"}},{default:(0,s.w5)((()=>[(0,s.Wm)(p)])),_:1})])),_:1})):((0,s.wg)(),(0,s.j4)(l,{key:0,status:"403",title:"403","sub-title":"此站点需要登录后使用，请点击登录后再访问。"},{extra:(0,s.w5)((()=>[(0,s.Wm)(r,{type:"primary",onClick:t[0]||(t[0]=e=>i.goLogin())},{default:(0,s.w5)((()=>[to])),_:1})])),_:1}))}const oo={class:"side-bar",style:{"overflow-x":"hidden"}},no=(0,s._)("span",null,"全部",-1),so=(0,s._)("span",null,"收集箱",-1),io=(0,s._)("span",null,"最近",-1),ro=["onClick"],lo=(0,s._)("div",{style:{"text-align":"center","margin-bottom":"10px"}},"输入文件夹名称",-1);function uo(e,t,a,n,i,r){(0,s.up)("UserInfo");const l=(0,s.up)("AppstoreOutlined"),u=(0,s.up)("a-menu-item"),_=(0,s.up)("InboxOutlined"),d=(0,s.up)("ClockCircleOutlined"),c=(0,s.up)("a-menu"),p=(0,s.up)("FolderOutlined"),m=(0,s.up)("a-col"),h=(0,s.up)("a-row"),f=(0,s.up)("a-collapse-panel"),g=(0,s.up)("a-collapse"),b=(0,s.up)("a-input"),v=(0,s.up)("PlusOutlined"),w=(0,s.up)("a-popconfirm"),I=(0,s.up)("TreeList");return(0,s.wg)(),(0,s.iD)("div",oo,[(0,s.kq)("",!0),(0,s.Wm)(c,{class:"nav",selectedKeys:r.tab,"onUpdate:selectedKeys":t[0]||(t[0]=e=>r.tab=e),style:{background:"none"},mode:"inline",onClick:r.handleNavClick},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{key:"all",onTitleClick:r.titleClick},{icon:(0,s.w5)((()=>[(0,s.Wm)(l)])),default:(0,s.w5)((()=>[no])),_:1},8,["onTitleClick"]),(0,s.Wm)(u,{key:"collection",onTitleClick:r.titleClick},{icon:(0,s.w5)((()=>[(0,s.Wm)(_)])),default:(0,s.w5)((()=>[so])),_:1},8,["onTitleClick"]),(0,s.Wm)(u,{key:"recent"},{icon:(0,s.w5)((()=>[(0,s.Wm)(d)])),default:(0,s.w5)((()=>[io])),_:1})])),_:1},8,["selectedKeys","onClick"]),(0,s.Wm)(g,{class:"tab-wrapper",activeKey:i.collapseContentType,"onUpdate:activeKey":t[1]||(t[1]=e=>i.collapseContentType=e),bordered:!1,ghost:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{key:"contentType",header:"内容类型"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(h,{class:"content-types",type:"flex"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.contentTypes,(e=>((0,s.wg)(),(0,s.j4)(m,{key:e,span:12},{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,W.C_)(["type",{active:e.tab===r.tab[0]}]),type:"link",onClick:t=>r.setTab(e.tab,e.name)},[(0,s.Wm)(p),(0,s.Uk)(" "+(0,W.zw)(e.name),1)],10,ro)])),_:2},1024)))),128))])),_:1})])])),_:1})])),_:1},8,["activeKey"]),(0,s.Wm)(w,{"ok-text":"确定","cancel-text":"取消",onConfirm:r.createDir},{icon:(0,s.w5)((()=>[lo])),title:(0,s.w5)((()=>[(0,s.Wm)(b,{ref:"dirInput",style:{"margin-left":"-10px"}},null,512)])),default:(0,s.w5)((()=>[(0,s._)("div",{onClick:t[2]||(t[2]=(0,o.iM)((()=>{}),["prevent","stop"])),style:{position:"absolute","z-index":"99",width:"20px",height:"20px",right:"0",cursor:"pointer"}},[(0,s.Wm)(v)])])),_:1},8,["onConfirm"]),(0,s.Wm)(g,{class:"tab-wrapper",activeKey:i.collapseFolder,"onUpdate:activeKey":t[3]||(t[3]=e=>i.collapseFolder=e),bordered:!1,ghost:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{key:"folder",header:"文件夹"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(I,{onOnSelect:r.setSelectedFolder,treeData:e.userFolders,fields:i.userFolderFields},null,8,["onOnSelect","treeData","fields"])])])),_:1})])),_:1},8,["activeKey"])])}var _o=a(6229),co=a(8269),po=a(5114),mo=a(247),ho=a(7081);const fo=e=>((0,s.dD)("data-v-ab6572e0"),e=e(),(0,s.Cn)(),e),go={class:"user-info"},bo=["href"],vo=["href"],wo={style:{"text-align":"center",background:"white",padding:"10px","border-radius":"4px","box-shadow":"0 0 4px rgba(124,124,124,0.35)"}},Io=(0,s.Uk)("登录 "),Do={style:{"font-size":"12px","text-align":"left",color:"#666"}},ko=(0,s.Uk)("登录后即可使用"),yo=fo((()=>(0,s._)("strong",null,"云端同步",-1))),Po=(0,s.Uk)("和"),Co=fo((()=>(0,s._)("strong",null,"团队收藏夹",-1))),Eo=(0,s.Uk)("功能。解锁全新协作模式。 "),Mo={key:0,href:"tsb://app/redirect/?package=com.thisky.helper&url=https://www.yuque.com/tswork/browser/gynywc"},Fo={key:1,target:"_blank",href:"https://www.yuque.com/tswork/browser/gynywc"};function Oo(e,t,a,o,n,i){const r=(0,s.up)("a-avatar"),l=(0,s.up)("a-col"),u=(0,s.up)("a-progress"),_=(0,s.up)("a-row"),d=(0,s.up)("a-button");return(0,s.wg)(),(0,s.iD)("div",go,[e.userInfo.uid?((0,s.wg)(),(0,s.j4)(_,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(l,{flex:"60px"},{default:(0,s.w5)((()=>[(0,s._)("a",{href:i.getComProtocolUrl(e.server.userSpaceUrl)},[(0,s.Wm)(r,{src:e.userInfo.avatar,size:50},null,8,["src"])],8,bo)])),_:1}),(0,s.Wm)(l,{flex:"auto"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("a",{href:i.getComProtocolUrl(e.server.userSpaceUrl),target:"_blank",class:"nickname"},(0,W.zw)(e.userInfo.nickname),9,vo)]),(0,s._)("div",null,[(0,s.Wm)(u,{title:"剩余空间99%",percent:99,size:"small"})]),(0,s._)("div",null,[(0,s._)("span",{class:"logout",onClick:t[0]||(t[0]=e=>i.logout())},"登出")])])),_:1})])),_:1})):((0,s.wg)(),(0,s.j4)(_,{key:1,style:{"text-align":"center"}},{default:(0,s.w5)((()=>[(0,s._)("div",wo,[n.isApp?((0,s.wg)(),(0,s.j4)(d,{key:0,block:"",type:"primary",onClick:t[1]||(t[1]=e=>i.goAppLogin()),size:"small",style:{"margin-bottom":"10px"}},{default:(0,s.w5)((()=>[Io])),_:1})):(0,s.kq)("",!0),(0,s._)("div",Do,[ko,yo,Po,Co,Eo,n.isApp?((0,s.wg)(),(0,s.iD)("a",Mo,"了解更多")):((0,s.wg)(),(0,s.iD)("a",Fo,"了解更多"))])])])),_:1}))])}var xo={name:"UserInfo",props:{msg:String},data(){return{isApp:window.isApp}},computed:{...(0,r.rn)({userInfo:e=>e.user.userInfo,server:e=>e.config.server})},methods:{getComProtocolUrl:l.Z.getComProtocolUrl,logout(){this.$store.commit("user/setUserInfo",{uid:0})},goAppLogin(){window.ipc.send("addTab",{url:this.server.loginUrl});let e=setInterval((()=>{window.ipc.send("getUserInfo"),0!==this.userInfo.uid&&clearInterval(e)}),1e3)}}};const To=(0,p.Z)(xo,[["render",Oo],["__scopeId","data-v-ab6572e0"]]);var So=To,Wo={name:"SideBar",props:{msg:String},components:{UserInfo:So,AppstoreOutlined:_o.Z,InboxOutlined:co.Z,ClockCircleOutlined:po.Z,FolderOutlined:mo.Z,PlusOutlined:ho.Z,TreeList:Ja},data(){return{mkdirVisible:!1,userFolderFields:{subFolders:"children",children:"subFolders",dirname:"title",title:"dirname",path:"key"},visiblePopInputDirName:!1,collapseContentType:["contentType"],collapseFolder:["folder"],collapseGroupFolder:["groupFolder"],contentTypes:[{name:"书签",tab:"bookmark"},{name:"密码",tab:"pwds"},{name:"图片",tab:"img"},{name:"视频",tab:"video"},{name:"文档",tab:"doc"}]}},computed:{tab(){return[this.$store.state.ui.currentTab.name]},...(0,r.rn)({groups:e=>e.group.groups,userFolders:e=>e.subFolder.myAllFolders})},methods:{setSelectedFolder(e){this.$router.push("/main/"),this.$store.dispatch("ui/changeFolder",{path:this.$store.state.config.storePath+"/"+e[0]+"/"})},createDir(e){e.preventDefault();let t=this.$refs.dirInput.input.value;te.Z.createDir(this.$store.state.config.storePath,t,this.$message),this.$refs.dirInput.setValue("")},handleNavClick(e){const t={all:"全部",collection:"收集箱",recent:"最近"};this.$router.push("/main/"),this.setTab(e.key,t[e.key])},titleClick(e){this.setTab(e.key),this.$router.push("/main/")},getFilters(e){let t=function(e){return e.filename.endsWith(".url")},a=function(e,t="img"){return Ge.Z.getContentTypeFromFilename(e.filename).name===t},o=e=>a(e,"img"),n=e=>a(e,"video"),s=e=>a(e,"doc");switch(e){case"bookmark":return t;case"img":return o;case"video":return n;case"doc":return s;default:return e=>e}},setTab(e,t){switch(e){case"pwds":this.$router.replace("pwds"),this.$store.commit("ui/setTab",{name:"pwds",alias:"密码"});break;case"collection":this.$store.commit("ui/setConfig",{showSubFolders:!1}),this.$router.replace("content"),this.$store.dispatch("ui/changeTab",{name:e,alias:t});break;default:this.$store.commit("ui/setConfig",{showSubFolders:!0}),this.$store.commit("ui/setFilter",[this.getFilters(e)]),this.$router.replace("content"),this.$store.dispatch("ui/changeTab",{name:e,alias:t})}}}};const Ro=(0,p.Z)(Wo,[["render",uo]]);var Uo=Ro;const Ao={key:0},jo={key:1},Zo={key:2,style:{"padding-top":"100px"}};function Lo(e,t,a,o,n,i){const r=(0,s.up)("SelectedItemContent"),l=(0,s.up)("focus-item-content"),u=(0,s.up)("focus-item-folder"),_=(0,s.up)("a-empty");return this.selectedItems.length>1?((0,s.wg)(),(0,s.iD)("div",Ao,[(0,s.Wm)(r)])):this.focusedItem?((0,s.wg)(),(0,s.iD)("div",jo,["content"===this.focusedItem.type?((0,s.wg)(),(0,s.j4)(l,{key:0})):((0,s.wg)(),(0,s.j4)(u,{key:1}))])):((0,s.wg)(),(0,s.iD)("div",Zo,[(0,s.Wm)(_,{description:"未选择任何内容"})]))}const Bo=e=>((0,s.dD)("data-v-78b864ba"),e=e(),(0,s.Cn)(),e),zo={class:"content-info"},Ko={style:{"margin-bottom":"20px",height:"auto",position:"relative"}},$o=["src"],qo={style:{"margin-bottom":"10px"}},Ho={style:{"margin-bottom":"10px"}},Vo=Bo((()=>(0,s._)("h4",null,"基本信息",-1))),No=Bo((()=>(0,s._)("br",null,null,-1))),Yo=Bo((()=>(0,s._)("br",null,null,-1))),Jo=Bo((()=>(0,s._)("br",null,null,-1))),Go=(0,s.Uk)(" 文件路径："),Xo=Bo((()=>(0,s._)("br",null,null,-1))),Qo=Bo((()=>(0,s._)("br",null,null,-1))),en=(0,s.Uk)("导出文件");function tn(e,t,a,o,n,i){const r=(0,s.up)("a-image"),l=(0,s.up)("a-textarea"),u=(0,s.up)("ExportOutlined"),_=(0,s.up)("a-input"),d=(0,s.up)("a-rate"),c=(0,s.up)("a-button");return(0,s.wg)(),(0,s.iD)("div",zo,[(0,s._)("div",Ko,[["img","url"].indexOf(e.focusedItem.type)>-1?((0,s.wg)(),(0,s.j4)(r,{key:0,width:200,style:{"max-height":"300px"},src:e.cover},{placeholder:(0,s.w5)((()=>[(0,s.Wm)(r,{src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",width:200,preview:!1})])),_:1},8,["src"])):((0,s.wg)(),(0,s.j4)(r,{key:1,style:(0,W.j5)([{objectFit:"cover",padding:"20px"},{background:"white"}]),width:200,height:190,preview:!1,class:"sub-folder-cover",src:"./img/type/other/"+e.focusedItem.type+".svg"},null,8,["src"])),e.focusedItem.extData.favicon?((0,s.wg)(),(0,s.iD)("img",{key:2,onerror:"this.src='./img/default.svg'",src:e.focusedItem.extData.favicon,class:"favicon",style:{bottom:"-10px",right:"-10px"}},null,8,$o)):(0,s.kq)("",!0)]),(0,s._)("div",qo,[(0,s.Wm)(l,{onBlur:t[0]||(t[0]=t=>e.rename()),value:e.userInput.name,"onUpdate:value":t[1]||(t[1]=t=>e.userInput.name=t),autSize:{minRows:1,maxRows:5},style:{"margin-bottom":"10px"},placeholder:"标题"},null,8,["value"]),(0,s.Wm)(l,{onBlur:t[2]||(t[2]=t=>e.editRemark()),style:{"margin-bottom":"10px"},value:e.userInput.remark,"onUpdate:value":t[3]||(t[3]=t=>e.userInput.remark=t),placeholder:"备注"},null,8,["value"]),(0,s.Wm)(_,{onBlur:t[5]||(t[5]=t=>e.editHref()),style:{"margin-bottom":"0"},value:e.userInput.href,"onUpdate:value":t[6]||(t[6]=t=>e.userInput.href=t),placeholder:"网址网址"},{suffix:(0,s.w5)((()=>[(0,s.Wm)(u,{title:"打开引用页",onClick:t[4]||(t[4]=t=>e.ipc.addTab(e.focusedItem.meta.href))})])),_:1},8,["value"]),(0,s.Wm)(d,{onChange:e.setRate,value:e.userInput.rate,"onUpdate:value":t[7]||(t[7]=t=>e.userInput.rate=t),style:{"margin-bottom":"10px"},"allow-half":""},null,8,["onChange","value"])]),(0,s._)("div",Ho,[Vo,(0,s._)("div",null,[(0,s.Uk)(" 创建时间："+(0,W.zw)(this.dateStr(e.focusedItem.baseInfo.createTime))+" ",1),No,(0,s.Uk)(" 添加时间："+(0,W.zw)(this.dateStr(e.focusedItem.baseInfo.addTime))+" ",1),Yo,(0,s.Uk)(" 修改时间："+(0,W.zw)(this.dateStr(e.focusedItem.baseInfo.modifyTime))+" ",1),Jo,Go,Xo,(0,s._)("span",{title:"点击定位到文件",onClick:t[8]||(t[8]=t=>e.ipc.showItemInFolder(e.focusedItem.baseInfo.path+e.focusedItem.baseInfo.filename)),style:{color:"#999",cursor:"pointer"}},(0,W.zw)(e.focusedItem.baseInfo.relativePath)+(0,W.zw)(e.focusedItem.baseInfo.filename),1),Qo,(0,s.Uk)(" 文件大小："+(0,W.zw)(e.focusedItem.baseInfo.sizeText),1)])]),(0,s._)("div",null,[(0,s.Wm)(c,{onClick:t[9]||(t[9]=t=>e.exportContent(e.focusedItem)),block:""},{default:(0,s.w5)((()=>[en])),_:1})])])}var an=a(4870),on=a(4965);function nn(e){var t,a=(new Date).getTime();if(a=parseInt((a-1e3*e)/1e3),a<600)return"刚刚";if(a<3600&&a>=600)return t=Math.floor(a/60),t+"分钟前";if(a<86400&&a>=3600)return t=Math.floor(a/60/60),t+"小时前";if(a<259200&&a>=86400)return t=Math.floor(a/60/60/24),t+"天前";var o=new Date(1e3*parseInt(e));return o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate()}var sn=a(2744),rn=a(8030),ln=(0,s.aZ)({name:"FocusItemContent",props:{},components:{ExportOutlined:on.Z},data(){return{ipc:te.Z,value3:(0,an.iH)(["a1","b2"]),options:[{value:"稍后读"},{value:"代办"},{value:"待整理"},{value:"待标注"}],userInput:{name:"",remark:"",rate:0,href:""}}},mounted(){this.userInput.name=this.focusedItem.meta.name,this.userInput.remark=this.focusedItem.meta.remark||"",this.userInput.rate=this.focusedItem.meta.rate||0,this.userInput.href=this.focusedItem.meta.href||""},methods:{dateStr:nn,exportContent(e){let t=Ga.Z.getStorePathFromRelativePath(e.meta.relative_path_full);rn.Z.saveAs(t)},rename(){if(this.userInput.name===this.focusedItem.name||""===this.userInput.name)return void(this.userInput.name=this.focusedItem.name);let e=D.Z.rename(this.focusedItem.meta.uuid,this.userInput.name);e.status===sn.Z.successCode?(this.$message.success("修改名称成功。"),this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})):(this.userInput.name=this.focusedItem.meta.name,this.$message.error("修改名称失败，原因："+e.info))},editRemark(){if(this.userInput.remark===this.focusedItem.meta.remark)return;let e=D.Z.update(this.focusedItem.meta.uuid,{remark:this.userInput.remark});e.status===sn.Z.successCode?this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.remark=this.focusedItem.meta.remark,this.$message.error("修改备注失败，原因："+e.info))},editHref(){if(this.userInput.href===this.focusedItem.meta.href)return;let e=D.Z.update(this.focusedItem.meta.uuid,{href:this.userInput.href});e.status===sn.Z.successCode?this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.href=this.focusedItem.meta.href,this.$message.error("修改链接失败，原因："+e.info))},setRate(){let e=D.Z.update(this.focusedItem.meta.uuid,{rate:this.userInput.rate});this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})}},watch:{"focusedItem.meta.name":{handler(e,t){this.userInput.name=e}},"focusedItem.meta.remark":{handler(e,t){this.userInput.remark=e}},"focusedItem.meta.href":{handler(e,t){this.userInput.href=e}},"focusedItem.meta.rate":{handler(e,t){this.userInput.rate=e||0}}},computed:{...(0,r.rn)({focusedItem:e=>e.ui.focusedItem.data}),cover(){return this.focusedItem.cover?this.focusedItem.cover.startsWith("/")?"file://"+this.$store.state.config.storePath+this.focusedItem.cover:this.focusedItem.cover:""}},setup(){return{random:(0,an.iH)()}}});const un=(0,p.Z)(ln,[["render",tn],["__scopeId","data-v-78b864ba"]]);var _n=un;const dn=e=>((0,s.dD)("data-v-4c068b75"),e=e(),(0,s.Cn)(),e),cn={class:"content-info"},pn={style:{"margin-bottom":"20px",height:"auto",position:"relative"}},mn={style:{"margin-bottom":"10px"}},hn={style:{"margin-bottom":"10px"}},fn=dn((()=>(0,s._)("h4",null,"基本信息",-1))),gn=dn((()=>(0,s._)("br",null,null,-1))),bn=dn((()=>(0,s._)("br",null,null,-1))),vn=dn((()=>(0,s._)("br",null,null,-1))),wn=(0,s.Uk)(" 文件路径："),In=dn((()=>(0,s._)("br",null,null,-1))),Dn=dn((()=>(0,s._)("br",null,null,-1))),kn=(0,s.Uk)("导出文件");function yn(e,t,a,o,n,i){const r=(0,s.up)("a-image"),l=(0,s.up)("a-textarea"),u=(0,s.up)("a-rate"),_=(0,s.up)("a-button");return(0,s.wg)(),(0,s.iD)("div",cn,[(0,s._)("div",pn,[(0,s.Wm)(r,{style:{objectFit:"cover",padding:"20px"},width:"100%",height:190,preview:!1,src:"./img/folder.svg"},null,8,["src"])]),(0,s._)("div",mn,[(0,s.Wm)(l,{onBlur:t[0]||(t[0]=t=>e.rename()),value:e.userInput.name,"onUpdate:value":t[1]||(t[1]=t=>e.userInput.name=t),autSize:{minRows:1,maxRows:5},style:{"margin-bottom":"10px"},placeholder:"标题"},null,8,["value"]),(0,s.Wm)(l,{onBlur:t[2]||(t[2]=t=>e.editRemark()),value:e.userInput.remark,"onUpdate:value":t[3]||(t[3]=t=>e.userInput.remark=t),placeholder:"备注"},null,8,["value"]),(0,s.Wm)(u,{onChange:e.setRate,value:e.userInput.rate,"onUpdate:value":t[4]||(t[4]=t=>e.userInput.rate=t),style:{"margin-bottom":"10px"},"allow-half":""},null,8,["onChange","value"])]),(0,s._)("div",hn,[fn,(0,s._)("div",null,[(0,s.Uk)(" 创建时间："+(0,W.zw)(this.dateStr(e.focusedItem.baseInfo.createTime))+" ",1),gn,(0,s.Uk)(" 添加时间："+(0,W.zw)(this.dateStr(e.focusedItem.baseInfo.addTime))+" ",1),bn,(0,s.Uk)(" 修改时间："+(0,W.zw)(this.dateStr(e.focusedItem.baseInfo.modifyTime))+" ",1),vn,wn,In,(0,s._)("span",{title:"点击定位到文件",onClick:t[5]||(t[5]=t=>e.ipc.showItemInFolder(e.focusedItem.baseInfo.path+e.focusedItem.baseInfo.filename)),style:{color:"#999",cursor:"pointer"}},(0,W.zw)(e.focusedItem.baseInfo.relativePath)+(0,W.zw)(e.focusedItem.baseInfo.filename),1),Dn,(0,s.Uk)(" 文件大小："+(0,W.zw)(e.focusedItem.baseInfo.sizeText),1)])]),(0,s._)("div",null,[(0,s.Wm)(_,{onClick:t[6]||(t[6]=t=>e.exportContent(e.focusedItem)),block:""},{default:(0,s.w5)((()=>[kn])),_:1})])])}var Pn=a(9300),Cn=(0,s.aZ)({name:"FocusItemFolder",props:{},components:{},data(){return{ipc:te.Z,value3:(0,an.iH)(["a1","b2"]),options:[{value:"稍后读"},{value:"代办"},{value:"待整理"},{value:"待标注"}],userInput:{name:"",remark:"",rate:0}}},mounted(){this.userInput.name=this.focusedItem.meta.name,this.userInput.remark=this.focusedItem.meta.remark||"",this.userInput.rate=this.focusedItem.meta.rate||0},methods:{rename(){if(this.userInput.name===this.focusedItem.meta.name)return;let e=Pn.Z.rename(this.focusedItem.meta.uuid,this.userInput.name);e.status===sn.Z.successCode?(this.$message.success("修改名称成功。"),this.$store.commit("subFolder/updateSubFolderWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}),this.$store.dispatch("subFolder/updateTreeData")):(this.userInput.name=this.focusedItem.name,this.$message.error("修改名称失败，原因："+e.info))},editRemark(){if(this.userInput.remark===this.focusedItem.meta.remark)return;let e=Pn.Z.update(this.focusedItem.meta.uuid,{remark:this.userInput.remark});e.status===sn.Z.successCode?this.$store.commit("subFolder/updateSubFolderWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.remark=this.focusedItem.meta.remark,this.$message.error("修改备注失败，原因："+e.info))},setRate(){let e=Pn.Z.update(this.focusedItem.meta.uuid,{rate:this.userInput.rate});this.$store.commit("subFolder/updateSubFolderWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})},exportContent(e){console.log(e);let t=Ga.Z.getStorePathFromRelativePath(e.meta.relative_path_full),a=Ga.Z.getStorePathFromRelativePath(e.meta.relative_path);rn.Z.saveAs(t,a)},dateStr(e){var t,a=(new Date).getTime();if(e=parseInt(e.toFixed(0))/1e3,a=parseInt((a-1e3*e)/1e3),a<600)return"刚刚";if(a<3600&&a>=600)return t=Math.floor(a/60),t+"分钟前";if(a<86400&&a>=3600)return t=Math.floor(a/60/60),t+"小时前";if(a<259200&&a>=86400)return t=Math.floor(a/60/60/24),t+"天前";var o=new Date(1e3*parseInt(e));return o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate()}},watch:{"focusedItem.meta.name":{handler(e,t){this.userInput.name=e}},"focusedItem.meta.remark":{handler(e,t){this.userInput.remark=e}},"focusedItem.meta.rate":{handler(e,t){this.userInput.rate=e||0}}},computed:{...(0,r.rn)({focusedItem:e=>e.ui.focusedItem.data}),cover(){return this.focusedItem.cover?this.focusedItem.cover.startsWith("/")?"file://"+this.$store.state.config.storePath+this.focusedItem.cover:this.focusedItem.cover:""}},setup(){return{random:(0,an.iH)()}}});const En=(0,p.Z)(Cn,[["render",yn],["__scopeId","data-v-4c068b75"]]);var Mn=En;const Fn=e=>((0,s.dD)("data-v-45fc2829"),e=e(),(0,s.Cn)(),e),On={class:"content-info"},xn={id:"",style:{position:"relative",width:"200px",height:"auto",display:"none"}},Tn={style:{"margin-top":"20px","margin-bottom":"20px",position:"relative",height:"180px","vertical-align":"middle","text-align":"center",width:"200px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},Sn=["id"],Wn={style:{"text-align":"center",color:"#999"}},Rn=Fn((()=>(0,s._)("div",{style:{"margin-bottom":"10px"}},null,-1)));function Un(e,t,a,o,n,i){const r=(0,s.up)("a-image"),l=(0,s.up)("a-badge");return(0,s.wg)(),(0,s.iD)("div",On,[(0,s._)("div",xn,[(0,s.Wm)(r,{style:{"border-radius":"0"},src:e.cover(this.selectedItems[0].cover),width:200,prview:!1},null,8,["src"])]),(0,s._)("div",Tn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.selectedItems,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{id:a===this.selectedItems.length-1?"selectedItemsCover":void 0,class:"rotate-cover",style:(0,W.j5)({transform:"rotate("+a/e.selectedItems.length*15+"deg)",transformOrigin:"center center"}),key:t.meta.uuid},[a===this.selectedItems.length-1?((0,s.wg)(),(0,s.j4)(l,{key:0,style:{position:"absolute","margin-left":"calc(50% + 10px)",top:"calc(50%)"},id:"badge",count:e.selectedItems.length},null,8,["count"])):(0,s.kq)("",!0),["img","url"].indexOf(t.type)>-1?((0,s.wg)(),(0,s.j4)(r,{key:1,width:180,style:{"max-height":"200px"},src:e.cover(t.cover)},{placeholder:(0,s.w5)((()=>[(0,s.Wm)(r,{src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",width:200,preview:!1})])),_:2},1032,["src"])):((0,s.wg)(),(0,s.j4)(r,{key:2,style:(0,W.j5)([{objectFit:"cover",padding:"20px"},{background:"white"}]),width:180,height:150,preview:!1,class:"sub-folder-cover",src:"./img/type/other/"+t.type+".svg"},null,8,["src"]))],12,Sn)))),128))]),(0,s._)("div",Wn,(0,W.zw)(e.selectedItems.length)+" 个内容已选 ",1),Rn])}var An=(0,s.aZ)({name:"SelectedItemContent",props:{},components:{},data(){return{ipc:te.Z,value3:(0,an.iH)(["a1","b2"]),options:[{value:"稍后读"},{value:"代办"},{value:"待整理"},{value:"待标注"}],userInput:{name:"",remark:"",rate:0,href:""}}},mounted(){this.userInput.name=this.focusedItem.meta.name,this.userInput.remark=this.focusedItem.meta.remark||"",this.userInput.rate=this.focusedItem.meta.rate||0,this.userInput.href=this.focusedItem.meta.href||""},methods:{cover(e){return e?e.startsWith("/")?"file://"+this.$store.state.config.storePath+e:e:""},dateStr:nn,exportContent(e){let t=Ga.Z.getStorePathFromRelativePath(e.meta.relative_path_full);rn.Z.saveAs(t)},rename(){if(this.userInput.name===this.focusedItem.name||""===this.userInput.name)return void(this.userInput.name=this.focusedItem.name);let e=D.Z.rename(this.focusedItem.meta.uuid,this.userInput.name);e.status===sn.Z.successCode?(this.$message.success("修改名称成功。"),this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})):(this.userInput.name=this.focusedItem.meta.name,this.$message.error("修改名称失败，原因："+e.info))},editRemark(){if(this.userInput.remark===this.focusedItem.meta.remark)return;let e=D.Z.update(this.focusedItem.meta.uuid,{remark:this.userInput.remark});e.status===sn.Z.successCode?this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.remark=this.focusedItem.meta.remark,this.$message.error("修改备注失败，原因："+e.info))},editHref(){if(this.userInput.href===this.focusedItem.meta.href)return;let e=D.Z.update(this.focusedItem.meta.uuid,{href:this.userInput.href});e.status===sn.Z.successCode?this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.href=this.focusedItem.meta.href,this.$message.error("修改链接失败，原因："+e.info))},setRate(){let e=D.Z.update(this.focusedItem.meta.uuid,{rate:this.userInput.rate});this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})}},watch:{"focusedItem.meta.name":{handler(e,t){this.userInput.name=e}},"focusedItem.meta.remark":{handler(e,t){this.userInput.remark=e}},"focusedItem.meta.href":{handler(e,t){this.userInput.href=e}},"focusedItem.meta.rate":{handler(e,t){this.userInput.rate=e||0}}},computed:{...(0,r.rn)({focusedItem:e=>e.ui.focusedItem.data,selectedItems:e=>e.ui.selectedItems})},setup(){return{random:(0,an.iH)()}}});const jn=(0,p.Z)(An,[["render",Un],["__scopeId","data-v-45fc2829"]]);var Zn=jn,Ln=(0,s.aZ)({name:"FocusItem",props:{},components:{FocusItemContent:_n,FocusItemFolder:Mn,SelectedItemContent:Zn},data(){},methods:{},computed:{...(0,r.rn)({focusedItem:e=>e.ui.focusedItem,selectedItems:e=>e.ui.selectedItems})},setup(){return{}}});const Bn=(0,p.Z)(Ln,[["render",Lo]]);var zn=Bn,Kn={name:"MainPage",components:{SideBar:Uo,FocusItem:zn},data(){return{isApp:window.isApp}},computed:{...(0,r.rn)({userInfo:e=>e.user.userInfo,storePath:e=>e.config.storePath})},mounted(){window.isApp&&(this.$store.commit("config/setIsApp",this.isApp),this.$store.dispatch("ui/init"),this.$store.dispatch("ui/changeTab",{name:"all",alias:"全部"}))},methods:{goLogin(){location.href=this.$store.state.config.server.loginUrl}}};const $n=(0,p.Z)(Kn,[["render",ao]]);var qn=$n;const Hn=[{path:"/",redirect:"/main"},{path:"/main",component:qn,redirect:"/main/content",children:[{path:"content",component:St},{name:"img",path:"img/:path",component:Jt},{name:"pwds",path:"pwds",component:ga}]},{name:"popSaveToFolder",path:"/popSaveToFolder",component:eo}];var Vn=Hn,Nn=a(678);const Yn=(0,Nn.p7)({history:(0,Nn.r5)(),routes:Vn});let Jn=(0,o.ri)(h).use(Yn).use(n.ZP).use(O).mount("#app");window.tsbSdk&&(window.tsbk=T(),T().config({signature:"ts"}),T().on("gotUserInfo",((e,t)=>{let a=t.user.value;Jn.$store.commit("user/setUserInfo",a)})),T().ready(),window.appReady()),window.app=Jn},6873:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7214);_utils_tools__WEBPACK_IMPORTED_MODULE_0__.Z.getWindowArgs(window);const fs=eval("require")("fs"),contentListModel={loadLocalStoreContents(e){let t=fs.readdirSync(e),a=[];return t.forEach((t=>{a.push({path:e,filename:t,stat:fs.statSync(e+t)})})),a}};__webpack_exports__["Z"]=contentListModel},5517:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _models_contentListModel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6873),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4117),_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8267),_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9300),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4806),lodash__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1960);const fs=eval("require")("fs"),group={namespaced:!0,state:()=>({recentContents:[],contents:[]}),mutations:{unshiftRecent(e,t){let a=lodash__WEBPACK_IMPORTED_MODULE_4___default().findIndex(e.recentContents,{uuid:t});a>0&&e.recentContents.splice(a,1),e.recentContents.unshift({uuid:t,time:Date.now()}),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_5__.Z.setRecentContents(e.recentContents)},updateContents(e,t){e.contents=t},updateContentWithUuid(e,t){e.contents.forEach((e=>{if(e.meta.uuid===t.uuid){let a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(t.meta.relative_path_full);e.baseInfo.relativePath=a.relativeFolder,e.baseInfo.filename=a.filename,e.name=t.meta.name,e.meta=t.meta}}))},assignContentMeta(e,t){if("undefined"===typeof t.relative_path_full)return;let a=null;e.contents=e.contents.map((e=>(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(e.baseInfo.relativePath+e.baseInfo.filename)===t.relative_path_full&&(e=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromFile(t.relative_path_full),a=e),e))),a||(e.contents=e.contents.unshift(_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromFile(t.relative_path_full)))}},getters:{contentsOrderByCreateTime(e){function t(e){return function(t,a){var o=t.baseInfo[e],n=a.baseInfo[e];return n-o}}return e.contents.sort(t("createTime"))},contentsOrderByConfig(e,t,a){return"create_time"===a.ui.orders[0]?t.contentsOrderByCreateTime:(a.ui.orders.length,e.contents)},recentContents(e){return e.recentContents=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_5__.Z.getRecentContents()||[],e.recentContents}},actions:{changeToRecent(e){let t=e.state.recentContents.map((e=>(console.log(e),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromUuid(e.uuid))));console.log(t),e.commit("updateContents",t),e.commit("ui/setOrders",[],{root:!0}),e.commit("subFolder/setCurrentSubFolders",[],{root:!0})},loadFolderContents(e,t){let a=_models_contentListModel__WEBPACK_IMPORTED_MODULE_0__.Z.loadLocalStoreContents(t),o=e.rootState.ui.config,n=[],s=[],i=a;e.rootState.ui.filters.length>0&&(i=a.filter((t=>{if(!t.stat.isFile())return!0;let a=!1;return e.rootState.ui.filters.forEach((e=>{e(t)&&(a=!0)})),a}))),i.forEach((e=>{let a=e.filename;if(a.startsWith(".DS_Store"))return;const i=fs.statSync(t+e.filename);if(i.isFile()&&"_db.json"!==a){let a=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromFile(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(t+e.filename));n.push(a)}else if(i.isDirectory()&&o.showSubFolders){if("_assets"===e.filename)return;let a=_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_3__.Z.getSubFolderFromFolder(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(t+e.filename));s.push(a)}})),e.commit("content/updateContents",n,{root:!0}),e.commit("subFolder/setCurrentSubFolders",s,{root:!0});let r=window.libDb.scanLib(t);r.length>0&&window.app.$message.success({content:"扫描到此文件夹及子文件夹新增了 "+r.length+" 个文件或文件夹。已为您标记为New，并更新到资源库中。"})}}};__webpack_exports__["Z"]=group},631:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_pathTools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8267),_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9300);const fs=eval("require")("fs"),subFolder={namespaced:!0,state:()=>({subFolders:[],myAllFolders:[],myAllFoldersFlat:[],myAllFoldersTreeData:[]}),mutations:{updateSubFolderWithUuid(e,t){e.subFolders.forEach((e=>{e.meta.uuid===t.uuid&&(e.name=t.meta.name,e.meta=t.meta)}))},setCurrentSubFolders(e,t){e.subFolders=t},setMyAllFolders(e,t){e.myAllFolders=t.subFolders},assignSubFolderMeta(e,t){let a=null;e.subFolders=e.subFolders.map((e=>(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath(e.baseInfo.relativePath+e.baseInfo.filename)===t.relative_path_full&&(e=_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_1__.Z.getSubFolderFromFolder(t.relative_path_full),a=e),e))),a||(e.subFolders=e.subFolders.unshift(_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_1__.Z.getSubFolderFromFolder(t.relative_path_full)))}},getters:{getCurrentSubFolders(e){return e.subFolders},getMyAllFoldersTreeData(e){return e}},actions:{updateTreeData(e){let t=[],a=[];const o=e.rootState.config.storePath;function n(e,a){a.subFolders=[];let s=fs.readdirSync(e).filter((t=>fs.statSync(e+"/"+t).isDirectory()&&!t.startsWith(".DS")));return s.forEach((s=>{if("_assets"===s)return;let i={};i.path=(e+"/"+s).replace("//","/"),i.relativePath=i.path.replace(o,""),i.dirname=s,i.title=s,i.key=i.relativePath,i.parentDir=a.relativePath,i.children=i.subFolders=n(i.path,i),i.contentCount=fs.readdirSync(i.path).length>0?fs.readdirSync(i.path).length:0,a.subFolders.push(i),t.push(i)})),a.subFolders}a.path=o,a.relativePath="/",a.dirname=o.substr(o.replace("\\","/").lastIndexOf("/")),a.subFolders=n(a.path,a),t.push(a),e.commit("setMyAllFolders",a)}}};__webpack_exports__["Z"]=subFolder},5451:function(e,t){"use strict";const a=[{ext:"jpg,jpeg,png,bmp,svg",alias:"图片",name:"img"},{ext:"rp",alias:"原型",name:"prototype"},{ext:"js,php",alias:"代码",name:"code"},{ext:"doc,docx,ppt,pptx,xls,xlsx,pdf",alias:"文档",name:"doc"},{ext:"mp4,avi,rmvb,mpg,m4v",alias:"视频",name:"video"},{ext:"url",alias:"网页",name:"url"},{ext:"",alias:"文件夹",name:"folder"}],o=["img","video","url"],n={contentTypeMap:a,canOpenInside:o,extCanOpenInside(e){const t=n.getContentTypeNameFromExt(e);return o.indexOf(t)>-1},getExtNoDotFromFilename(e){return e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1):""},getContentTypeFromExt(e){let t=e.replaceAll(".","");const o=a.filter((e=>{const a=e.ext.split(",");if(a.indexOf(t)>-1)return!0}));return o.length>0?o[0]:{ext:".other",alias:"其他",name:"other"}},getContentTypeAliasFromExt(e){return n.getContentTypeFromExt(e).alias},getContentTypeNameFromExt(e){return n.getContentTypeFromExt(e).name},getContentTypeFromFilename(e){return n.getContentTypeFromExt(n.getExtNoDotFromFilename(e))},getContentTypeDefine(e){let t=a.map((t=>{if(t.name===e)return t}));return t.length>0?t[0]:{ext:"",alias:"其他",name:"other"}}};t["Z"]=n},8938:function(__unused_webpack_module,__webpack_exports__){"use strict";const low=eval("require")("lowdb"),FileSync=eval("require")("lowdb/adapters/FileSync");let dbInstance=null,configDb={dbInstance:null,userDataPath:"",storePath:"",init(e){configDb.userDataPath=e;const t=new FileSync(configDb.userDataPath+"/configDb.json"),a=low(t);configDb.dbInstance=a,dbInstance=a,dbInstance.defaults({config:{storePath:configDb.userDataPath+"/收藏夹.lab"}}).write(),configDb.storePath=dbInstance.get("config.storePath").value()},getStorePath(){return configDb.storePath},setStorePath(e){dbInstance.set("config.storePath",e).write()}};__webpack_exports__["Z"]=configDb},1960:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_pathTools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8267),uuid__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(536),_utils_fileHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6649),_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5451);const low=eval("require")("lowdb"),FileSync=eval("require")("lowdb/adapters/FileSync"),fs=eval("require")("fs");let db=null,libDb={dbInstance:null,libPath:"",assetsPath:"_assets",getAssetsRelativePath(){return libDb.assetsPath},getAssetsPath(){let e=libDb.libPath+"/"+libDb.assetsPath;return fs.existsSync(e)||fs.mkdirSync(e),e.replaceAll("//","/")},updateMeta(e,t){libDb.reload(),db.get("content_meta").find({uuid:e}).assign(t).write()},init(e){libDb.libPath=e;const t=new FileSync(libDb.libPath+"/_db.json"),a=low(t);libDb.dbInstance=a,libDb.dbInstance.defaults({content_meta:[]}).write(),db=libDb.dbInstance,libDb.repairDb()},repairDb(){db.get("content_meta").remove({name:""}).write(),db.set("content_meta",db.get("content_meta").uniqBy("relative_path_full").value()).write()},getMeta(e){libDb.reload();let t=db.get("content_meta").find({relative_path_full:_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath(e)}).value();return t||(t={}),t},getMetaFromUuid(e){libDb.reload();let t=db.get("content_meta").find({uuid:e}).value();return t||null},reload(){libDb.init(libDb.libPath)},addMeta(e,t,a){let o=Object.assign({folder:e,folder_uuid:"",uuid:(0,uuid__WEBPACK_IMPORTED_MODULE_3__.Z)(),relative_path:_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath(e),relative_path_full:_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath(e+"/"+t),base_info:{update_time:Date.now()}},a);return db.get("content_meta").push(o).write(),console.log("return last =",o),o},addUrl(e,t,a,o,n,s){const i=".url",r=(0,uuid__WEBPACK_IMPORTED_MODULE_3__.Z)();let l={type:"url",remark:s,name:t,uuid:r,href:a,new:!0,ext_data:{favicon:n}},u=`\n[DEFAULT]\n[InternetShortcut]\nURL=${a}\n`;return fs.cpSync(o.replace("file://",""),libDb.getAssetsPath()+"/"+r+".jpg"),l.cover="/"+libDb.getAssetsRelativePath()+"/"+r+".jpg",fs.writeFileSync((window.configDb.getStorePath()+"/"+e+"/"+t+i).replaceAll("//","/"),u,"utf-8"),libDb.addMeta(e,t+i,l)},addImgMetaFromFile(e){return libDb.addCommonMetaInfo(e)},addVideoMetaFromFile(e){return libDb.addCommonMetaInfo(e)},removeMeta(e){libDb.reload(),console.log("delete",e),db.get("content_meta").remove({relative_path_full:e}).write()},addCommonMetaInfo(e,t){const a=(0,uuid__WEBPACK_IMPORTED_MODULE_3__.Z)();let o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.getFolderFromRelativeFullPath(e),n=e.substr(e.lastIndexOf("/")+1),s=e.substr(e.lastIndexOf("/")).substr(0,e.lastIndexOf(".")).replaceAll("/","");return t=Object.assign({type:_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_2__.Z.getContentTypeFromFilename(n).name,remark:"",name:s,uuid:a,href:"",new:!0,ext_data:{},base_info:{update_time:Date.now()}},t),libDb.addMeta(o,n,t)},addUrlMetaInfo(e){try{let t=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.getAllFromRelativeFullPath(e),a="[a-zA-z]+://[^\\s]*",o=String(fs.readFileSync(t.storeFullPath)),n=o.match(a);n.length>0&&(n=n[0]),console.log("match url=",o.match(a));let s={type:"url",remark:"",name:t.filename,href:n,new:!0,ext_data:{favicon:""},cover:""};return libDb.addCommonMetaInfo(e,s)}catch(t){console.warn(t)}},addFolderMetaInfo(e){let t={name:e.substr(e.lastIndexOf("/")+1)};return libDb.addCommonMetaInfo(e,t)},scanLib(e=libDb.libPath){let t=[];return libDb.reload(),_utils_fileHelper__WEBPACK_IMPORTED_MODULE_1__.Z.getFileTree(e,{showFile:!1,filters:[".DS_Store","_assets","_db.json"],mapCallback:(e,a)=>{let o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath((e+"/"+a).replace(libDb.libPath,"")),n=libDb.getMeta(o);if(!n.name){t.push(o);let e=_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_2__.Z.getContentTypeFromFilename(o),a={};switch(e.name){case"img":a=libDb.addImgMetaFromFile(o);break;case"folder":a=libDb.addFolderMetaInfo(o);break;case"video":a=libDb.addVideoMetaFromFile(o);break;case"prototype":a=libDb.addCommonMetaInfo(o);break;case"url":a=libDb.addUrlMetaInfo(o);break;default:a=libDb.addCommonMetaInfo(o);break}"folder"===a.type?window.app.$store.commit("subFolder/assignSubFolderMeta",a):window.app.$store.commit("content/assignContentMeta",a)}}}),t},setNotNew(e){db.get("content_meta").find({uuid:e}).assign({new:!1}).write()},renameMetaFolder(e,t){db.get("content_meta").forEach((a=>{_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(a.relative_path_full).startsWith(e)&&(a.folder=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.removeLastSlash(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(a.folder).replace(e,t)),a.relative_path=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.removeLastSlash(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(a.relative_path).replace(e,t)),a.relative_path_full=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.removeLastSlash(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(a.relative_path_full).replace(e,t)))})).write()},setRecentContents(e){this.reload(),db.set("recent_contents",e).write()},getRecentContents(){return this.reload(),db.get("recent_contents").value()}};__webpack_exports__["Z"]=libDb},6649:function(__unused_webpack_module,__webpack_exports__){"use strict";const fileHelper={getFileTree(dir,options){options=Object.assign({showFile:!0,gotFlat:!0,filters:["node_modules"],mapCallback:null},options);let path=eval("require")("path"),fs=eval("require")("fs");var tree=[];let flat=[];var mapDeep={};function readDirs(e){var t={path:e,title:path.basename(e),type:"dir"},a=fs.readdirSync(e);return t.children=a.map((function(t){if(options.filters.indexOf(t)>-1)return;options.mapCallback&&options.mapCallback(e,t);var a=path.join(e,t),o=fs.statSync(a);if(o.isDirectory())return readDirs(a,t,t);let n={path:a,name:t,type:"file"};return options.gotFlat?(flat.push(n),!options.showFile&&n):void 0})),flat.push({path:t.path,title:t.title,type:t.type}),t}mapDeep[dir]=0,tree.push(readDirs(dir,dir));let result={tree:tree};return options.gotFlat&&(result["flat"]=flat),result}};__webpack_exports__["Z"]=fileHelper},3391:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_pathTools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8267),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4117);const electron=eval("require")("electron"),shell=eval("require")("electron").shell,ipcSender=electron.ipcRenderer,fs=eval("require")("fs"),path=eval("require")("path"),ipc={openExternal(e){ipcSender.send("openExternal",{fullPath:e})},openDir(e){ipcSender.send("openDir",{dir:e})},showItemInFolder(e){ipcSender.send("showItemInFolder",{fullPath:e})},handleFileAssign(e,t){ipcSender.send("handleFileAssign",{type:e,args:{filePath:t.filePath}})},setWallPaper(e){ipcSender.send("setWallPaper",{wallPaper:e})},trashItem(e){let t=e;"win32"===process.platform&&(t=t.replaceAll("/","\\")),shell.trashItem(t).then((()=>{_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.removeContent(e)}))},trashFolder(e){return e},createDir(e,t,a){if(!t)return void a.error("必须输入文件夹名称。");if(t=t.replaceAll("/","").replaceAll("\\",""),""===t)return void a.error("不可输入不规范字符作为文件夹名称，请重新输入。");let o=path.join(e,t).replaceAll("\\","/");fs.existsSync(o)?a.error("已存在同名文件夹，创建失败，"):(fs.mkdirSync(o),fs.existsSync(o)&&(window.libDb.addFolderMetaInfo(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.getRelativeFullPathFromFullPath(o)),window.app.$store.dispatch("subFolder/updateTreeData"),window.app.$store.dispatch("ui/reload"),a.success("创建文件夹"+t+"成功。"))),ipc.once("createDirResult",((e,t)=>{"true"===t.result?(a.success("创建文件夹成功。"),window.app.$store.dispatch("subFolder/updateTreeData")):a.error("创建文件夹失败，"+t.message)}))},renameFolder(e,t){const a=e.substr(0,e.lastIndexOf("/")),o=path.join(window.$defaultStrorePath,e),n=path.join(window.$defaultStrorePath,a,t);fs.existsSync(n)?window.app.$message.error("已经存在同名文件夹，重命名失败。"):(fs.renameSync(o,n),window.libDb.renameMetaFolder(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(e),_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(path.join(a,t))),fs.existsSync(n)?(window.app.$message.success("重命名成功。"),window.app.$store.dispatch("subFolder/updateTreeData"),window.app.$store.dispatch("ui/reload")):window.app.$message.error("重命名失败。"))},fetchAllPwds(){return ipcSender.invoke("credentialStoreGetCredentials")},bindAddPageInfoListener(e,t){ipcSender.on("gotAddPageInfo",((t,a)=>{e(a)})),ipcSender.on("gotHdCaptureData",((e,a)=>{t(a)}))},getAddPageInfo(){ipcSender.send("getAddPageInfo")},noticeAddPageReady(){ipcSender.send("addPageReady")},hideFavPop(){ipcSender.send("hideFavPop")},addTab(e){ipcSender.send("addTab",{url:e})},once(e,t){ipcSender.once(e,t)}};ipcSender.on("error",((e,t)=>{window.app.$message.error(t.message)})),ipcSender.on("success",((e,t)=>{window.app.$message.success(t.message)})),__webpack_exports__["Z"]=ipc},4117:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5451),_utils_tools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7214),_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8267),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1960),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2744);const fs=eval("require")("fs"),sizeOf=eval("require")("image-size"),contentModel={addLink(e,t,a,o,n,s){return window.libDb.addUrl(e,t,a,o,n,s)},getMetaFromFile(e){return e=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(e),window.libDb.getMeta(e)},getContentFromFile(e){let t=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFullPathFromRelativeFullPath(e),a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFilenameFromRelativeFullPath(e),o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonDir(e.substr(0,e.lastIndexOf("/"))),n=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativeDir(o.replace(window.$defaultStrorePath,"")),s=fs.statSync(t);const i=a.substr(a.lastIndexOf(".")),r=_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_0__.Z.getContentTypeNameFromExt(i);let l={extCanOpenInside:_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_0__.Z.extCanOpenInside(i),name:a.substr(0,a.lastIndexOf(".")),type:r,ext:i,extData:{},baseInfo:{path:o,relativePath:n,filename:a,createTime:s.birthtimeMs,addTime:s.ctimeMs,modifyTime:s.mtimeMs,size:s.size,sizeText:_utils_tools__WEBPACK_IMPORTED_MODULE_1__.Z.convertToText(s.size)},href:""},u=contentModel.getMetaFromFile(e);return l=contentModel.mergeContentAndMeta(l,u),l},getContentFromUuid(e){_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.reload();let t=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.getMetaFromUuid(e),a=contentModel.getContentFromFile(t.relative_path_full);return a},mergeContentAndMeta(e,t){if("img"===e.type){let t=sizeOf(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(e.baseInfo.relativePath+e.baseInfo.filename));e.cover=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(e.baseInfo.relativePath+e.baseInfo.filename),e.extData.width=t.width,e.extData.height=t.height}else"url"===e.type&&(e.cover=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(t.cover));return e.extData=Object.assign(e.extData,e.ext_data),e.meta=t,e},removeContent(e,t=!0){let a=e;t&&(a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(e)),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.removeMeta(a)},rename(e,t){try{var a=window.libDb.getMetaFromUuid(e);if(!a)return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("内容不存在。");let o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.filterFilename(t).filename,n=o+"."+_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_0__.Z.getExtNoDotFromFilename(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFilenameFromRelativeFullPath(a.relative_path_full)),s=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(a.relative_path)+n;return fs.existsSync(s)?_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("已存在同名内容。"):(fs.renameSync(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFullPathFromRelativeFullPath(a.relative_path_full),s),a.base_info?a.base_info.update_time=Date.now():a.base_info={update_time:Date.now()},a.name=o,a.relative_path_full=a.relative_path+n,_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.updateMeta(e,{name:a.name,relative_path_full:a.relative_path_full,base_info:a.base_info}),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("修改成功。",a))}catch(o){return console.warn(o),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("意外错误")}},update(e,t){try{let a=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.getMetaFromUuid(e);return a=Object.assign(a,t),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.updateMeta(e,a),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("修改成功。",a)}catch(a){return console.warn(a),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("意外错误")}},move(e,t,a=!1){let o=fs.existsSync(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(t));if(console.log("exists=",o,_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(t)),o&&!a)return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("文件存在");let n=contentModel.getContentFromUuid(e),s=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(n.meta.relative_path_full),i=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(t);try{o&&fs.unlinkSync(i.storeFullPath),fs.renameSync(s.storeFullPath,i.storeFullPath)}catch(r){return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("复制失败")}return o&&(console.log("尝试移除meta=",i.relativeFullPath),contentModel.removeContent(i.relativeFullPath)),contentModel.update(e,{relative_path:i.relativeFolder,relative_path_full:i.relativeFullPath}),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("移动成功",e)}};__webpack_exports__["Z"]=contentModel},8030:function(__unused_webpack_module,__webpack_exports__){"use strict";const electron=eval("require")("electron"),ipc=electron.ipcRenderer,fileModel={saveAs(e,t){ipc.send("exportFile",{path:e,parentPath:t})}};__webpack_exports__["Z"]=fileModel},9300:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7214),_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8267),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1960),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2744);const fs=eval("require")("fs"),contentModel={addLink(e,t,a,o,n,s){return window.libDb.addUrl(e,t,a,o,n,s)},getMetaFromFile(e){return e=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.convertToCommonRelativePath(e),window.libDb.getMeta(e)},getSubFolderFromFolder(e){let t=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getFullPathFromRelativeFullPath(e),a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getFilenameFromRelativeFullPath(e),o=fs.statSync(t),n=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.convertToCommonDir(e.substr(0,e.lastIndexOf("/"))),s=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.convertToCommonRelativeDir(n.replace(window.$defaultStrorePath,"")),i=window.libDb.getMeta(_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getRelativeFullPathFromFullPath(n+a)),r={name:a,contentsCount:fs.readdirSync(t).length,cover:"./img/folder.svg",meta:i,baseInfo:{path:n,relativePath:s,filename:a,createTime:o.birthtimeMs,addTime:o.ctimeMs,modifyTime:o.mtimeMs,size:o.size,sizeText:_utils_tools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToText(o.size)}};return r},removeContent(e,t=!0){let a=e;t&&(a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getRelativeFullPathFromFullPath(e)),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_2__.Z.removeMeta(a)},rename(e,t){try{var a=window.libDb.getMetaFromUuid(e);if(!a)return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__.Z.failure("文件夹不存在。");let o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.filterFilename(t).filename,n=o,s=_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getStorePathFromRelativePath(a.relative_path)+n;return fs.existsSync(s)?_utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__.Z.failure("已存在同名内容。"):(fs.renameSync(_utils_pathTools__WEBPACK_IMPORTED_MODULE_1__.Z.getFullPathFromRelativeFullPath(a.relative_path_full),s),a.base_info?a.base_info.update_time=Date.now():a.base_info={update_time:Date.now()},a.name=o,a.relative_path_full=a.relative_path+n,_utils_db_libDb__WEBPACK_IMPORTED_MODULE_2__.Z.updateMeta(e,{name:a.name,relative_path_full:a.relative_path_full,base_info:a.base_info}),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__.Z.success("修改成功。",a))}catch(o){return console.warn(o),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__.Z.failure("意外错误")}},update(e,t){try{let a=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_2__.Z.getMetaFromUuid(e);return a=Object.assign(a,t),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_2__.Z.updateMeta(e,a),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__.Z.success("修改成功。",a)}catch(a){return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_3__.Z.failure("意外错误")}}};__webpack_exports__["Z"]=contentModel},8267:function(e,t,a){"use strict";var o=a(8938),n=a(5451);const s={convertToCommonFilePath(e,t=!0){return!e.startsWith("file://")&&t&&(e="file://"+e),e=s.replaceSlash(e),e},convertToCommonDir(e){return e=s.replaceSlash(window.$defaultStrorePath+e),e.endsWith("/")||(e+="/"),e},convertToCommonRelativePath(e){return e=s.replaceSlash(e),e.startsWith("/")||(e="/"+e),e.replaceAll("//","/"),e},convertToCommonRelativeDir(e){return e=s.convertToCommonRelativePath(e).replaceAll("//","/"),e.endsWith("/")||(e+="/"),e},replaceSlash(e){return e.replaceAll("\\","/").replaceAll("//","/")},getFolderFromRelativeFullPath(e){return e.substr(0,e.lastIndexOf("/"))},getFilenameFromRelativeFullPath(e){return e.substr(e.lastIndexOf("/")+1)},getNameFromRelativeFullPath(e){let t=e.substr(e.lastIndexOf("/"));return t.substr(0,t.lastIndexOf(".")).replaceAll("/","")},getRelativeFullPathFromFullPath(e){return s.convertToCommonRelativePath(e.replace(window.$defaultStrorePath,""))},getFullPathFromRelativeFullPath(e){return(window.$defaultStrorePath+e).replaceAll("//","/")},removeLastSlash(e){return e.endsWith("/")&&(e=e.substr(0,e.length-1)),e},filterFilename(e,t=" "){const a=["/","\\","|","?",'"',"*",":","<",">","\n"];let o=[];return a.forEach((a=>{e.indexOf(a)>-1&&o.push(a),e=e.replaceAll(a,t)})),{filename:e,hadMapped:o}},getStorePathFromRelativePath(e,t=!1){return s.convertToCommonFilePath(o.Z.getStorePath()+"/"+e,t)},getAllFromRelativeFullPath(e){let t=s.getNameFromRelativeFullPath(e),a=s.getFilenameFromRelativeFullPath(e),o=s.convertToCommonRelativePath(s.getFolderFromRelativeFullPath(e)),i=s.getStorePathFromRelativePath(e,!1),r=s.getStorePathFromRelativePath(e,!0),l=n.Z.getExtNoDotFromFilename(a),u="."+l,_={name:t,filename:a,relativeFolder:o,storeFullPath:i,storeFullPathProtocol:r,relativeFullPath:e,extNoDot:l,ext:u};return _},getFolderAllFromRelativeFullPath(e){let t=s.getNameFromRelativeFullPath(e),a=s.convertToCommonRelativePath(s.getFolderFromRelativeFullPath(e)),o=s.getStorePathFromRelativePath(e,!1),n=s.getStorePathFromRelativePath(e,!0),i={name:t,relativeFolder:a,storeFullPath:o,storeFullPathProtocol:n,relativeFullPath:e};return i}};t["Z"]=s},2744:function(e,t){"use strict";const a={successCode:1,failureCode:0,standardReturn(e,t,a={}){return{status:e,info:t,data:a}},success(e,t={}){return a.standardReturn(a.successCode,e,t)},failure(e,t={}){return a.standardReturn(a.failureCode,e,t)}};t["Z"]=a},7214:function(e,t){"use strict";const a={getAppProtocolUrl(e,t){return`tsb://app/redirect/?package=${e}&url=${t}`},getComProtocolUrl(e){return a.getAppProtocolUrl("com.thisky.com",e)},getWindowArgs:e=>(e.globalArgs={},process.argv.forEach((function(t){if(t.startsWith("--")){var a=t.split("=")[0].replace("--",""),o=t.split("=")[1];e.globalArgs[a]=o}})),"MacIntel"===navigator.platform?e.platformType="mac":"Win32"===navigator.platform?e.platformType="windows":e.platformType="linux",e),getDomain:function(e){let t=e;return t.startsWith("www.")&&(t=t.slice(4)),t},getRootDomain:function(e){let t=a.getDomainFromUrl(e),o=t.split(".");return o[o.length-2]+"."+o[o.length-1]},getDomainFromUrl(e){let t=e.split("/");return t=t[2]?t[2]:"",t=a.getDomain(t),t},htmlEncode(e){var t=document.createElement("span");return t.appendChild(document.createTextNode(e)),t.innerHTML},htmlDecode(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent},convertToText(e){let t=(e/1024/1024).toFixed(2);return t<1?(e/1024).toFixed(1)+"KB":t>1024?(e/1024/1024/1024).toFixed(2)+"GB":t+"MB"}};t["Z"]=a},5893:function(){}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,a,o,n){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],n=e[u][2];for(var i=!0,r=0;r<a.length;r++)(!1&n||s>=n)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](a[r])}))?a.splice(r--,1):(i=!1,n<s&&(s=n));if(i){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,o,n]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,n,s=a[0],i=a[1],r=a[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)__webpack_require__.o(i,o)&&(__webpack_require__.m[o]=i[o]);if(r)var u=r(__webpack_require__)}for(t&&t(a);l<s.length;l++)n=s[l],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(u)},a=self["webpackChunkfav"]=self["webpackChunkfav"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(107)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.b612d005.js.map