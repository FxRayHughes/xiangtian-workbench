(function(){var __webpack_modules__={6700:function(e,t,a){var o={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":3766,"./is.js":3766,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":3902,"./ms-my.js":3902,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=r,e.exports=s,s.id=6700},6461:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var vuex__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(65),_components_content_type_TypePwd__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6697),_components_content_type_TypeImg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4032),ant_design_vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3330),_utils_ipc__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3391),_components_content_type_TypeOther__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4249),_components_content_type_TypeVideo__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8110),_components_content_type_TypeUrl__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1098),vue3_selecto__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8976),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4117);const wallpaper=eval("require")("wallpaper");__webpack_exports__["Z"]={name:"ContentItemList",components:{TypePwd:_components_content_type_TypePwd__WEBPACK_IMPORTED_MODULE_0__.Z,TypeImg:_components_content_type_TypeImg__WEBPACK_IMPORTED_MODULE_1__.Z,TypeOther:_components_content_type_TypeOther__WEBPACK_IMPORTED_MODULE_3__.Z,TypeVideo:_components_content_type_TypeVideo__WEBPACK_IMPORTED_MODULE_4__.Z,TypeUrl:_components_content_type_TypeUrl__WEBPACK_IMPORTED_MODULE_5__.Z,VueSelecto:vue3_selecto__WEBPACK_IMPORTED_MODULE_7__.y},props:{},data(){return{selectedKey:null,dragging:!1,left:0,top:0,timer:null}},mounted(){},methods:{setDeskWallpaper(e){this.$message.success("设置为桌面壁纸成功。"),wallpaper.set(e)},onDragOver(){},async onDragStart(e,t){if(this.$store.state.ui.selectedItems.length<=1)return void this.selectItem(t);this.dragging=!0;let a=document.getElementById("selectedItemsCover");e.dataTransfer.setDragImage(document.getElementById("selectedItemsCover"),a.offsetWidth/2,a.offsetHeight/2)},onDragEnd(){this.dragging=!1},onSelect(e){if(e.added.forEach((e=>{e.classList.add("selected")})),e.removed.forEach((e=>{e.classList.remove("selected")})),1===e.selected.length)return void this.$store.commit("ui/focusItem",{type:"content",data:_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_6__.Z.getContentFromUuid(e.selected[0].attributes["uuid"].value)});let t=[];e.selected.forEach((e=>{t.push(e.attributes["uuid"].value)})),this.$store.commit("ui/setSelectedItemsByUuids",t)},...(0,vuex__WEBPACK_IMPORTED_MODULE_8__.OI)({unshiftRecent:"content/unshiftRecent"}),open(e){"url"===e.type?_utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.addTab(e.meta.href):_utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.openExternal(e.baseInfo.path+e.baseInfo.filename),this.unshiftRecent(e.meta.uuid)},showItemInFolder:_utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.showItemInFolder,selectItem(e){this.$store.commit("ui/focusItem",{type:"content",data:e}),this.$store.commit("ui/setSelectedItemsByUuids",[e.meta.uuid])},openPath(e){if("url"===e.type)_utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.addTab(e.meta.href);else if(".pdf"===e.ext){let t="file://"+window.globalArgs["app-path"]+"/pages/pdfViewer/index.html",a="?url="+encodeURI(e.baseInfo.path+"/"+e.baseInfo.filename);_utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.addTab(t+a)}else _utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.openExternal(e.baseInfo.path+"/"+e.baseInfo.filename);this.unshiftRecent(e.meta.uuid)},openDetail(e){if("img"===e.type)this.$router.push({path:"/main/img/"+encodeURIComponent(e.baseInfo.path+"/"+e.baseInfo.filename)});else{if("url"!==e.type)return;_utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.addTab(e.meta.href)}this.unshiftRecent(e.meta.uuid)},trashItem(e){ant_design_vue__WEBPACK_IMPORTED_MODULE_9__.Z.confirm({title:"删除确认",content:"是否确认删除内容？此操作会删除内容的其他信息，此操作无法恢复。",okText:"确认",cancelText:"取消",onOk:()=>{_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_6__.Z.removeContent(e),window.app.$store.dispatch("subFolder/updateTreeData"),window.app.$store.dispatch("ui/reload"),this.$message.success("删除内容成功。")}})},setNewTabWallPaper(e){_utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.setWallPaper(e),this.$message.success("设置为新标签页桌面默认壁纸成功，如果当前桌面单独设置了壁纸，则仍然以原壁纸显示。未设置单独壁纸的桌面将以新壁纸显示。")},editPicture(e){_utils_ipc__WEBPACK_IMPORTED_MODULE_2__.Z.handleFileAssign("image",{filePath:"file://"+e})}},computed:{...(0,vuex__WEBPACK_IMPORTED_MODULE_8__.rn)({subFolders:e=>e.subFolder.subFolders,itemSize:e=>e.ui.itemSize,contents:e=>e.content.contents,focusItem:e=>e.ui.focusedItem,selectedItems:e=>e.ui.selectedItems}),...(0,vuex__WEBPACK_IMPORTED_MODULE_8__.Se)("content",["contentsOrderByConfig"])}}},6196:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _components_util_PromptModal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7396),vuex__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(65),_utils_ipc__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3391),ant_design_vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3330),_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8267),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4117),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2744),_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300);const fs=eval("require")("fs");__webpack_exports__["Z"]={name:"SubFolderHandler",props:{msg:String},components:{PromptModal:_components_util_PromptModal__WEBPACK_IMPORTED_MODULE_0__.Z},data(){return{askModelVisible:!1,waitingMoveList:[],movedContentCount:0,failureContentCount:0,askingContent:{},targetFolder:null,onStop:()=>{},promptRenameVisible:!1,renameFolderName:""}},computed:{...(0,vuex__WEBPACK_IMPORTED_MODULE_6__.rn)({focusItem:e=>e.ui.focusedItem})},methods:{handleRenameFolder(e){_utils_ipc__WEBPACK_IMPORTED_MODULE_1__.Z.renameFolder(this.selectedDir,e.input.input.value),e.input.setValue(""),this.promptRenameVisible=!1},renameFolder(e,t){this.selectedDir="/"+e,this.renameFolderName=t,this.promptRenameVisible=!0},moveNextContent(){let e=this.targetFolder;if(this.waitingMoveList.length<=0)return this.$message.success(`成功移动 ${this.movedContentCount} 个文件到文件夹内`),void(e.hover=!1);let t=this.waitingMoveList.shift(),a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(t.meta.relative_path_full),o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(e.meta.relative_path_full);if(fs.existsSync(o.storeFullPath+"/"+a.filename))return this.askingContent=t,this.askingContent.filename=a.filename,void(this.askModelVisible=!0);this.moveContent(t)},startMoveContents(e,t,a){0!==e.length&&(void 0!==a&&(this.onStop=a),this.waitingMoveList=e,this.targetFolder=t,this.movedContentCount=0,this.failureContentCount=0,this.moveNextContent(t))},stopMove(){this.askModelVisible=!1,this.onStop()},copyContent(e,t=!0){let a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(e.meta.relative_path_full),o=this.targetFolder.meta.relative_path_full+"/"+a.name+a.ext,s=o,r=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(s),n=1;while(fs.existsSync(r))s=this.targetFolder.meta.relative_path_full+"/"+a.name+" 副本"+(n>1?String(n):"")+a.ext,r=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(s),n++;let i=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_3__.Z.move(e.meta.uuid,s,!1);i.status===_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.successCode?(this.movedContentCount=this.movedContentCount+1,this.$store.commit("content/removeContent",e),this.$store.commit("ui/clearFocusItem")):this.failureContentCount=this.failureContentCount+1,t&&this.moveNextContent()},moveContent(e,t=!0){let a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(e.meta.relative_path_full),o=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_3__.Z.move(e.meta.uuid,this.targetFolder.meta.relative_path_full+"/"+a.filename,!0);o.status===_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.successCode?(this.movedContentCount=this.movedContentCount+1,this.$store.commit("content/removeContent",e),this.$store.commit("ui/clearFocusItem")):this.failureContentCount=this.failureContentCount+1,t&&this.moveNextContent()},open:_utils_ipc__WEBPACK_IMPORTED_MODULE_1__.Z.openExternal,trashItem(e){ant_design_vue__WEBPACK_IMPORTED_MODULE_7__.Z.confirm({title:"删除确认",content:"是否确认删除文件夹？此操作会删除文件夹下面全部的内容。",okText:"确认",cancelText:"取消",onOk:async()=>{let t=await _utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_5__.Z.remove(e);t.isSuccess?(this.$message.success("删除成功，共计删除"+t.data.removedCount+"个文件。"),setTimeout((function(){window.app.$store.dispatch("subFolder/updateTreeData"),window.app.$store.dispatch("ui/reload")}),1e3)):this.$message.error("删除失败，失败原因："+t.info)}})}}}},5200:function(e,t,a){a(1703),function(t,a){e.exports=a()}(0,(function(){return(()=>{"use strict";var e={};(()=>{e.d=(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})}})(),(()=>{e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{e.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})();var t={};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.r(t),e.d(t,{default:()=>n});var n=function(){function e(t,o){a(this,e),this.self=o,this.accessKey=t.accessKey}return s(e,null,[{key:"config",value:function(t){if(Object.keys(e.secretInfo).length>0)return new Promise((function(t,a){window.postMessage({eventName:"checkAuth",secretInfo:e.secretInfo},"".concat(window.origin)),e.listener(t,a)}));for(var a=Object.keys(t),o=0;o<a.length;o++)e.secretInfo[a[o]]=t[a[o]]}},{key:"listener",value:function(t,a){window.addEventListener("message",(function(o){var s=o.data.eventName;switch(s){case"authResult":e.secretInfo.signature===o.data.signature?(e.sdkSwitch=o.data.sdkSwitch,t(e.sdkSwitch)):(e.sdkSwitch=!1,a({code:401,msg:"SDK接口鉴权失败"}));break}}))}},{key:"ready",value:function(t){e.config().then((function(e){t()})),window.addEventListener("message",(function(t){var a=t.data.eventName,o=t.data.args;a&&e.events.forEach((function(e){a===e.event&&e.callBack(t,o)}))}))}},{key:"error",value:function(t){e.config()["catch"]((function(e){t(e)}))}},{key:"hideApp",value:function(t){if(t&&e.sdkSwitch)window.postMessage({eventName:"hideApp"},"".concat(window.origin)),t.hasOwnProperty("success")&&t.success();else{if(!e.sdkSwitch)return void(t.hasOwnProperty("fail")&&t.fail());window.postMessage({eventName:"hideApp"},"".concat(window.origin))}}},{key:"tabLinkJump",value:function(t){var a;t&&e.sdkSwitch?(window.postMessage({eventName:"tabLinkJump",url:null!==(a=t.url)&&void 0!==a?a:""}),t.hasOwnProperty("success")&&t.success()):t.hasOwnProperty("fail")&&t.fail()}},{key:"notice",value:function(t){if(t&&e.sdkSwitch)window.postMessage({eventName:"saAppNotice",options:t}),t.hasOwnProperty("success")&&t.success();else{if(!e.sdkSwitch)return void(t.hasOwnProperty("fail")&&t.fail());window.postMessage({eventName:"saAppNotice",options:t})}}},{key:"autoLoginSysApp",value:function(t){if(t&&e.sdkSwitch)window.postMessage({eventName:"autoLoginSysApp"}),t.hasOwnProperty("success")&&t.success();else{if(!e.sdkSwitch)return void(t.hasOwnProperty("fail")&&t.fail());window.postMessage({eventName:"autoLoginSysApp"})}}},{key:"on",value:function(t,a){e.events.push({event:t,callBack:a})}}]),e}();return r(n,"events",[]),r(n,"secretInfo",{}),r(n,"sdkSwitch",!1),t})()}))},605:function(e,t,a){"use strict";var o=a(9242),s=a(1066),r=a(3396);function n(e,t,a,o,s,n){const i=(0,r.up)("router-view"),l=(0,r.up)("SubFolderHandler");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i),(0,r.Wm)(l,{ref:"subFolderHandler"},null,512)],64)}var i=a(65),l=a(7214),_=a(7139);const u=(0,r.Uk)("保留两者"),d=(0,r.Uk)("替换"),c=(0,r.Uk)("终止移动"),p=(0,r.Uk)('此文件夹已经存在名称为"'),m=(0,r.Uk)('"的内容。您要使用正在移动的内容来替换它吗？'),h=(0,r.Uk)(" 您正在重命名以下文件夹的名称 "),f={class:"pathBlock"};function g(e,t,a,o,s,n){const i=(0,r.up)("a-button"),l=(0,r.up)("a-modal"),g=(0,r.up)("PromptModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{visible:s.askModelVisible,"onUpdate:visible":t[2]||(t[2]=e=>s.askModelVisible=e),closable:!1,centered:!0},{footer:(0,r.w5)((()=>[(0,r.Wm)(i,{onClick:t[0]||(t[0]=e=>{this.askModelVisible=!1,this.copyContent(this.askingContent)})},{default:(0,r.w5)((()=>[u])),_:1}),(0,r.Wm)(i,{onClick:t[1]||(t[1]=e=>{this.askModelVisible=!1,this.moveContent(this.askingContent)})},{default:(0,r.w5)((()=>[d])),_:1}),(0,r.Wm)(i,{onClick:n.stopMove},{default:(0,r.w5)((()=>[c])),_:1},8,["onClick"])])),default:(0,r.w5)((()=>[(0,r._)("p",null,[p,(0,r._)("strong",null,(0,_.zw)(s.askingContent.filename),1),m])])),_:1},8,["visible"]),(0,r.Wm)(g,{width:400,title:"重命名文件夹",defaultValue:s.renameFolderName,visible:s.promptRenameVisible,onHandleOk:n.handleRenameFolder,onChangeVisible:t[3]||(t[3]=e=>this.promptRenameVisible=e)},{message:(0,r.w5)((()=>[h,(0,r._)("blockquote",f,(0,_.zw)(this.selectedDir),1)])),_:1},8,["defaultValue","visible","onHandleOk"])],64)}var b=a(6196),v=a(89);const w=(0,v.Z)(b.Z,[["render",g]]);var D=w,I=a(8938),P=a(1960);l.Z.getWindowArgs(window),I.Z.init(window.globalArgs["user-data-dir"]),window.configDb=I.Z;const k=I.Z.getStorePath()+"/";window.$defaultStrorePath=k,P.Z.init(k),window.libDb=P.Z;var y={name:"App",components:{SubFolderHandler:D},data(){return{isApp:window.isApp}},computed:{...(0,i.rn)({userInfo:e=>e.user.userInfo,storePath:e=>e.config.storePath})},mounted(){this.$store.commit("config/setStorePath",k)},methods:{}};const E=(0,v.Z)(y,[["render",n]]);var C=E,M=(a(2467),a(5517)),O=a(631);const F="https://s.apps.vip/",T="10001",x={namespaced:!0,state:()=>({server:{loginUrl:F+"login?response_type=code&client_id="+T+"&state=1",userSpaceUrl:F+"user"},storePath:"",isApp:!1}),mutations:{setStorePath(e,t){e.storePath=t},setIsApp(e,t){e.isApp=t}},getters:{}};var W=x,S=a(4117),R=a(8267),U=a(9300),A=a(9837);const Z={namespaced:!0,state:()=>({dividerPos:{left:240,right:240},openHistory:[],itemSize:120,filters:[],searcher:{words:"",type:"",searchRoot:!1},orders:["create_time"],config:{showSubFolders:!0},focusedItem:{type:null,data:null},selectedItems:[],currentTab:{name:"all",alias:"全部",path:""},currentFolder:{path:"",name:"我的图片"}}),mutations:{setSearcher(e,t){e.searcher=t},setSelectedItemsByUuids(e,t){let a=t.map((e=>S.Z.getContentFromUuid(e)));e.selectedItems=a},setOrders(e,t){e.orders=t},setFilter(e,t){e.filters=t},addFilter(e,t){e.filters.push(t)},pushHistory(e,t){e.openHistory.push(t)},popHistory(e){e.openHistory.pop()},clearHistory(e){e.openHistory=[]},setItemSize(e,t){e.itemSize=t},setTab(e,t){e.currentTab=t},setCurrentFolder(e,t){e.currentFolder=t,e.currentFolder.all=R.Z.getFolderAllFromRelativeFullPath(R.Z.getRelativeFullPathFromFullPath(t.path))},focusItem(e,t){t.data.meta.new&&(t.data.meta.new=!1,window.libDb.setNotNew(t.data.meta.uuid)),e.focusedItem=t},clearFocusItem(e){e.focusedItem={type:null,data:null},e.selectedItems=[]},setConfig(e,t){e.config=Object.assign(e.config,t)},setDividerPos(e,t){e.dividerPos=t}},getters:{},actions:{init(e){e.dispatch("subFolder/updateTreeData",null,{root:!0}),e.commit("setDividerPos",{left:Number(localStorage.getItem("leftWidth"))||240,right:Number(localStorage.getItem("rightWidth"))||240}),A.Z.initialize()},goBackFolder(e){if(e.state.openHistory.length<2)return;let t=e.state.openHistory[e.state.openHistory.length-2];e.commit("popHistory"),e.commit("popHistory"),e.dispatch("changeFolder",t)},reload(e,t){window.libDb.hardReload(),e.dispatch("content/loadFolderContents",e.state.currentFolder.path,{root:!0}),t&&t()},changeFolder(e,t){e.dispatch("content/loadFolderContents",t.path,{root:!0}),e.commit("setCurrentFolder",t);let a=R.Z.getRelativeFullPathFromFullPath(t.path);if("/"===a)e.commit("clearFocusItem");else{let t=U.Z.getSubFolderFromFolder(a);e.commit("focusItem",{type:"folder",data:t})}e.commit("pushHistory",t)},changeToRecent(e){e.dispatch("content/changeToRecent",void 0,{root:!0})},changeTab(e,t){if(e.commit("clearHistory"),"all"===t.name)t.alias="全部",e.commit("setFilter",[]),e.dispatch("changeFolder",{relativePath:"/",path:e.rootState.config.storePath,name:""});else if("recent"===t.name)e.commit("setFilter",[]),e.dispatch("changeToRecent");else{switch(t.name){case"bookmark":t.alias="书签";break;case"img":t.alias="图片";break;case"video":t.alias="视频";break;case"doc":t.alias="文档"}e.dispatch("changeFolder",{relativePath:"/",path:e.rootState.config.storePath,name:""})}e.commit("setTab",t)}}};var L=Z;const j={namespaced:!0,state:()=>({userInfo:{nickname:"想天浏览器",avatar:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?undefined",uid:0,spaceUrl:"https://s.apps.vip/user",userToken:"",token:"",userData:{}},folders:[]}),mutations:{setUserInfo(e,t){e.userInfo=t?{nickname:t.nickname,avatar:t.avatar,uid:t.uid,spaceUrl:"https://s.apps.vip/user",userToken:t.token,userData:t}:{nickname:"未登录",avatar:"",uid:0,spaceUrl:"",userToken:"",userData:null}}},getters:{},actions:{}};var B=j;const K={namespaced:!0,state:()=>({groups:[{icon:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?undefined",name:"想天软件",folders:[],foldersCount:4},{icon:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?undefined",name:"浏览器研发组",folders:[],foldersCount:7}]}),mutations:{saveUserInfo(e,t){e.userInfo=t?{nickname:t.nickname,avatar:t.avatar,uid:t.uid,spaceUrl:"https://s.apps.vip/user",userToken:t.token,userData:t}:{nickname:"未登录",avatar:"",uid:0,spaceUrl:"",userToken:"",userData:null}}},getters:{}};var z=K;const $=(0,i.MT)({modules:{content:M.Z,subFolder:O.Z,config:W,ui:L,user:B,group:z}});var q=$,H=a(5200),V=a.n(H);function N(e,t,a,o,s,n){const i=(0,r.up)("ContentHeader"),l=(0,r.up)("ContentList"),_=(0,r.up)("a-layout-content");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i),(0,r._)("a",{onClick:t[0]||(t[0]=t=>e.history.go(-1))}),(0,r.Wm)(_,{style:{background:"white",padding:"20px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(l)])),_:1})],64)}const Y=e=>((0,r.dD)("data-v-2cb57f48"),e=e(),(0,r.Cn)(),e),X={key:1},J={style:{display:"flex","vertical-align":"center"}},G={style:{flex:"200px","padding-right":"10px"}},Q=Y((()=>(0,r._)("div",{style:{flex:"auto"}},null,-1))),ee={style:{flex:"120px","padding-top":"7px"}},te=(0,r.Uk)(" 标题 "),ae=(0,r.Uk)(" 备注 "),oe=(0,r.Uk)(" 链接 "),se=(0,r.Uk)(" 搜索历史 "),re={key:0,style:{color:"#999","font-size":"12px","margin-left":"20px"}},ne=(0,r.Uk)(" 搜索："),ie={style:{color:"#f81f1f"}},le=Y((()=>(0,r._)("br",null,null,-1))),_e=(0,r.Uk)(" 位置： "),ue=(0,r.Uk)('"收藏夹"'),de=(0,r.Uk)("搜索子文件夹");function ce(e,t,a,s,n,i){const l=(0,r.up)("login-outlined"),u=(0,r.up)("a-tooltip"),d=(0,r.up)("a-slider"),c=(0,r.up)("a-checkbox"),p=(0,r.up)("a-menu-item"),m=(0,r.up)("a-menu"),h=(0,r.up)("search-outlined"),f=(0,r.up)("DownOutlined"),g=(0,r.up)("a-dropdown"),b=(0,r.up)("a-input"),v=(0,r.up)("a-page-header"),w=(0,r.up)("a-checkable-tag"),D=(0,r.up)("RedoOutlined"),I=(0,r.up)("a-button");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(v,{class:"content-header",backIcon:!(e.openHistory.length<=1)&&null,onBack:t[8]||(t[8]=()=>{this.$store.dispatch("ui/goBackFolder")})},{subTitle:(0,r.w5)((()=>[e.isApp&&e.currentTab.path?((0,r.wg)(),(0,r.j4)(u,{key:0,placement:"bottom",overlayStyle:{maxWidth:"1000px"}},{title:(0,r.w5)((()=>[(0,r._)("span",null,"点击打开完整路径："+(0,_.zw)(e.currentTab.path),1)])),default:(0,r.w5)((()=>[(0,r._)("span",{onClick:t[0]||(t[0]=t=>i.openDir(e.currentTab.path))},[(0,r.Uk)((0,_.zw)(e.currentTab.alias)+" ",1),(0,r.Wm)(l)])])),_:1})):((0,r.wg)(),(0,r.iD)("span",X,(0,_.zw)(e.currentTab.alias),1)),(0,r.Uk)(" "+(0,_.zw)(e.currentFolder.name),1)])),extra:(0,r.w5)((()=>[(0,r._)("div",J,[(0,r._)("div",G,[(0,r.Wm)(d,{value:i.itemSize,"onUpdate:value":t[1]||(t[1]=e=>i.itemSize=e),min:90,step:5,max:300},null,8,["value"])]),Q,(0,r._)("div",ee,[(0,r.Wm)(g,{visible:n.visibleSearchHistory,"onUpdate:visible":t[7]||(t[7]=e=>n.visibleSearchHistory=e)},{overlay:(0,r.w5)((()=>[(0,r.Wm)(m,{onClick:i.setSearchWords},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{disabled:!0},{default:(0,r.w5)((()=>[se])),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.filteredSearchHistory,(e=>((0,r.wg)(),(0,r.j4)(p,{key:e},{default:(0,r.w5)((()=>[(0,r.Uk)((0,_.zw)(e),1)])),_:2},1024)))),128))])),_:1},8,["onClick"])])),default:(0,r.w5)((()=>[(0,r.Wm)(b,{value:n.searchWords,"onUpdate:value":t[6]||(t[6]=e=>n.searchWords=e),placeholder:"搜索",style:{width:"200px"},onChange:i.onSearch,onBlur:i.addHistory},{prefix:(0,r.w5)((()=>[(0,r.Wm)(g,{visible:n.searchTypeVisible,"onUpdate:visible":t[5]||(t[5]=e=>n.searchTypeVisible=e)},{overlay:(0,r.w5)((()=>[(0,r.Wm)(m,{onClick:i.handleSearchTypeMenuClick},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{key:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{checked:n.searchType.name,"onUpdate:checked":t[2]||(t[2]=e=>n.searchType.name=e)},{default:(0,r.w5)((()=>[te])),_:1},8,["checked"])])),_:1}),(0,r.Wm)(p,{key:"remark"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{checked:n.searchType.remark,"onUpdate:checked":t[3]||(t[3]=e=>n.searchType.remark=e)},{default:(0,r.w5)((()=>[ae])),_:1},8,["checked"])])),_:1}),(0,r.Wm)(p,{key:"href"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{checked:n.searchType.href,"onUpdate:checked":t[4]||(t[4]=e=>n.searchType.href=e)},{default:(0,r.w5)((()=>[oe])),_:1},8,["checked"])])),_:1})])),_:1},8,["onClick"])])),default:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r.Wm)(h),(0,r.Wm)(f)])])),_:1},8,["visible"])])),_:1},8,["value","onChange","onBlur"])])),_:1},8,["visible"])])])])),_:1},8,["backIcon"]),""!==n.searchWords?((0,r.wg)(),(0,r.iD)("div",re,[ne,(0,r._)("strong",ie,(0,_.zw)(n.searchWords),1),le,_e,(0,r.Wm)(w,{checked:n.searchCurrent,"onUpdate:checked":t[9]||(t[9]=e=>n.searchCurrent=e)},{default:(0,r.w5)((()=>[(0,r.Uk)('"'+(0,_.zw)(""===e.folder.all.name?"收藏夹":e.folder.all.name)+'"',1)])),_:1},8,["checked"]),(0,r.wy)((0,r.Wm)(w,{checked:i.searchRoot,"onUpdate:checked":t[10]||(t[10]=e=>i.searchRoot=e)},{default:(0,r.w5)((()=>[ue])),_:1},8,["checked"]),[[o.F8,""!==e.folder.all.relativeFullPath]]),(0,r.wy)((0,r.Wm)(c,{style:{"font-size":"12px","margin-left":"10px"},checked:i.searchSubFolder,"onUpdate:checked":t[11]||(t[11]=e=>i.searchSubFolder=e)},{default:(0,r.w5)((()=>[de])),_:1},8,["checked"]),[[o.F8,!i.searchRoot]])])):(0,r.kq)("",!0),(0,r._)("div",{id:"refreshBtnWrapper",style:(0,_.j5)([{position:"fixed","text-align":"center"},{right:Number(e.dividerPos.right+20)+"px"}])},[(0,r.Wm)(I,{title:"刷新",onClick:t[12]||(t[12]=e=>i.refresh()),id:"refreshingBtn",loading:n.refreshing,type:"primary",shape:"circle",style:{"text-align":"center"}},{icon:(0,r.w5)((()=>[(0,r.Wm)(D)])),_:1},8,["loading"])],4)])}var pe=a(2876),me=a(851),he=a(5747),fe=a(3927),ge=a(3391),be={name:"ContentHeader",props:{},components:{RedoOutlined:pe.Z,LoginOutlined:me.Z,DownOutlined:he.Z,SearchOutlined:fe.Z},data(){return{searchTypeVisible:!1,searchCurrent:!0,visibleSearchHistory:!1,searchWords:"",searchHistory:[],filteredSearchHistory:[],searchType:{name:!0,remark:!0,href:!0},refreshing:!1,routes:[{path:"index",breadcrumbName:"First-level Menu"},{path:"first",breadcrumbName:"Second-level Menu"},{path:"second",breadcrumbName:"Third-level Menu"}]}},mounted(){this.$store.commit("ui/setItemSize",Number(localStorage.getItem("itemSize")));let e=localStorage.getItem("searchHistory")||"[]";this.searchHistory=JSON.parse(e),this.filteredSearchHistory=this.searchHistory.slice(0,8)},methods:{handleSearchTypeMenuClick(){},setSearchWords(e){this.searchWords=e.key,this.doSearch()},async doSearch(){this.$store.commit("ui/setSearcher",{words:this.searchWords,type:this.searchType,searchSubFolder:!0,searchRoot:!1})},async onSearch(e){let t=e.target.value;if(""===t)return this.filteredSearchHistory=this.searchHistory.slice(0,8),void this.doSearch();this.visibleSearchHistory=!0,this.filterSearchHistory(t),this.doSearch()},async filterSearchHistory(e){if(""===e)return this.filteredSearchHistory=this.searchHistory.slice(0,8);this.filteredSearchHistory=this.searchHistory.filter((t=>t.toLowerCase().indexOf(e.toLowerCase())>-1)),this.filteredSearchHistory=this.filteredSearchHistory.slice(0,8),0===this.filteredSearchHistory.length&&(this.visibleSearchHistory=!1)},addHistory(e){let t=e.target.value;if(""===t)return;let a=this.searchHistory.find((e=>e===t));a||(this.searchHistory.push(t),localStorage.setItem("searchHistory",JSON.stringify(this.searchHistory)))},refresh(){this.refreshing=!0,this.$store.dispatch("ui/reload",(()=>{this.refreshing=!1})),document.getElementById("refreshingBtn").classList.add("refreshing"),setTimeout((()=>{document.getElementById("refreshingBtn").classList.remove("refreshing")}),500)},openDir(e){ge.Z.openDir(e)},changeTab(){this.refreshing=!0,this.$store.dispatch("ui/changeTab",{name:"all"}),setTimeout((()=>this.refreshing=!1),500)}},watch:{searchCurrent(e){this.searchRoot=!e}},computed:{itemSize:{get(){return this.$store.state.ui.itemSize},set(e){this.$store.commit("ui/setItemSize",e),localStorage.setItem("itemSize",e)}},searchSubFolder:{get(){return this.$store.state.ui.searcher.searchSubFolder},set(e){this.$store.commit("ui/setSearcher",Object.assign(this.$store.state.ui.searcher,{searchSubFolder:e}))}},searchRoot:{get(){return this.$store.state.ui.searcher.searchRoot},set(e){this.$store.commit("ui/setSearcher",Object.assign(this.$store.state.ui.searcher,{searchRoot:e})),this.searchCurrent=!e}},...(0,i.rn)({isApp:e=>e.config.isApp,currentFolder:e=>e.ui.currentFolder,currentTab:e=>e.ui.currentTab,openHistory:e=>e.ui.openHistory,dividerPos:e=>e.ui.dividerPos,folder:e=>e.ui.currentFolder})}};const ve=(0,v.Z)(be,[["render",ce],["__scopeId","data-v-2cb57f48"]]);var we=ve;function De(e,t,a,o,s,n){const i=(0,r.up)("SubFolderList"),l=(0,r.up)("ContentItemList");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",null,[(0,r.Wm)(i)]),(0,r._)("div",null,[(0,r.Wm)(l)])],64)}const Ie={key:0},Pe={style:{"margin-bottom":"10px"}},ke={style:{"min-height":"150px"}},ye=["onClick","onDblclick"],Ee=["onDragenter","onDragleave","onDragover","onDrop"],Ce={key:0,class:"type-label new-label"},Me={class:"folder-name"},Oe={class:"inner-content-count"},Fe=(0,r.Uk)("打开"),Te=(0,r.Uk)("查看所在位置 "),xe=(0,r.Uk)("删除文件夹 "),We=(0,r.Uk)("保留两者"),Se=(0,r.Uk)("替换"),Re=(0,r.Uk)("终止移动"),Ue=(0,r.Uk)('此文件夹已经存在名称为"'),Ae=(0,r.Uk)('"的内容。您要使用正在移动的内容来替换它吗？');function Ze(e,t,a,s,n,i){const l=(0,r.up)("caret-down-outlined"),u=(0,r.up)("caret-right-outlined"),d=(0,r.up)("a-image"),c=(0,r.up)("a-menu-item"),p=(0,r.up)("a-menu"),m=(0,r.up)("a-dropdown"),h=(0,r.up)("a-button"),f=(0,r.up)("a-modal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.subFolders.length>0&&""===e.searcher.words?((0,r.wg)(),(0,r.iD)("div",Ie,[(0,r._)("h3",Pe,[(0,r._)("span",{style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...e)=>i.toggleShowFolderList&&i.toggleShowFolderList(...e))},[(0,r.Uk)("文件夹（"+(0,_.zw)(e.subFolders.length)+"） ",1),(0,r.wy)((0,r.Wm)(l,null,null,512),[[o.F8,n.showFolderList]]),(0,r.wy)((0,r.Wm)(u,null,null,512),[[o.F8,!n.showFolderList]])])]),(0,r.wy)((0,r._)("div",ke,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.subFolders,(t=>((0,r.wg)(),(0,r.j4)(m,{trigger:["contextmenu"],key:t},{overlay:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{key:"openPath",onClick:e=>i.open(t.baseInfo.path+t.baseInfo.filename)},{default:(0,r.w5)((()=>[Fe])),_:2},1032,["onClick"]),(0,r.Wm)(c,{key:"find",onClick:e=>i.showItemInFolder(t.baseInfo.path+"/"+t.baseInfo.filename)},{default:(0,r.w5)((()=>[Te])),_:2},1032,["onClick"]),(0,r.Wm)(c,{key:"delete",onClick:e=>i.trashItem(t.baseInfo.path+"/"+t.baseInfo.filename)},{default:(0,r.w5)((()=>[xe])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,r.w5)((()=>[(0,r._)("div",{class:"sub-folder-wrapper",onClick:e=>i.selectItem(t),onDblclick:e=>i.changePath(t.name),style:(0,_.j5)([{width:e.itemSize+"px",height:e.itemSize+50+"px"},{}])},[(0,r._)("div",{class:(0,_.C_)([{hover:t.hover},"cover-wrapper"]),onDragenter:e=>i.onDragEnter(e,t),onDragleave:e=>i.onDragLeave(e,t),onDragover:e=>i.onDragOver(e,t),onDrop:e=>i.onDrop(e,t),style:(0,_.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[(0,r._)("div",{class:"sub-folder-frame",style:(0,_.j5)({width:e.itemSize+"px",height:e.itemSize+"px"})},null,4),t.meta.new?((0,r.wg)(),(0,r.iD)("div",Ce,"New")):(0,r.kq)("",!0),(0,r.Wm)(d,{style:(0,_.j5)([{},{width:e.itemSize+"px",height:e.itemSize+"px"}]),preview:!1,class:(0,_.C_)(["sub-folder-cover",{selected:"undefined"!==typeof this.focusItem&&this.focusItem.data===t}]),src:t.cover},null,8,["style","class","src"])],46,Ee),(0,r._)("div",Me,(0,_.zw)(t.name),1),(0,r._)("div",Oe,(0,_.zw)(t.contentsCount)+" 内容",1)],44,ye)])),_:2},1024)))),128))],512),[[o.F8,n.showFolderList]])])):(0,r.kq)("",!0),(0,r.Wm)(f,{visible:n.askModelVisible,"onUpdate:visible":t[3]||(t[3]=e=>n.askModelVisible=e),closable:!1,centered:!0},{footer:(0,r.w5)((()=>[(0,r.Wm)(h,{onClick:t[1]||(t[1]=e=>{this.askModelVisible=!1,this.copyContent(this.askingContent)})},{default:(0,r.w5)((()=>[We])),_:1}),(0,r.Wm)(h,{onClick:t[2]||(t[2]=e=>{this.askModelVisible=!1,this.moveContent(this.askingContent)})},{default:(0,r.w5)((()=>[Se])),_:1}),(0,r.Wm)(h,{onClick:e.stopMove},{default:(0,r.w5)((()=>[Re])),_:1},8,["onClick"])])),default:(0,r.w5)((()=>[(0,r._)("p",null,[Ue,(0,r._)("strong",null,(0,_.zw)(n.askingContent.filename),1),Ae])])),_:1},8,["visible"])],64)}var Le=a(8355),je=a(3218),Be={name:"SubFolderList",props:{msg:String},components:{CaretDownOutlined:Le.Z,CaretRightOutlined:je.Z},data(){return{showFolderList:!0,askModelVisible:!1,waitingMoveList:[],movedContentCount:0,failureContentCount:0,askingContent:{},targetFolder:null}},computed:{...(0,i.rn)({subFolders:e=>e.subFolder.subFolders,itemSize:e=>e.ui.itemSize,focusItem:e=>e.ui.focusedItem,searcher:e=>e.ui.searcher})},methods:{onDragEnter(e,t){t.hover=!0},onDragLeave(e,t){t.hover=!1},onDragOver(e,t){t.hover||(t.hover=!0),e.preventDefault()},onDrop(e,t){window.app.$refs["subFolderHandler"].startMoveContents(this.$store.state.ui.selectedItems,t,(()=>{t.hover=!1}))},toggleShowFolderList(){this.showFolderList=!this.showFolderList},changePath(e){this.$store.dispatch("ui/changeFolder",{path:this.$store.state.ui.currentFolder.path+e+"/"})},selectItem(e){this.$store.commit("ui/focusItem",{type:"folder",data:e})},open:ge.Z.openExternal,showItemInFolder:ge.Z.showItemInFolder,trashItem(e){window.app.$refs["subFolderHandler"].trashItem(e)}}};const Ke=(0,v.Z)(Be,[["render",Ze],["__scopeId","data-v-8be12e6c"]]);var ze=Ke;const $e={class:"hello"},qe={style:{"margin-bottom":"10px","margin-top":"20px"}},He=(0,r._)("div",{style:{position:"fixed",display:"inline-block",width:"30px",height:"30px","text-align":"center"}},null,-1),Ve={id:"itemsLists",style:{"min-height":"150px"}},Ne=["uuid","onDragstart","onClick"],Ye={key:4,class:"type-label new-label"},Xe=(0,r.Uk)("打开"),Je=(0,r.Uk)("查看所在位置 "),Ge=(0,r.Uk)("删除文件 "),Qe=(0,r.Uk)("编辑图片 "),et=(0,r.Uk)("设为新标签页默认壁纸 "),tt=(0,r.Uk)("设置为桌面壁纸 ");function at(e,t,a,s,n,i){const l=(0,r.up)("a-empty"),u=(0,r.up)("TypePwd"),d=(0,r.up)("TypeImg"),c=(0,r.up)("TypeUrl"),p=(0,r.up)("TypeVideo"),m=(0,r.up)("TypeOther"),h=(0,r.up)("a-menu-item"),f=(0,r.up)("a-menu"),g=(0,r.up)("a-dropdown"),b=(0,r.up)("VueSelecto");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",$e,[(0,r._)("h3",qe,"内容（"+(0,_.zw)(e.contentsOrderByConfig.length)+"）",1),He,(0,r._)("div",Ve,[0===e.contentsOrderByConfig.length?((0,r.wg)(),(0,r.j4)(l,{key:0,style:{"margin-top":"60px"},description:""})):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.contentsOrderByConfig,(a=>((0,r.wg)(),(0,r.j4)(g,{trigger:["contextmenu"],key:a},{overlay:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,{key:"openPath",onClick:e=>i.open(a)},{default:(0,r.w5)((()=>[Xe])),_:2},1032,["onClick"]),(0,r.Wm)(h,{key:"find",onClick:e=>i.showItemInFolder(a.baseInfo.path+"/"+a.baseInfo.filename)},{default:(0,r.w5)((()=>[Je])),_:2},1032,["onClick"]),(0,r.Wm)(h,{key:"delete",onClick:e=>i.trashItem(a.baseInfo.path+"/"+a.baseInfo.filename)},{default:(0,r.w5)((()=>[Ge])),_:2},1032,["onClick"]),"img"===a.type?((0,r.wg)(),(0,r.j4)(h,{key:"edit",onClick:e=>i.editPicture(a.baseInfo.path+"/"+a.baseInfo.filename)},{default:(0,r.w5)((()=>[Qe])),_:2},1032,["onClick"])):(0,r.kq)("",!0),"img"===a.type?((0,r.wg)(),(0,r.j4)(h,{key:"setWallpaper",onClick:e=>i.setNewTabWallPaper(a.baseInfo.path+"/"+a.baseInfo.filename)},{default:(0,r.w5)((()=>[et])),_:2},1032,["onClick"])):(0,r.kq)("",!0),"img"===a.type?((0,r.wg)(),(0,r.j4)(h,{key:"setDesktopWallPaper",onClick:e=>i.setDeskWallpaper(a.baseInfo.path+"/"+a.baseInfo.filename)},{default:(0,r.w5)((()=>[tt])),_:2},1032,["onClick"])):(0,r.kq)("",!0)])),_:2},1024)])),default:(0,r.w5)((()=>[(0,r._)("div",{class:(0,_.C_)(["content-wrapper",{selected:!!this.focusItem.data&&this.focusItem.data.meta.uuid===a.meta.uuid}]),onMousedown:t[0]||(t[0]=(0,o.iM)((()=>{}),["stop"])),onMouseup:t[1]||(t[1]=e=>n.dragging=!1),uuid:a.meta.uuid,draggable:"true",onDragstart:e=>i.onDragStart(e,a),onDragend:t[2]||(t[2]=(...e)=>i.onDragEnd&&i.onDragEnd(...e)),onDragover:t[3]||(t[3]=(...e)=>i.onDragOver&&i.onDragOver(...e)),onClick:e=>n.selectedKey=a,style:(0,_.j5)({width:e.itemSize+"px",height:e.itemSize+50+"px"})},[a.extCanOpenInside?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},["pwd"===a.type?((0,r.wg)(),(0,r.j4)(u,{key:0,onSetSelected:e=>i.selectItem(a),onOpenDetail:i.openDetail,content:a},null,8,["onSetSelected","onOpenDetail","content"])):(0,r.kq)("",!0),"img"===a.type?((0,r.wg)(),(0,r.j4)(d,{key:1,onSetSelected:e=>i.selectItem(a),onOpenDetail:i.openDetail,content:a},null,8,["onSetSelected","onOpenDetail","content"])):(0,r.kq)("",!0),"url"===a.type?((0,r.wg)(),(0,r.j4)(c,{key:2,onSetSelected:e=>i.selectItem(a),onOpenDetail:i.openDetail,content:a},null,8,["onSetSelected","onOpenDetail","content"])):(0,r.kq)("",!0),"video"===a.type?((0,r.wg)(),(0,r.j4)(p,{key:3,onSetSelected:e=>i.selectItem(a),onOpenDetail:i.openDetail,content:a},null,8,["onSetSelected","onOpenDetail","content"])):(0,r.kq)("",!0),a.meta.new?((0,r.wg)(),(0,r.iD)("div",Ye,"New")):(0,r.kq)("",!0)],64)):((0,r.wg)(),(0,r.j4)(m,{key:1,onSetSelected:e=>i.selectItem(a),onOpenDetail:i.openPath,content:a},null,8,["onSetSelected","onOpenDetail","content"]))],46,Ne)])),_:2},1024)))),128))])]),(0,r.Wm)(b,{dragContainer:"#itemsLists",selectableTargets:[".content-wrapper"],selectByClick:!0,selectFromInside:!0,continueSelect:!1,toggleContinueSelect:"shift",hitRate:0,onSelect:i.onSelect},null,8,["selectableTargets","onSelect"])],64)}var ot=a(6461);const st=(0,v.Z)(ot.Z,[["render",at]]);var rt=st,nt={name:"ContentList",props:{msg:String},mounted(){},methods:{},components:{SubFolderList:ze,ContentItemList:rt}};const it=(0,v.Z)(nt,[["render",De],["__scopeId","data-v-85d47c9a"]]);var lt=it,_t={name:"ContentListPage",components:{ContentHeader:we,ContentList:lt}};const ut=(0,v.Z)(_t,[["render",N]]);var dt=ut;const ct=e=>((0,r.dD)("data-v-e2a6d5e0"),e=e(),(0,r.Cn)(),e),pt={style:{background:"#171717"}},mt={style:{height:"54px"}},ht={style:{float:"right",width:"200px",display:"flex"}},ft={style:{position:"absolute",right:"20px",top:"10px","z-index":"9"}},gt=(0,r.Uk)("保存"),bt=(0,r.Uk)("另存为"),vt=ct((()=>(0,r._)("div",{id:"tui-image-editor"},null,-1)));function wt(e,t,a,o,s,n){const i=(0,r.up)("ArrowLeftOutlined"),l=(0,r.up)("a-button"),_=(0,r.up)("a-layout-content");return(0,r.wg)(),(0,r.iD)("div",pt,[(0,r._)("div",mt,[(0,r.Wm)(i,{class:"action-icon",style:{color:"white"},onClick:t[0]||(t[0]=e=>this.$router.back())}),(0,r._)("div",ht,[(0,r._)("div",ft,[(0,r.Wm)(l,{shape:"round",onClick:n.save,style:{"margin-right":"10px"}},{default:(0,r.w5)((()=>[gt])),_:1},8,["onClick"]),(0,r.Wm)(l,{shape:"round",onClick:t[1]||(t[1]=e=>n.saveAs()),type:"primary",style:{}},{default:(0,r.w5)((()=>[bt])),_:1})])])]),(0,r.Wm)(_,{style:{background:"white",height:"calc(100vh - 54px)",position:"relative"}},{default:(0,r.w5)((()=>[vt])),_:1})])}a(2801),a(8675),a(3462),a(7380),a(1118);var Dt=a(6380),It=a.n(Dt),Pt=a(5358);const kt={ZoomIn:"放大",ZoomOut:"缩小",Hand:"手掌",History:"历史",Resize:"调整宽高",Crop:"裁剪",DeleteAll:"全部删除",Delete:"删除",Undo:"撤销",Redo:"反撤销",Reset:"重置",Flip:"镜像",Rotate:"旋转",Draw:"画",Shape:"形状标注",Icon:"图标标注",Text:"文字标注",Mask:"遮罩",Filter:"滤镜",Bold:"加粗",Italic:"斜体",Underline:"下划线",Left:"左对齐",Center:"居中",Right:"右对齐",Color:"颜色","Text size":"字体大小",Custom:"自定义",Square:"正方形",Apply:"应用",Cancel:"取消","Flip X":"X 轴","Flip Y":"Y 轴",Range:"区间",Stroke:"描边",Fill:"填充",Circle:"圆",Triangle:"三角",Rectangle:"矩形",Free:"曲线",Straight:"直线",Arrow:"箭头","Arrow-2":"箭头2","Arrow-3":"箭头3","Star-1":"星星1","Star-2":"星星2",Polygon:"多边形",Location:"定位",Heart:"心形",Bubble:"气泡","Custom icon":"自定义图标","Load Mask Image":"加载蒙层图片",Grayscale:"灰度",Blur:"模糊",Sharpen:"锐化",Emboss:"浮雕","Remove White":"除去白色",Distance:"距离",Brightness:"亮度",Noise:"噪音","Color Filter":"彩色滤镜",Sepia:"棕色",Sepia2:"棕色2",Invert:"负片",Pixelate:"像素化",Threshold:"阈值",Tint:"色调",Multiply:"正片叠底",Blend:"混合色",Width:"宽度",Height:"高度","Lock Aspect Ratio":"锁定宽高比例"},yt={"common.bi.image":"","common.bisize.width":"0px","common.bisize.height":"0px","common.backgroundImage":"none","common.backgroundColor":"#f3f4f6","common.border":"1px solid #333","header.backgroundImage":"none","header.backgroundColor":"#f3f4f6","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"NotoSans, sans-serif","loadButton.fontSize":"12px","loadButton.display":"none","downloadButton.backgroundColor":"#fdba3b","downloadButton.border":"1px solid #fdba3b","downloadButton.color":"#fff","downloadButton.fontFamily":"NotoSans, sans-serif","downloadButton.fontSize":"12px","downloadButton.display":"none","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#ccc","menu.hoverIcon.color":"#e9e9e9","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"#1e1e1e","submenu.partition.color":"#858585","submenu.normalLabel.color":"#858585","submenu.normalLabel.fontWeight":"lighter","submenu.activeLabel.color":"#fff","submenu.activeLabel.fontWeight":"lighter","checkbox.border":"1px solid #ccc","checkbox.backgroundColor":"#fff","range.pointer.color":"#fff","range.bar.color":"#666","range.subbar.color":"#d1d1d1","range.disabledPointer.color":"#414141","range.disabledBar.color":"#282828","range.disabledSubbar.color":"#414141","range.value.color":"#fff","range.value.fontWeight":"lighter","range.value.fontSize":"11px","range.value.border":"1px solid #353535","range.value.backgroundColor":"#151515","range.title.color":"#fff","range.title.fontWeight":"lighter","colorpicker.button.border":"1px solid #1e1e1e","colorpicker.title.color":"#fff"};var Et={name:"ImageDetailPage",components:{ArrowLeftOutlined:Pt.Z},data(){return{path:"",instance:null}},mounted(){console.log("getpath",this.$route.params["path"]),this.path="file://"+this.$route.params["path"],this.init(this.path)},methods:{init(e){return this.instance=new(It())(document.querySelector("#tui-image-editor"),{includeUI:{loadImage:{path:e,name:"图片"},initMenu:"draw",menuBarPosition:"bottom",theme:{"common.bi.image":"","common.bisize.width":"0px","common.bisize.height":"0px","loadButton.display":"none","downloadButton.display":"none"},locale:kt},initMenu:"rotate",cssMaxWidth:1e3,cssMaxHeight:600}),yt},save(){const e=this.instance.toDataURL(),t=window.atob(e.split(",")[1]),a=new Uint8Array(t.length);for(let r=0;r<t.length;r++)a[r]=t.charCodeAt(r);const o=new Blob([a],{type:"image/png"}),s=new FormData;s.append("image",o)},saveAs(){}}};const Ct=(0,v.Z)(Et,[["render",wt],["__scopeId","data-v-e2a6d5e0"]]);var Mt=Ct;a(6699);const Ot=e=>((0,r.dD)("data-v-420132a5"),e=e(),(0,r.Cn)(),e),Ft={style:{height:"54px"}},Tt=(0,r.Uk)(" 密码 "),xt={style:{float:"right",width:"300px",display:"flex"}},Wt=Ot((()=>(0,r._)("div",{style:{width:"200px"}},null,-1))),St={style:{flex:"1"}},Rt={href:"tsb://app/redirect/?package=com.thisky.import&url=/",title:"导入密码"},Ut={style:{padding:"15px"}},At={key:0},Zt={key:1,class:"editable-row-operations"},Lt={key:0},jt=["onClick"],Bt=Ot((()=>(0,r._)("a",null,"取消",-1))),Kt={key:1},zt=["onClick"];function $t(e,t,a,o,s,n){const i=(0,r.up)("ArrowLeftOutlined"),l=(0,r.up)("ImportOutlined"),u=(0,r.up)("EditOutlined"),d=(0,r.up)("a-input"),c=(0,r.up)("a-popconfirm"),p=(0,r.up)("a-table");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",Ft,[(0,r.Wm)(i,{class:"action-icon",onClick:t[0]||(t[0]=e=>this.$router.back())}),Tt,(0,r._)("div",xt,[Wt,(0,r._)("div",St,[(0,r._)("a",Rt,[(0,r.Wm)(l,{class:"action-icon"})]),(0,r.Wm)(u,{class:"action-icon"})])])]),(0,r._)("div",Ut,[(0,r.Wm)(p,{columns:s.columns,dataSource:s.dataSource,pagination:!1,rowClassName:(e,t)=>t%2===1?"table-striped":null,size:s.size,bordered:"",class:"ant-table-striped",rowKey:"id"},{bodyCell:(0,r.w5)((({column:e,text:t,record:a})=>[["title","username","pwdText"].includes(e.dataIndex)?((0,r.wg)(),(0,r.iD)("div",At,[s.editableData[a.key]?((0,r.wg)(),(0,r.j4)(d,{key:0,value:s.editableData[a.key][e.dataIndex],"onUpdate:value":t=>s.editableData[a.key][e.dataIndex]=t,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r.Uk)((0,_.zw)(t),1)],64))])):"action"===e.dataIndex?((0,r.wg)(),(0,r.iD)("div",Zt,[s.editableData[a.key]?((0,r.wg)(),(0,r.iD)("span",Lt,[(0,r._)("a",{onClick:e=>n.save(a.key)},"保存",8,jt),(0,r.Wm)(c,{title:"确认保存？",onConfirm:e=>n.cancel(a.key)},{default:(0,r.w5)((()=>[Bt])),_:2},1032,["onConfirm"])])):((0,r.wg)(),(0,r.iD)("span",Kt,[(0,r._)("a",{onClick:e=>n.edit(a.key)},"编辑",8,zt)]))])):(0,r.kq)("",!0)])),_:1},8,["columns","dataSource","rowClassName","size"])])])}var qt=a(3875),Ht=a(6468),Vt={name:"PasswordListPage",components:{ArrowLeftOutlined:Pt.Z,ImportOutlined:qt.Z},methods:{edit(e){this.editableData[e]=(0,Ht.Z)(this.dataSource.value.filter((t=>e===t.key))[0])},save(e){Object.assign(this.dataSource.value.filter((t=>e===t.key))[0],this.editableData[e]),delete this.editableData[e]},cancel(e){delete this.editableData[e]}},data(){return{editableData:{},size:"middle",columns:[{title:"序号",dataIndex:"id",key:"id",width:50},{title:"站点",dataIndex:"domain",key:"domain",sorter:!0,width:200},{title:"标题",dataIndex:"title",key:"title",sorter:!0},{title:"级别",dataIndex:"starText",key:"starText",sorter:!0,width:100,filters:[{text:"⭐⭐⭐️",value:"3"},{text:"⭐⭐",value:"2"},{text:"⭐",value:"1"}]},{title:"用户名",dataIndex:"username",key:"username",sorter:!0},{title:"密码",dataIndex:"pwdText",key:"pwdText"},{title:"操作",dataIndex:"action",key:"action"}],dataSource:[]}},created(){let e=this;ge.Z.fetchAllPwds().then((t=>{let a=[],o=1;a=t.map((e=>(e.id=o,o++,e.pwdText="···",e.pwd=e.password,e.star=String(1),e.action="",e))),e.dataSource=a})).catch((t=>{e.$message.error("获取密码失败，错误原因："+t+"。")}))}};const Nt=(0,v.Z)(Vt,[["render",$t],["__scopeId","data-v-420132a5"]]);var Yt=Nt;const Xt={class:"input",style:{height:"200px",position:"relative",background:"rgba(0,0,0,0.23)","border-radius":"6px"}},Jt=["src"],Gt={style:{"padding-bottom":"10px"}},Qt={class:"wrapper-scroller",style:{height:"calc(100vh - 135px )",overflow:"auto"}},ea={style:{position:"fixed",bottom:"0","padding-bottom":"5px","font-size":"12px",color:"#999","max-width":"300px"}},ta={key:0},aa={key:1},oa=(0,r.Uk)("确定");function sa(e,t,a,o,s,n){const i=(0,r.up)("a-image"),l=(0,r.up)("a-textarea"),u=(0,r.up)("a-rate"),d=(0,r.up)("a-col"),c=(0,r.up)("a-input-search"),p=(0,r.up)("TreeList"),m=(0,r.up)("a-tab-pane"),h=(0,r.up)("a-tabs"),f=(0,r.up)("a-button"),g=(0,r.up)("a-row");return(0,r.wg)(),(0,r.j4)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{flex:"220px",class:"wrapper-scroller",style:{height:"100vh",overflow:"auto","background-color":"#f1f1f1",padding:"10px","box-shadow":"0 0 8px rgba(65,65,65,0.49)"}},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("div",Xt,[(0,r.Wm)(i,{height:200,width:200,src:s.addContentInfo.cover,style:{"object-fit":"scale-down",height:"200px !important","border-radius":"6px","box-shadow":"0 0 8px rgba(73, 73, 73, 0.4)"}},null,8,["src"]),(0,r._)("img",{src:s.addContentInfo.extData.favicon,class:"favicon"},null,8,Jt)])]),(0,r._)("div",null,[(0,r.Wm)(l,{class:"input",placeholder:"输入标题",value:s.addContentInfo.name,"onUpdate:value":t[0]||(t[0]=e=>s.addContentInfo.name=e)},null,8,["value"])]),(0,r._)("div",null,[(0,r.Wm)(l,{class:"input",placeholder:"网址",value:s.addContentInfo.href,"onUpdate:value":t[1]||(t[1]=e=>s.addContentInfo.href=e)},null,8,["value"])]),(0,r._)("div",null,[(0,r.Wm)(l,{class:"input",placeholder:"添加备注",value:s.addContentInfo.remark,"onUpdate:value":t[2]||(t[2]=e=>s.addContentInfo.remark=e)},null,8,["value"])]),(0,r._)("div",null,[(0,r.Wm)(u,{value:s.addContentInfo.rate,"onUpdate:value":t[3]||(t[3]=e=>s.addContentInfo.rate=e),style:{"margin-bottom":"10px"},"allow-half":""},null,8,["value"])])])),_:1}),(0,r.Wm)(d,{flex:"auto",style:{padding:"10px",width:"260px"}},{default:(0,r.w5)((()=>[(0,r._)("div",Gt,[(0,r.Wm)(c,{value:s.searchFolderValue,"onUpdate:value":t[4]||(t[4]=e=>s.searchFolderValue=e),placeholder:"快速搜索文件夹",style:{width:"100%"}},null,8,["value"])]),(0,r.Wm)(h,{style:{width:"260px"},size:"small",centered:"",animated:!1},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{key:"my",tab:"我的收藏夹",style:{padding:"0 !important"}},{default:(0,r.w5)((()=>[(0,r._)("div",Qt,[(0,r.Wm)(p,{searchValue:s.searchFolderValue,flatData:e.userFlatFolders,onOnSelect:n.setSelectedFolder,treeData:e.userFolders},null,8,["searchValue","flatData","onOnSelect","treeData"])])])),_:1})])),_:1}),(0,r._)("div",ea,[s.selectedFolder?((0,r.wg)(),(0,r.iD)("div",ta," 收藏到：/"+(0,_.zw)(s.selectedFolder),1)):((0,r.wg)(),(0,r.iD)("div",aa,"添加到收集箱"))]),(0,r.Wm)(f,{onClick:n.save,style:{position:"fixed",right:"10px"},size:"small",type:"primary"},{default:(0,r.w5)((()=>[oa])),_:1},8,["onClick"])])),_:1})])),_:1})}const ra=(0,r.Uk)(" 请输入同级文件夹的名称， 此文件夹将会创建到此文件夹下 "),na={class:"pathBlock"},ia=(0,r.Uk)(" 请输入同级文件夹的名称， 此文件夹将会创建到此文件夹下 "),la={class:"pathBlock"},_a=(0,r.Uk)(" 个人收藏"),ua={key:0},da={style:{color:"#f50"}},ca={key:0},pa={key:1},ma={key:0},ha=(0,r.Uk)("创建文件夹（同级）"),fa=(0,r.Uk)("创建子文件夹"),ga=(0,r.Uk)("定位"),ba=(0,r.Uk)("重命名"),va=(0,r.Uk)("删除文件夹"),wa=(0,r.Uk)("刷新列表");function Da(e,t,a,o,s,n){const i=(0,r.up)("PromptModal"),l=(0,r.up)("HomeOutlined"),u=(0,r.up)("a-empty"),d=(0,r.up)("a-menu-item"),c=(0,r.up)("a-menu-divider"),p=(0,r.up)("a-menu"),m=(0,r.up)("a-dropdown"),h=(0,r.up)("a-directory-tree");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{width:400,title:"创建同级文件夹",visible:s.promptVisible,onHandleOk:n.handleCreateFolder,onChangeVisible:t[0]||(t[0]=e=>this.promptVisible=e)},{message:(0,r.w5)((()=>[ra,(0,r._)("blockquote",na,(0,_.zw)(this.selectedDir),1)])),_:1},8,["visible","onHandleOk"]),(0,r.Wm)(i,{message:"请输入子文件夹名称",title:"创建子文件夹",visible:s.promptVisibleCreateChild,onHandleOk:t[1]||(t[1]=e=>n.handleCreateSubFolder()),onChangeVisible:t[2]||(t[2]=e=>this.promptVisibleCreateChild=e)},{message:(0,r.w5)((()=>[ia,(0,r._)("blockquote",la,(0,_.zw)(this.selectedDir),1)])),_:1},8,["visible"]),(0,r._)("div",{class:(0,_.C_)(["tree-root",{"active-root":""===this.selectedKeys[0]}]),style:{"font-size":"13px","margin-top":"5px",cursor:"pointer"},onClick:t[3]||(t[3]=e=>n.select([""]))},[(0,r.Wm)(l),_a],2),0===n.showTree.length?((0,r.wg)(),(0,r.j4)(u,{key:0,description:"",image:s.simpleImage},null,8,["image"])):((0,r.wg)(),(0,r.j4)(h,{key:1,selectedKeys:s.selectedKeys,"onUpdate:selectedKeys":t[4]||(t[4]=e=>s.selectedKeys=e),ref:"tree",class:"tree","field-names":a.fields,"tree-data":n.showTree,onSelect:n.select,"expanded-keys":s.expandedKeys,"onUpdate:expanded-keys":t[5]||(t[5]=e=>s.expandedKeys=e),"auto-expand-parent":s.autoExpandParen},{title:(0,r.w5)((({path:e,parentDir:t,relativePath:o,title:s,contentCount:i,dirname:l})=>[(0,r.Wm)(m,{trigger:["contextmenu"]},{overlay:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{key:"create",onClick:e=>n.createFolder(t)},{default:(0,r.w5)((()=>[ha])),_:2},1032,["onClick"]),(0,r.Wm)(d,{key:"createChild",onClick:e=>n.createSubFolder(o)},{default:(0,r.w5)((()=>[fa])),_:2},1032,["onClick"]),(0,r.Wm)(d,{onClick:e=>n.openDir(o),key:"locate"},{default:(0,r.w5)((()=>[ga])),_:2},1032,["onClick"]),(0,r.Wm)(c),(0,r.Wm)(d,{onClick:e=>n.renameFolder(o,l),key:"rename"},{default:(0,r.w5)((()=>[ba])),_:2},1032,["onClick"]),(0,r.Wm)(d,{onClick:t=>n.removeDir(e),key:"remove"},{default:(0,r.w5)((()=>[va])),_:2},1032,["onClick"]),(0,r.Wm)(c),(0,r.Wm)(d,{onClick:n.refresh,key:"locate"},{default:(0,r.w5)((()=>[wa])),_:1},8,["onClick"])])),_:2},1024)])),default:(0,r.w5)((()=>[s.indexOf(a.searchValue)>-1?((0,r.wg)(),(0,r.iD)("span",ua,[(0,r.Uk)((0,_.zw)(s.substr(0,s.indexOf(a.searchValue))),1),(0,r._)("span",da,(0,_.zw)(a.searchValue),1),(0,r.Uk)((0,_.zw)(s.substr(s.indexOf(a.searchValue)+a.searchValue.length))+" ",1),Number(i>0)?((0,r.wg)(),(0,r.iD)("span",ca," ("+(0,_.zw)(i)+") ",1)):(0,r.kq)("",!0)])):((0,r.wg)(),(0,r.iD)("span",pa,[(0,r.Uk)((0,_.zw)(s)+" ",1),Number(i>0)?((0,r.wg)(),(0,r.iD)("span",ma," ("+(0,_.zw)(i)+") ",1)):(0,r.kq)("",!0)]))])),_:2},1024)])),_:1},8,["selectedKeys","field-names","tree-data","onSelect","expanded-keys","auto-expand-parent"]))],64)}var Ia=a(7396),Pa=a(5925),ka=a(5050),ya=a(4806),Ea=a.n(ya);const Ca=(e,t)=>{let a;for(let o=0;o<t.length;o++){const s=t[o];s.children&&(s.children.some((t=>t.key===e))?a=s.key:Ca(e,s.children)&&(a=Ca(e,s.children)))}return a};function Ma(e,t){let a=Ea().filter(e,(e=>Ea().includes(t,e.key)));return a.map((e=>{if(e.children)return e.children=Ma(e.children,t),e}))}var Oa={name:"TreeList",props:["treeData","fields","searchValue","flatData"],components:{PromptModal:Ia.Z,HomeOutlined:ka.Z},emits:["onSelect"],data(){return{promptVisible:!1,promptVisibleCreateChild:!1,selectedDir:"",simpleImage:Pa.Z.PRESENTED_IMAGE_SIMPLE,selectedKeys:[],filterKeys:null,expandedKeys:[],autoExpandParen:!0,subFolderHandler:window.app.$refs["subFolderHandler"]}},watch:{searchValue(e){let t=[];if(""!==e){const a=this.flatData.map((a=>a.title&&a.title.indexOf(e)>-1?(t.push(a.key),Ca(a.key,this.treeData)):null)).filter(((e,t,a)=>e&&a.indexOf(e)===t));this.expandedKeys=a,this.filterKeys=a.concat(t),this.autoExpandParent=!0}else this.filterKeys=null}},computed:{showTree(){let e=Ea().cloneDeep(this.treeData);return null!==this.filterKeys?Ma(e,this.filterKeys):this.treeData}},methods:{refresh(){window.app.$store.dispatch("subFolder/updateTreeData")},openDir(e){ge.Z.openDir(this.$store.state.config.storePath+e)},select(e,t){""===e[0]&&(this.selectedKeys=[]),this.selectedKeys=e,this.$emit("onSelect",e,t)},createFolder(e){this.selectedDir=e,this.promptVisible=!0},handleCreateFolder(e){ge.Z.createDir(this.$store.state.config.storePath+this.selectedDir,e.value,this.$message),e.input.setValue(""),this.promptVisible=!1},renameFolder(e,t){this.subFolderHandler.renameFolder(e,t)},createSubFolder(e){this.selectedDir="/"+e,this.promptVisible=!0},handleCreateSubFolder(e){ge.Z.createDir(this.$store.state.config.storePath+this.selectedDir,e.value,this.$message),e.input.setValue(""),this.promptVisible=!1},removeDir(e){this.subFolderHandler.trashItem(e)}}};const Fa=(0,v.Z)(Oa,[["render",Da],["__scopeId","data-v-5b9b231a"]]);var Ta=Fa,xa=a(3330),Wa={name:"PopSaveToFolderPage",data(){return{selectedFolder:"",searchFolderValue:"",options:[{value:"toRead",label:"稍后读"},{value:"toDo",label:"代办"},{value:"other",label:"其他"}],addContentInfo:{name:"",href:"",cover:"",rate:0,remark:"",extData:{}}}},components:{TreeList:Ta},methods:{setSelectedFolder(e){this.selectedFolder=e[0]},updateCapture(e){this.addContentInfo.cover="file://"+e.url},countDown(){let e=3;const t=xa.Z.success({title:"添加收藏成功",content:`弹窗将在${e}秒后自动关闭.`,okText:"好的"}),a=setInterval((()=>{e-=1,t.update({content:`弹窗将在${e}秒后自动关闭.`})}),1e3);setTimeout((()=>{clearInterval(a),t.destroy(),ge.Z.hideFavPop()}),1e3*e)},save(){let e=R.Z.filterFilename(this.addContentInfo.name);if(e.hadMapped.length)return this.addContentInfo.name=e.filename,void window.app.$message.error({content:"文件名不可包含以下文字: "+e.hadMapped.join(" ")+" 已为您自动替换。请确认后重新提交。"});console.log("文件名通过检测"),window.libDb.reload(),S.Z.addLink(this.selectedFolder,this.addContentInfo.name,this.addContentInfo.href,this.addContentInfo.cover,this.addContentInfo.extData.favicon,this.addContentInfo.remark,this.addContentInfo.rate)&&(window.app.$store.dispatch("subFolder/updateTreeData"),this.countDown())}},mounted(){this.$store.dispatch("ui/init"),ge.Z.bindAddPageInfoListener((e=>{let t={};t.name=R.Z.filterFilename(e.title).filename,t.href=e.url,t.remark="",t.extData={},null===e.favicon?t.extData.favicon="":t.extData.favicon=e.favicon.url,this.addContentInfo=t}),this.updateCapture),window.getAddPageInfo=()=>{ge.Z.getAddPageInfo()},ge.Z.noticeAddPageReady()},computed:{...(0,i.rn)({userFolders:e=>e.subFolder.myAllFolders,userFlatFolders:e=>e.subFolder.myAllFoldersFlat})}};const Sa=(0,v.Z)(Wa,[["render",sa],["__scopeId","data-v-6cb9306e"]]);var Ra=Sa;const Ua=(0,r.Uk)(" 点击登录 ");function Aa(e,t,a,o,s,n){const i=(0,r.up)("a-button"),l=(0,r.up)("a-result"),u=(0,r.up)("SideBar"),d=(0,r.up)("a-layout-sider"),c=(0,r.up)("router-view"),p=(0,r.up)("a-layout"),m=(0,r.up)("FocusItem");return s.isApp||0!==e.userInfo.uid?((0,r.wg)(),(0,r.j4)(p,{key:1},{default:(0,r.w5)((()=>[(0,r._)("div",{id:"rightResizer",onMousedown:t[1]||(t[1]=e=>n.starDrag("right")),style:(0,_.j5)([{"z-index":"999",position:"fixed",top:"0",height:"100vh",background:"transparent",cursor:"ew-resize",width:"5px"},{right:this.rightWidth-5+"px"}])},null,36),(0,r._)("div",{id:"leftResizer",style:(0,_.j5)([{left:this.leftWidth+"px"},{"z-index":"999",top:"0",position:"fixed",cursor:"ew-resize",width:"5px",height:"100vh",background:"transparent"}]),onMousedown:t[2]||(t[2]=e=>n.starDrag("left"))},null,36),(0,r.Wm)(d,{style:(0,_.j5)([{position:"relative"},{overflow:"auto",height:"100vh",position:"fixed",left:0,background:"#f1f1f1"}]),id:"left",class:"wrapper-scroller",theme:"light",width:s.leftWidth},{default:(0,r.w5)((()=>[(0,r.Wm)(u)])),_:1},8,["width"]),(0,r.Wm)(p,{class:"wrapper-scroller",style:(0,_.j5)({background:"white",marginLeft:this.leftWidth+"px",marginRight:this.rightWidth+"px",height:"100vh",position:"fixed",width:"calc(100vw - "+String(Number(this.leftWidth)+Number(this.rightWidth))+"px)",overflowY:"auto"})},{default:(0,r.w5)((()=>[(0,r.Wm)(c)])),_:1},8,["style"]),(0,r.Wm)(d,{id:"right",class:"wrapper-scroller focused-panel",theme:"light",width:s.rightWidth},{default:(0,r.w5)((()=>[(0,r.Wm)(m)])),_:1},8,["width"])])),_:1})):((0,r.wg)(),(0,r.j4)(l,{key:0,status:"403",title:"403","sub-title":"此站点需要登录后使用，请点击登录后再访问。"},{extra:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"primary",onClick:t[0]||(t[0]=e=>n.goLogin())},{default:(0,r.w5)((()=>[Ua])),_:1})])),_:1}))}const Za={class:"side-bar",style:{"overflow-x":"hidden"}},La=(0,r._)("span",null,"全部",-1),ja=(0,r._)("span",null,"收集箱",-1),Ba=(0,r._)("span",null,"最近",-1),Ka=["onClick"],za=(0,r._)("div",{style:{"text-align":"center","margin-bottom":"10px"}},"输入文件夹名称",-1);function $a(e,t,a,s,n,i){(0,r.up)("UserInfo");const l=(0,r.up)("AppstoreOutlined"),u=(0,r.up)("a-menu-item"),d=(0,r.up)("InboxOutlined"),c=(0,r.up)("ClockCircleOutlined"),p=(0,r.up)("a-menu"),m=(0,r.up)("FolderOutlined"),h=(0,r.up)("a-col"),f=(0,r.up)("a-row"),g=(0,r.up)("a-collapse-panel"),b=(0,r.up)("a-collapse"),v=(0,r.up)("a-input"),w=(0,r.up)("PlusOutlined"),D=(0,r.up)("a-popconfirm"),I=(0,r.up)("TreeList"),P=(0,r.up)("a-input-search");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",Za,[(0,r.kq)("",!0),(0,r.Wm)(p,{class:"nav",selectedKeys:i.tab,"onUpdate:selectedKeys":t[0]||(t[0]=e=>i.tab=e),style:{background:"none"},mode:"inline",onClick:i.handleNavClick},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{key:"all",onTitleClick:i.titleClick},{icon:(0,r.w5)((()=>[(0,r.Wm)(l)])),default:(0,r.w5)((()=>[La])),_:1},8,["onTitleClick"]),(0,r.Wm)(u,{key:"collection",onTitleClick:i.titleClick},{icon:(0,r.w5)((()=>[(0,r.Wm)(d)])),default:(0,r.w5)((()=>[ja])),_:1},8,["onTitleClick"]),(0,r.Wm)(u,{key:"recent"},{icon:(0,r.w5)((()=>[(0,r.Wm)(c)])),default:(0,r.w5)((()=>[Ba])),_:1})])),_:1},8,["selectedKeys","onClick"]),(0,r.Wm)(b,{class:"tab-wrapper",activeKey:n.collapseContentType,"onUpdate:activeKey":t[1]||(t[1]=e=>n.collapseContentType=e),bordered:!1,ghost:!0},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{key:"contentType",header:"内容类型"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(f,{class:"content-types",type:"flex"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.contentTypes,(e=>((0,r.wg)(),(0,r.j4)(h,{key:e,span:12},{default:(0,r.w5)((()=>[(0,r._)("div",{class:(0,_.C_)(["type",{active:e.tab===i.tab[0]}]),type:"link",onClick:t=>i.setTab(e.tab,e.name)},[(0,r.Wm)(m),(0,r.Uk)(" "+(0,_.zw)(e.name),1)],10,Ka)])),_:2},1024)))),128))])),_:1})])])),_:1})])),_:1},8,["activeKey"]),(0,r.Wm)(D,{"ok-text":"确定","cancel-text":"取消",onConfirm:i.createDir},{icon:(0,r.w5)((()=>[za])),title:(0,r.w5)((()=>[(0,r.Wm)(v,{ref:"dirInput",style:{"margin-left":"-10px"}},null,512)])),default:(0,r.w5)((()=>[(0,r._)("div",{onClick:t[2]||(t[2]=(0,o.iM)((()=>{}),["prevent","stop"])),style:{position:"absolute","z-index":"99",width:"20px",height:"20px",right:"0",cursor:"pointer"}},[(0,r.Wm)(w)])])),_:1},8,["onConfirm"]),(0,r.Wm)(b,{class:"tab-wrapper",activeKey:n.collapseFolder,"onUpdate:activeKey":t[3]||(t[3]=e=>n.collapseFolder=e),bordered:!1,ghost:!0},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{key:"folder",header:"文件夹"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Wm)(I,{onOnSelect:i.setSelectedFolder,searchValue:n.searchFolderValue,flatData:e.userFlatFolders,treeData:e.userFolders,fields:n.userFolderFields},null,8,["onOnSelect","searchValue","flatData","treeData","fields"])])])),_:1})])),_:1},8,["activeKey"])]),(0,r._)("div",{style:(0,_.j5)([{background:"rgb(241, 241, 241)",position:"fixed",bottom:"0",left:"0","z-index":"999"},{width:e.dividerPos.left-15+"px"}])},[(0,r.Wm)(P,{size:"small",block:"",value:n.searchFolderValue,"onUpdate:value":t[4]||(t[4]=e=>n.searchFolderValue=e),style:{width:"100%",margin:"5px"},placeholder:"搜索文件夹"},null,8,["value"])],4)],64)}var qa=a(6229),Ha=a(8269),Va=a(5114),Na=a(247),Ya=a(7081);const Xa=e=>((0,r.dD)("data-v-ab6572e0"),e=e(),(0,r.Cn)(),e),Ja={class:"user-info"},Ga=["href"],Qa=["href"],eo={style:{"text-align":"center",background:"white",padding:"10px","border-radius":"4px","box-shadow":"0 0 4px rgba(124,124,124,0.35)"}},to=(0,r.Uk)("登录 "),ao={style:{"font-size":"12px","text-align":"left",color:"#666"}},oo=(0,r.Uk)("登录后即可使用"),so=Xa((()=>(0,r._)("strong",null,"云端同步",-1))),ro=(0,r.Uk)("和"),no=Xa((()=>(0,r._)("strong",null,"团队收藏夹",-1))),io=(0,r.Uk)("功能。解锁全新协作模式。 "),lo={key:0,href:"tsb://app/redirect/?package=com.thisky.helper&url=https://www.yuque.com/tswork/browser/gynywc"},_o={key:1,target:"_blank",href:"https://www.yuque.com/tswork/browser/gynywc"};function uo(e,t,a,o,s,n){const i=(0,r.up)("a-avatar"),l=(0,r.up)("a-col"),u=(0,r.up)("a-progress"),d=(0,r.up)("a-row"),c=(0,r.up)("a-button");return(0,r.wg)(),(0,r.iD)("div",Ja,[e.userInfo.uid?((0,r.wg)(),(0,r.j4)(d,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{flex:"60px"},{default:(0,r.w5)((()=>[(0,r._)("a",{href:n.getComProtocolUrl(e.server.userSpaceUrl)},[(0,r.Wm)(i,{src:e.userInfo.avatar,size:50},null,8,["src"])],8,Ga)])),_:1}),(0,r.Wm)(l,{flex:"auto"},{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r._)("a",{href:n.getComProtocolUrl(e.server.userSpaceUrl),target:"_blank",class:"nickname"},(0,_.zw)(e.userInfo.nickname),9,Qa)]),(0,r._)("div",null,[(0,r.Wm)(u,{title:"剩余空间99%",percent:99,size:"small"})]),(0,r._)("div",null,[(0,r._)("span",{class:"logout",onClick:t[0]||(t[0]=e=>n.logout())},"登出")])])),_:1})])),_:1})):((0,r.wg)(),(0,r.j4)(d,{key:1,style:{"text-align":"center"}},{default:(0,r.w5)((()=>[(0,r._)("div",eo,[s.isApp?((0,r.wg)(),(0,r.j4)(c,{key:0,block:"",type:"primary",onClick:t[1]||(t[1]=e=>n.goAppLogin()),size:"small",style:{"margin-bottom":"10px"}},{default:(0,r.w5)((()=>[to])),_:1})):(0,r.kq)("",!0),(0,r._)("div",ao,[oo,so,ro,no,io,s.isApp?((0,r.wg)(),(0,r.iD)("a",lo,"了解更多")):((0,r.wg)(),(0,r.iD)("a",_o,"了解更多"))])])])),_:1}))])}var co={name:"UserInfo",props:{msg:String},data(){return{isApp:window.isApp}},computed:{...(0,i.rn)({userInfo:e=>e.user.userInfo,server:e=>e.config.server})},methods:{getComProtocolUrl:l.Z.getComProtocolUrl,logout(){this.$store.commit("user/setUserInfo",{uid:0})},goAppLogin(){window.ipc.send("addTab",{url:this.server.loginUrl});let e=setInterval((()=>{window.ipc.send("getUserInfo"),0!==this.userInfo.uid&&clearInterval(e)}),1e3)}}};const po=(0,v.Z)(co,[["render",uo],["__scopeId","data-v-ab6572e0"]]);var mo=po,ho=a(5451),fo={name:"SideBar",props:{msg:String},components:{UserInfo:mo,AppstoreOutlined:qa.Z,InboxOutlined:Ha.Z,ClockCircleOutlined:Va.Z,FolderOutlined:Na.Z,PlusOutlined:Ya.Z,TreeList:Ta},data(){return{searchFolderValue:"",mkdirVisible:!1,userFolderFields:{subFolders:"children",children:"subFolders",dirname:"title",title:"dirname",path:"key"},visiblePopInputDirName:!1,collapseContentType:["contentType"],collapseFolder:["folder"],collapseGroupFolder:["groupFolder"],contentTypes:[{name:"书签",tab:"bookmark"},{name:"密码",tab:"pwds"},{name:"图片",tab:"img"},{name:"视频",tab:"video"},{name:"文档",tab:"doc"},{name:"音频",tab:"audio"}]}},computed:{tab(){return[this.$store.state.ui.currentTab.name]},...(0,i.rn)({groups:e=>e.group.groups,userFlatFolders:e=>e.subFolder.myAllFoldersFlat,userFolders:e=>e.subFolder.myAllFolders,dividerPos:e=>e.ui.dividerPos})},methods:{setSelectedFolder(e){this.$router.push("/main/"),this.$store.dispatch("ui/changeFolder",{path:this.$store.state.config.storePath+"/"+e[0]+"/"})},createDir(e){e.preventDefault();let t=this.$refs.dirInput.input.value;ge.Z.createDir(this.$store.state.config.storePath,t,this.$message),this.$refs.dirInput.setValue("")},handleNavClick(e){const t={all:"全部",collection:"收集箱",recent:"最近"};this.$router.push("/main/"),this.setTab(e.key,t[e.key])},titleClick(e){this.setTab(e.key),this.$router.push("/main/")},getFilters(e){let t=function(e){return e.filename.endsWith(".url")},a=function(e,t="img"){return ho.Z.getContentTypeFromFilename(e.filename).name===t},o=e=>a(e,"img"),s=e=>a(e,"video"),r=e=>a(e,"doc"),n=e=>a(e,"audio");switch(e){case"bookmark":return t;case"img":return o;case"video":return s;case"doc":return r;case"audio":return n;default:return e=>e}},setTab(e,t){switch(e){case"pwds":this.$router.replace("pwds"),this.$store.commit("ui/setTab",{name:"pwds",alias:"密码"});break;case"collection":this.$store.commit("ui/setConfig",{showSubFolders:!1}),this.$router.replace("content"),this.$store.dispatch("ui/changeTab",{name:e,alias:t});break;default:this.$store.commit("ui/setConfig",{showSubFolders:!0}),this.$store.commit("ui/setFilter",[this.getFilters(e)]),this.$router.replace("content"),this.$store.dispatch("ui/changeTab",{name:e,alias:t})}}}};const go=(0,v.Z)(fo,[["render",$a]]);var bo=go;const vo={key:0},wo={key:1},Do={key:2,style:{"padding-top":"100px"}};function Io(e,t,a,o,s,n){const i=(0,r.up)("SelectedItemContent"),l=(0,r.up)("focus-item-content"),_=(0,r.up)("focus-item-folder"),u=(0,r.up)("a-empty");return this.selectedItems.length>1?((0,r.wg)(),(0,r.iD)("div",vo,[(0,r.Wm)(i)])):this.focusedItem.type?((0,r.wg)(),(0,r.iD)("div",wo,["content"===this.focusedItem.type?((0,r.wg)(),(0,r.j4)(l,{key:0})):((0,r.wg)(),(0,r.j4)(_,{key:1}))])):((0,r.wg)(),(0,r.iD)("div",Do,[(0,r.Wm)(u,{description:"未选择任何内容"})]))}const Po=e=>((0,r.dD)("data-v-11e4b348"),e=e(),(0,r.Cn)(),e),ko={class:"content-info"},yo={style:{"margin-bottom":"20px",height:"auto",position:"relative"}},Eo=["src"],Co={style:{"margin-bottom":"10px"}},Mo={style:{"margin-bottom":"10px"}},Oo=Po((()=>(0,r._)("h4",null,"基本信息",-1))),Fo=Po((()=>(0,r._)("br",null,null,-1))),To=Po((()=>(0,r._)("br",null,null,-1))),xo=Po((()=>(0,r._)("br",null,null,-1))),Wo=(0,r.Uk)(" 文件路径："),So=Po((()=>(0,r._)("br",null,null,-1))),Ro=Po((()=>(0,r._)("br",null,null,-1))),Uo=(0,r.Uk)("导出文件");function Ao(e,t,a,o,s,n){const i=(0,r.up)("a-image"),l=(0,r.up)("a-textarea"),u=(0,r.up)("ExportOutlined"),d=(0,r.up)("a-input"),c=(0,r.up)("a-rate"),p=(0,r.up)("a-button");return(0,r.wg)(),(0,r.iD)("div",ko,[(0,r._)("div",yo,[["img","url"].indexOf(e.focusedItem.type)>-1?((0,r.wg)(),(0,r.j4)(i,{key:0,width:200,style:{"max-height":"300px"},src:e.coverImg},{placeholder:(0,r.w5)((()=>[(0,r.Wm)(i,{src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",width:200,preview:!1})])),_:1},8,["src"])):((0,r.wg)(),(0,r.j4)(i,{key:1,style:{objectFit:"cover",padding:"20px"},width:200,height:190,preview:!1,class:"",src:e.coverImg},null,8,["src"])),e.focusedItem.extData.favicon?((0,r.wg)(),(0,r.iD)("img",{key:2,onerror:"this.src='./img/default.svg'",src:e.focusedItem.extData.favicon,class:"favicon",style:{bottom:"-10px",right:"-10px"}},null,8,Eo)):(0,r.kq)("",!0)]),(0,r._)("div",Co,[(0,r.Wm)(l,{onBlur:t[0]||(t[0]=t=>e.rename()),value:e.userInput.name,"onUpdate:value":t[1]||(t[1]=t=>e.userInput.name=t),autSize:{minRows:1,maxRows:5},style:{"margin-bottom":"10px"},placeholder:"标题"},null,8,["value"]),(0,r.Wm)(l,{onBlur:t[2]||(t[2]=t=>e.editRemark()),style:{"margin-bottom":"10px"},value:e.userInput.remark,"onUpdate:value":t[3]||(t[3]=t=>e.userInput.remark=t),placeholder:"备注"},null,8,["value"]),(0,r.Wm)(d,{onBlur:t[5]||(t[5]=t=>e.editHref()),style:{"margin-bottom":"0"},value:e.userInput.href,"onUpdate:value":t[6]||(t[6]=t=>e.userInput.href=t),placeholder:"网址网址"},{suffix:(0,r.w5)((()=>[(0,r.Wm)(u,{title:"打开引用页",onClick:t[4]||(t[4]=t=>e.ipc.addTab(e.focusedItem.meta.href))})])),_:1},8,["value"]),(0,r.Wm)(c,{onChange:e.setRate,value:e.userInput.rate,"onUpdate:value":t[7]||(t[7]=t=>e.userInput.rate=t),style:{"margin-bottom":"10px"},"allow-half":""},null,8,["onChange","value"])]),(0,r._)("div",Mo,[Oo,(0,r._)("div",null,[(0,r.Uk)(" 创建时间："+(0,_.zw)(this.dateStr(e.focusedItem.baseInfo.createTime))+" ",1),Fo,(0,r.Uk)(" 添加时间："+(0,_.zw)(this.dateStr(e.focusedItem.baseInfo.addTime))+" ",1),To,(0,r.Uk)(" 修改时间："+(0,_.zw)(this.dateStr(e.focusedItem.baseInfo.modifyTime))+" ",1),xo,Wo,So,(0,r._)("span",{title:"点击定位到文件",onClick:t[8]||(t[8]=t=>e.showItem(e.focusedItem)),style:{color:"#999",cursor:"pointer"}},(0,_.zw)(e.focusedItem.baseInfo.relativePath)+(0,_.zw)(e.focusedItem.baseInfo.filename),1),Ro,(0,r.Uk)(" 文件大小："+(0,_.zw)(e.focusedItem.baseInfo.sizeText),1)])]),(0,r._)("div",null,[(0,r.Wm)(p,{onClick:t[9]||(t[9]=t=>e.exportContent(e.focusedItem)),block:""},{default:(0,r.w5)((()=>[Uo])),_:1})])])}var Zo=a(4870),Lo=a(4965);function jo(e){var t,a=(new Date).getTime();if(a=parseInt((a-1e3*e)/1e3),a<600)return"刚刚";if(a<3600&&a>=600)return t=Math.floor(a/60),t+"分钟前";if(a<86400&&a>=3600)return t=Math.floor(a/60/60),t+"小时前";if(a<259200&&a>=86400)return t=Math.floor(a/60/60/24),t+"天前";var o=new Date(1e3*parseInt(e));return o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate()}var Bo=a(2744),Ko=a(8030),zo=(0,r.aZ)({name:"FocusItemContent",props:{},components:{ExportOutlined:Lo.Z},data(){return{ipc:ge.Z,value3:(0,Zo.iH)(["a1","b2"]),options:[{value:"稍后读"},{value:"代办"},{value:"待整理"},{value:"待标注"}],userInput:{name:"",remark:"",rate:0,href:""},coverImg:""}},mounted(){this.userInput.name=this.focusedItem.meta.name,this.userInput.remark=this.focusedItem.meta.remark||"",this.userInput.rate=this.focusedItem.meta.rate||0,this.userInput.href=this.focusedItem.meta.href||"",this.coverImg=this.cover()},methods:{showItem(e){ge.Z.showItemInFolder(R.Z.join(e.baseInfo.path,e.baseInfo.filename))},dateStr:jo,exportContent(e){let t=R.Z.getStorePathFromRelativePath(e.meta.relative_path_full);Ko.Z.saveAs(t)},rename(){if(this.userInput.name===this.focusedItem.name||""===this.userInput.name)return void(this.userInput.name=this.focusedItem.name);let e=S.Z.rename(this.focusedItem.meta.uuid,this.userInput.name);e.status===Bo.Z.successCode?(this.$message.success("修改名称成功。"),this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})):(this.userInput.name=this.focusedItem.meta.name,this.$message.error("修改名称失败，原因："+e.info))},editRemark(){if(this.userInput.remark===this.focusedItem.meta.remark)return;let e=S.Z.update(this.focusedItem.meta.uuid,{remark:this.userInput.remark});e.status===Bo.Z.successCode?this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.remark=this.focusedItem.meta.remark,this.$message.error("修改备注失败，原因："+e.info))},editHref(){if(this.userInput.href===this.focusedItem.meta.href)return;let e=S.Z.update(this.focusedItem.meta.uuid,{href:this.userInput.href});e.status===Bo.Z.successCode?this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.href=this.focusedItem.meta.href,this.$message.error("修改链接失败，原因："+e.info))},setRate(){let e=S.Z.update(this.focusedItem.meta.uuid,{rate:this.userInput.rate});this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})},cover(){if(this.focusedItem)return["img","url"].indexOf(this.focusedItem.type)>-1?this.focusedItem.cover?this.focusedItem.cover.startsWith("/")?"file://"+this.$store.state.config.storePath+this.focusedItem.cover:this.focusedItem.cover:"":ho.Z.getContentCover(this.focusedItem.ext)}},watch:{"focusedItem.meta.name":{handler(e,t){this.userInput.name=e}},"focusedItem.meta.remark":{handler(e,t){this.userInput.remark=e}},"focusedItem.meta.href":{handler(e,t){this.userInput.href=e}},"focusedItem.meta.rate":{handler(e,t){this.userInput.rate=e||0}},focusedItem:{handler(e){e&&"content"===e.type&&(this.coverImg=this.cover())}}},computed:{...(0,i.rn)({focusedItem:e=>e.ui.focusedItem.data})},setup(){return{random:(0,Zo.iH)()}}});const $o=(0,v.Z)(zo,[["render",Ao],["__scopeId","data-v-11e4b348"]]);var qo=$o;const Ho=e=>((0,r.dD)("data-v-8a76300e"),e=e(),(0,r.Cn)(),e),Vo={class:"content-info"},No={style:{"margin-bottom":"20px",height:"auto",position:"relative"}},Yo={style:{"margin-bottom":"10px"}},Xo={style:{"margin-bottom":"10px"}},Jo=Ho((()=>(0,r._)("h4",null,"基本信息",-1))),Go=Ho((()=>(0,r._)("br",null,null,-1))),Qo=Ho((()=>(0,r._)("br",null,null,-1))),es=Ho((()=>(0,r._)("br",null,null,-1))),ts=(0,r.Uk)(" 文件路径："),as=Ho((()=>(0,r._)("br",null,null,-1))),os=Ho((()=>(0,r._)("br",null,null,-1))),ss=(0,r.Uk)("导出文件夹");function rs(e,t,a,o,s,n){const i=(0,r.up)("a-image"),l=(0,r.up)("a-textarea"),u=(0,r.up)("a-rate"),d=(0,r.up)("a-button");return(0,r.wg)(),(0,r.iD)("div",Vo,[(0,r._)("div",No,[(0,r.Wm)(i,{style:{objectFit:"cover",padding:"20px"},width:200,height:190,preview:!1,src:"./img/folder.svg"},null,8,["src"])]),(0,r._)("div",Yo,[(0,r.Wm)(l,{onBlur:t[0]||(t[0]=t=>e.rename()),value:e.userInput.name,"onUpdate:value":t[1]||(t[1]=t=>e.userInput.name=t),autSize:{minRows:1,maxRows:5},style:{"margin-bottom":"10px"},placeholder:"标题"},null,8,["value"]),(0,r.Wm)(l,{onBlur:t[2]||(t[2]=t=>e.editRemark()),value:e.userInput.remark,"onUpdate:value":t[3]||(t[3]=t=>e.userInput.remark=t),placeholder:"备注"},null,8,["value"]),(0,r.Wm)(u,{onChange:e.setRate,value:e.userInput.rate,"onUpdate:value":t[4]||(t[4]=t=>e.userInput.rate=t),style:{"margin-bottom":"10px"},"allow-half":""},null,8,["onChange","value"])]),(0,r._)("div",Xo,[Jo,(0,r._)("div",null,[(0,r.Uk)(" 创建时间："+(0,_.zw)(this.dateStr(e.focusedItem.baseInfo.createTime))+" ",1),Go,(0,r.Uk)(" 添加时间："+(0,_.zw)(this.dateStr(e.focusedItem.baseInfo.addTime))+" ",1),Qo,(0,r.Uk)(" 修改时间："+(0,_.zw)(this.dateStr(e.focusedItem.baseInfo.modifyTime))+" ",1),es,ts,as,(0,r._)("span",{title:"点击定位到文件",onClick:t[5]||(t[5]=t=>e.showItem(e.focusedItem)),style:{color:"#999",cursor:"pointer"}},(0,_.zw)(e.focusedItem.baseInfo.relativePath)+(0,_.zw)(e.focusedItem.baseInfo.filename),1),os,(0,r.Uk)(" 文件大小："+(0,_.zw)(e.focusedItem.baseInfo.sizeText),1)])]),(0,r._)("div",null,[(0,r.Wm)(d,{onClick:t[6]||(t[6]=t=>e.exportContent(e.focusedItem)),block:""},{default:(0,r.w5)((()=>[ss])),_:1})])])}var ns=(0,r.aZ)({name:"FocusItemFolder",props:{},components:{},data(){return{ipc:ge.Z,value3:(0,Zo.iH)(["a1","b2"]),options:[{value:"稍后读"},{value:"代办"},{value:"待整理"},{value:"待标注"}],userInput:{name:"",remark:"",rate:0}}},mounted(){this.userInput.name=this.focusedItem.meta.name,this.userInput.remark=this.focusedItem.meta.remark||"",this.userInput.rate=this.focusedItem.meta.rate||0},methods:{showItem(e){ge.Z.showItemInFolder(R.Z.join(e.baseInfo.path,e.baseInfo.filename))},rename(){if(this.userInput.name===this.focusedItem.meta.name)return;let e=U.Z.rename(this.focusedItem.meta.uuid,this.userInput.name);e.status===Bo.Z.successCode?(this.$message.success("修改名称成功。"),this.$store.commit("subFolder/updateSubFolderWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}),this.$store.dispatch("subFolder/updateTreeData")):(this.userInput.name=this.focusedItem.name,this.$message.error("修改名称失败，原因："+e.info))},editRemark(){if(this.userInput.remark===this.focusedItem.meta.remark)return;let e=U.Z.update(this.focusedItem.meta.uuid,{remark:this.userInput.remark});e.status===Bo.Z.successCode?this.$store.commit("subFolder/updateSubFolderWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.remark=this.focusedItem.meta.remark,this.$message.error("修改备注失败，原因："+e.info))},setRate(){let e=U.Z.update(this.focusedItem.meta.uuid,{rate:this.userInput.rate});this.$store.commit("subFolder/updateSubFolderWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})},exportContent(e){console.log(e);let t=R.Z.getStorePathFromRelativePath(e.meta.relative_path_full),a=R.Z.getStorePathFromRelativePath(e.meta.relative_path);Ko.Z.saveAs(t,a)},dateStr(e){var t,a=(new Date).getTime();if(e=parseInt(e.toFixed(0))/1e3,a=parseInt((a-1e3*e)/1e3),a<600)return"刚刚";if(a<3600&&a>=600)return t=Math.floor(a/60),t+"分钟前";if(a<86400&&a>=3600)return t=Math.floor(a/60/60),t+"小时前";if(a<259200&&a>=86400)return t=Math.floor(a/60/60/24),t+"天前";var o=new Date(1e3*parseInt(e));return o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate()}},watch:{"focusedItem.meta.name":{handler(e,t){this.userInput.name=e}},"focusedItem.meta.remark":{handler(e,t){this.userInput.remark=e}},"focusedItem.meta.rate":{handler(e,t){this.userInput.rate=e||0}}},computed:{...(0,i.rn)({focusedItem:e=>e.ui.focusedItem.data}),cover(){return this.focusedItem.cover?this.focusedItem.cover.startsWith("/")?"file://"+this.$store.state.config.storePath+this.focusedItem.cover:this.focusedItem.cover:""}},setup(){return{random:(0,Zo.iH)()}}});const is=(0,v.Z)(ns,[["render",rs],["__scopeId","data-v-8a76300e"]]);var ls=is;const _s=e=>((0,r.dD)("data-v-3ca009d2"),e=e(),(0,r.Cn)(),e),us={class:"content-info"},ds={id:"",style:{position:"relative",width:"200px",height:"auto",display:"none"}},cs={style:{"margin-top":"20px","margin-bottom":"20px",position:"relative",height:"180px","vertical-align":"middle","text-align":"center",width:"200px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},ps=["id"],ms={style:{"text-align":"center",color:"#999",width:"180px"}},hs=_s((()=>(0,r._)("div",{style:{"margin-bottom":"10px"}},null,-1)));function fs(e,t,a,o,s,n){const i=(0,r.up)("a-image"),l=(0,r.up)("a-badge");return(0,r.wg)(),(0,r.iD)("div",us,[(0,r._)("div",ds,[(0,r.Wm)(i,{style:{"border-radius":"0"},src:e.cover(this.selectedItems[0].meta.cover,this.selectedItems[0]),width:200,prview:!1},null,8,["src"])]),(0,r._)("div",cs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.selectedItems,((t,a)=>((0,r.wg)(),(0,r.iD)("div",{id:a===this.selectedItems.length-1?"selectedItemsCover":void 0,class:"rotate-cover",style:(0,_.j5)({"z-index":a,transform:"rotate("+15*(1-(a+1)/e.selectedItems.length)+"deg)",transformOrigin:"center center"}),key:t.meta.uuid},[a===this.selectedItems.length-1?((0,r.wg)(),(0,r.j4)(l,{key:0,style:{position:"absolute","margin-left":"calc(50% + 10px)",top:"calc(50%)"},id:"badge",count:e.selectedItems.length},null,8,["count"])):(0,r.kq)("",!0),["img","url"].indexOf(t.type)>-1?((0,r.wg)(),(0,r.j4)(i,{key:1,width:180,style:{"max-height":"200px"},src:e.cover(t.cover,t)},{placeholder:(0,r.w5)((()=>[(0,r.Wm)(i,{src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png?x-oss-process=image/blur,r_50,s_50/quality,q_1/resize,m_mfit,h_200,w_200",width:200,preview:!1})])),_:2},1032,["src"])):((0,r.wg)(),(0,r.j4)(i,{key:2,style:(0,_.j5)([{objectFit:"cover",padding:"20px"},{background:"white"}]),width:180,height:150,preview:!1,class:"sub-folder-cover",src:e.cover(t.meta.cover,t)},null,8,["src"]))],12,ps)))),128))]),(0,r._)("div",ms,(0,_.zw)(e.selectedItems.length)+" 个内容已选 ",1),hs])}var gs=(0,r.aZ)({name:"SelectedItemContent",props:{},components:{},data(){return{ipc:ge.Z,value3:(0,Zo.iH)(["a1","b2"]),options:[{value:"稍后读"},{value:"代办"},{value:"待整理"},{value:"待标注"}],userInput:{name:"",remark:"",rate:0,href:""}}},mounted(){this.userInput.name=this.focusedItem.meta.name,this.userInput.remark=this.focusedItem.meta.remark||"",this.userInput.rate=this.focusedItem.meta.rate||0,this.userInput.href=this.focusedItem.meta.href||""},methods:{cover(e,t){if(console.log(t),t)return["img","url"].indexOf(t.type)>-1?e?e.startsWith("file://")?e:"file://"+this.$store.state.config.storePath+e:"":ho.Z.getContentCover(t.ext)},dateStr:jo,exportContent(e){let t=R.Z.getStorePathFromRelativePath(e.meta.relative_path_full);Ko.Z.saveAs(t)},rename(){if(this.userInput.name===this.focusedItem.name||""===this.userInput.name)return void(this.userInput.name=this.focusedItem.name);let e=S.Z.rename(this.focusedItem.meta.uuid,this.userInput.name);e.status===Bo.Z.successCode?(this.$message.success("修改名称成功。"),this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})):(this.userInput.name=this.focusedItem.meta.name,this.$message.error("修改名称失败，原因："+e.info))},editRemark(){if(this.userInput.remark===this.focusedItem.meta.remark)return;let e=S.Z.update(this.focusedItem.meta.uuid,{remark:this.userInput.remark});e.status===Bo.Z.successCode?this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.remark=this.focusedItem.meta.remark,this.$message.error("修改备注失败，原因："+e.info))},editHref(){if(this.userInput.href===this.focusedItem.meta.href)return;let e=S.Z.update(this.focusedItem.meta.uuid,{href:this.userInput.href});e.status===Bo.Z.successCode?this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data}):(this.userInput.href=this.focusedItem.meta.href,this.$message.error("修改链接失败，原因："+e.info))},setRate(){let e=S.Z.update(this.focusedItem.meta.uuid,{rate:this.userInput.rate});this.$store.commit("content/updateContentWithUuid",{uuid:this.focusedItem.meta.uuid,meta:e.data})}},watch:{"focusedItem.meta.name":{handler(e,t){this.userInput.name=e}},"focusedItem.meta.remark":{handler(e,t){this.userInput.remark=e}},"focusedItem.meta.href":{handler(e,t){this.userInput.href=e}},"focusedItem.meta.rate":{handler(e,t){this.userInput.rate=e||0}}},computed:{...(0,i.rn)({focusedItem:e=>e.ui.focusedItem.data,selectedItems:e=>e.ui.selectedItems})},setup(){return{random:(0,Zo.iH)()}}});const bs=(0,v.Z)(gs,[["render",fs],["__scopeId","data-v-3ca009d2"]]);var vs=bs,ws=(0,r.aZ)({name:"FocusItem",props:{},components:{FocusItemContent:qo,FocusItemFolder:ls,SelectedItemContent:vs},data(){return{}},methods:{},computed:{...(0,i.rn)({focusedItem:e=>e.ui.focusedItem,selectedItems:e=>e.ui.selectedItems})},setup(){return{}}});const Ds=(0,v.Z)(ws,[["render",Io]]);var Is=Ds,Ps={name:"MainPage",components:{SideBar:bo,FocusItem:Is},data(){return{isApp:window.isApp,resizingObject:null,resizing:!1,leftWidth:240,rightWidth:240}},computed:{...(0,i.rn)({userInfo:e=>e.user.userInfo,storePath:e=>e.config.storePath})},watch:{rightWidth:function(){this.updateRefreshBtnPos()}},mounted(){this.leftWidth=Number(localStorage.getItem("leftWidth"))||240,this.rightWidth=Number(localStorage.getItem("rightWidth"))||240,this.updateRefreshBtnPos(),document.onmouseup=this.endDrag,document.onmousemove=this.resizeSidebar,window.isApp&&(this.$store.commit("config/setIsApp",this.isApp),this.$store.dispatch("ui/init"),this.$store.dispatch("ui/changeTab",{name:"all",alias:"全部"}))},methods:{updateRefreshBtnPos(){let e=document.getElementById("refreshBtnWrapper");e&&(e.style.right=this.rightWidth+20+"px")},starDrag(e){this.resizing=!0,this.resizingObject=e},resizeSidebar(e){let t=240,a=480;if(this.resizing)if("left"===this.resizingObject){if(e.clientX<t)return void(this.leftWidth=t);if(e.clientX>a)return void(this.leftWidth=a);this.leftWidth=e.clientX,this.leftWidth=e.clientX}else if("right"===this.resizingObject){if(document.body.offsetWidth-e.clientX-5<t)return void(this.rightWidth=t);if(document.body.offsetWidth-e.clientX-5>a)return void(this.rightWidth=a);this.rightWidth=document.body.offsetWidth-e.clientX-5}},endDrag(){this.resizing=!1,this.$store.commit("ui/setDividerPos",{left:this.leftWidth,right:this.rightWidth}),localStorage.setItem("leftWidth",this.leftWidth),localStorage.setItem("rightWidth",this.rightWidth)},goLogin(){location.href=this.$store.state.config.server.loginUrl}}};const ks=(0,v.Z)(Ps,[["render",Aa],["__scopeId","data-v-fb898e5a"]]);var ys=ks;const Es=[{path:"/",redirect:"/main"},{path:"/main",component:ys,redirect:"/main/content",children:[{path:"content",component:dt},{name:"img",path:"img/:path",component:Mt},{name:"pwds",path:"pwds",component:Yt}]},{name:"popSaveToFolder",path:"/popSaveToFolder",component:Ra}];var Cs=Es,Ms=a(678);const Os=(0,Ms.p7)({history:(0,Ms.r5)(),routes:Cs});let Fs=(0,o.ri)(C).use(Os).use(s.ZP).use(q).mount("#app");window.tsbSdk&&(window.tsbk=V(),V().config({signature:"ts"}),V().on("gotUserInfo",((e,t)=>{let a=t.user.value;Fs.$store.commit("user/setUserInfo",a)})),V().ready(),window.appReady()),window.app=Fs},6873:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7214);_utils_tools__WEBPACK_IMPORTED_MODULE_0__.Z.getWindowArgs(window);const fs=eval("require")("fs"),contentListModel={loadLocalStoreContents(e){let t=fs.readdirSync(e),a=[];return t.forEach((t=>{a.push({path:e,filename:t,stat:fs.statSync(e+t)})})),a}};__webpack_exports__["Z"]=contentListModel},5517:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _models_contentListModel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6873),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4117),_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8267),_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9300),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4806),lodash__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1960),_utils_fileHelper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6649);const fs=eval("require")("fs"),content={namespaced:!0,state:()=>({recentContents:[],contents:[]}),mutations:{unshiftRecent(e,t){let a=lodash__WEBPACK_IMPORTED_MODULE_4___default().findIndex(e.recentContents,{uuid:t});a>0&&e.recentContents.splice(a,1),e.recentContents.unshift({uuid:t,time:Date.now()}),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_5__.Z.setRecentContents(e.recentContents)},updateContents(e,t){e.contents=t},updateContentWithUuid(e,t){e.contents.forEach((e=>{if(e.meta.uuid===t.uuid){let a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(t.meta.relative_path_full);e.baseInfo.relativePath=a.relativeFolder,e.baseInfo.filename=a.filename,e.name=t.meta.name,e.meta=t.meta}}))},assignContentMeta(e,t){if("undefined"===typeof t.relative_path_full)return;let a=null;e.contents=e.contents.map((e=>(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(e.baseInfo.relativePath+e.baseInfo.filename)===t.relative_path_full&&(e=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromFile(t.relative_path_full),a=e),e))),a||e.contents.unshift(_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromFile(t.relative_path_full))},removeContent(e,t){for(let a=0;a<e.contents.length;a++)e.contents[a].meta.uuid===t.meta.uuid&&e.contents.splice(a,1)}},getters:{contentsOrderByCreateTime(e){function t(e){return function(t,a){var o=t.baseInfo[e],s=a.baseInfo[e];return s-o}}return e.contents.sort(t("createTime"))},contentsOrderByConfig(e,t,a){function o(e,t,a){let o=!1;return Object.keys(e).forEach((s=>{let r=e[s];if(r&&t[s].toLowerCase().indexOf(a)>-1)return o=!0,!1})),o}let s=e.contents;"create_time"===a.ui.orders[0]?s=t.contentsOrderByCreateTime:0===a.ui.orders.length&&(s=e.contents);let r=a.ui.searcher,n=r.words.toLowerCase();if(""===n)return s;{let e,t=r.searchSubFolder;if(r.searchRoot?(e="/",t=!0):e=a.ui.currentFolder.all.relativeFullPath,t){let t=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.searchSubFolder(e),a=[];return t.map((e=>{"folder"!==e.type&&o(r.type,e,n)&&a.push(_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromUuid(e.uuid))})),a}return s=s.filter((e=>o(r.type,e.meta,n))),s}},recentContents(e){return e.recentContents=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_5__.Z.getRecentContents()||[],e.recentContents}},actions:{changeToRecent(e){let t=e.state.recentContents.map((e=>(console.log(e),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromUuid(e.uuid))));console.log(t),e.commit("updateContents",t),e.commit("ui/setOrders",[],{root:!0}),e.commit("subFolder/setCurrentSubFolders",[],{root:!0})},loadFolderContents(e,t){let a=_models_contentListModel__WEBPACK_IMPORTED_MODULE_0__.Z.loadLocalStoreContents(t),o=e.rootState.ui.config,s=[],r=[],n=a;e.rootState.ui.filters.length>0&&(n=a.filter((t=>{if(!t.stat.isFile())return!0;let a=!1;return e.rootState.ui.filters.forEach((e=>{e(t)&&(a=!0)})),a}))),n.forEach((e=>{let a=e.filename;if(a.startsWith(".DS_Store"))return;const n=fs.statSync(t+e.filename),i=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(t+e.filename)),l=["pxd"];if((l.indexOf(i.extNoDot)>-1||n.isFile())&&-1===_utils_fileHelper__WEBPACK_IMPORTED_MODULE_6__.Z.ignore.indexOf(a)){let a=_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.getContentFromFile(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(t+e.filename));s.push(a)}else if(n.isDirectory()&&o.showSubFolders){if("_assets"===e.filename)return;let a=_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_3__.Z.getSubFolderFromFolder(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(t+e.filename));r.push(a)}})),e.commit("content/updateContents",s,{root:!0}),e.commit("subFolder/setCurrentSubFolders",r,{root:!0});let i=window.libDb.scanLib(t);i.length>0&&window.app.$message.success({content:"扫描到此文件夹及子文件夹新增了 "+i.length+" 个文件或文件夹。已为您标记为New，并更新到资源库中。"})}}};__webpack_exports__["Z"]=content},631:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_pathTools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8267),_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9300);const fs=eval("require")("fs"),subFolder={namespaced:!0,state:()=>({subFolders:[],myAllFolders:[],myAllFoldersFlat:[],myAllFoldersTreeData:[]}),mutations:{updateSubFolderWithUuid(e,t){e.subFolders.forEach((e=>{e.meta.uuid===t.uuid&&(e.name=t.meta.name,e.meta=t.meta)}))},setCurrentSubFolders(e,t){e.subFolders=t},setMyAllFolders(e,t){e.myAllFolders=t.subFolders},setMyAllFoldersFlat(e,t){e.myAllFoldersFlat=t},assignSubFolderMeta(e,t){let a=null;if(e.subFolders=e.subFolders.filter((e=>{if(e){if(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath(e.baseInfo.relativePath+e.baseInfo.filename)===t.relative_path_full){let o=_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_1__.Z.getSubFolderFromFolder(t.relative_path_full);if(!o)return!1;e=o,a=e}return!0}})),!a){let a=_utils_model_subFolderModel__WEBPACK_IMPORTED_MODULE_1__.Z.getSubFolderFromFolder(t.relative_path_full);a&&e.subFolders.unshift(a)}}},getters:{getCurrentSubFolders(e){return e.subFolders},getMyAllFoldersTreeData(e){return e}},actions:{updateTreeData(e){let t=[],a=[];const o=e.rootState.config.storePath;function s(e,a){a.subFolders=[];let r=fs.readdirSync(e).filter((t=>fs.statSync(e+"/"+t).isDirectory()&&!t.startsWith(".DS")));return r.forEach((r=>{if("_assets"===r)return;let n={};n.path=(e+"/"+r).replace("//","/"),n.relativePath=n.path.replace(o,""),n.dirname=r,n.title=r,n.key=n.relativePath,n.parentDir=a.relativePath,n.children=n.subFolders=s(n.path,n),n.contentCount=fs.readdirSync(n.path).length>0?fs.readdirSync(n.path).length:0,a.subFolders.push(n),t.push(n)})),a.subFolders}a.path=o,a.relativePath="/",a.dirname=o.substr(o.replace("\\","/").lastIndexOf("/")),a.subFolders=s(a.path,a),t.push(a),e.commit("setMyAllFolders",a),e.commit("setMyAllFoldersFlat",t)}}};__webpack_exports__["Z"]=subFolder},5451:function(e,t){"use strict";const a=[{ext:"jpg,jpeg,png,bmp,svg",alias:"图片",name:"img"},{ext:"rp",alias:"原型",name:"prototype"},{ext:"js,php",alias:"代码",name:"code"},{ext:"doc,docx,ppt,pptx,xls,xlsx,pdf",alias:"文档",name:"doc"},{ext:"mp4,avi,rmvb,mpg,m4v",alias:"视频",name:"video"},{ext:"wav,mp3",alias:"音频",name:"audio"},{ext:"url",alias:"网页",name:"url"},{ext:"",alias:"文件夹",name:"folder"}],o=["img","video","url"],s={contentTypeMap:a,canOpenInside:o,extCanOpenInside(e){const t=s.getContentTypeNameFromExt(e);return o.indexOf(t)>-1},getExtNoDotFromFilename(e){return e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1):""},getContentTypeFromExt(e){let t=e.replaceAll(".","");const o=a.filter((e=>{const a=e.ext.split(",");if(a.indexOf(t)>-1)return!0}));return o.length>0?o[0]:{ext:".other",alias:"其他",name:"other"}},getContentTypeAliasFromExt(e){return s.getContentTypeFromExt(e).alias},getContentTypeNameFromExt(e){return s.getContentTypeFromExt(e).name},getContentTypeFromFilename(e){return s.getContentTypeFromExt(s.getExtNoDotFromFilename(e))},getContentTypeDefine(e){let t=a.map((t=>{if(t.name===e)return t}));return t.length>0?t[0]:{ext:"",alias:"其他",name:"other"}},getContentCover(e){let t="other/"+s.getContentTypeFromExt(e).name;switch(e=e.toLowerCase(),e){case".pdf":t="pdf";break;case".ppt":case".pptx":t="ppt";break;case".doc":case".docx":t="word";break;case".xls":case".xlsx":t="excel";break;case".zip":case".7z":case".rar":case".tar.gz":t="zip"}return"./img/type/"+t+".svg"}};t["Z"]=s},8938:function(__unused_webpack_module,__webpack_exports__){"use strict";const low=eval("require")("lowdb"),FileSync=eval("require")("lowdb/adapters/FileSync");let dbInstance=null,configDb={dbInstance:null,userDataPath:"",storePath:"",init(e){configDb.userDataPath=e;const t=new FileSync(configDb.userDataPath+"/configDb.json"),a=low(t);configDb.dbInstance=a,dbInstance=a,dbInstance.defaults({config:{storePath:configDb.userDataPath+"/收藏夹.lab"}}).write(),configDb.storePath=dbInstance.get("config.storePath").value()},getStorePath(){return configDb.storePath},setStorePath(e){dbInstance.set("config.storePath",e).write()}};__webpack_exports__["Z"]=configDb},1960:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_pathTools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8267),uuid__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(536),_utils_fileHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6649),_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5451);const low=eval("require")("lowdb"),FileSync=eval("require")("lowdb/adapters/FileSync"),fs=eval("require")("fs");let db=null,libDb={dbInstance:null,libPath:"",assetsPath:"_assets",getAssetsRelativePath(){return libDb.assetsPath},getAssetsPath(){let e=libDb.libPath+"/"+libDb.assetsPath;return fs.existsSync(e)||fs.mkdirSync(e),e.replaceAll("//","/")},updateMeta(e,t){libDb.reload(),db.get("content_meta").find({uuid:e}).assign(t).write()},init(e){libDb.libPath=e;const t=new FileSync(libDb.libPath+"/_db.json"),a=low(t);libDb.dbInstance=a,libDb.dbInstance.defaults({content_meta:[]}).write(),db=libDb.dbInstance,libDb.repairDb()},repairDb(){db.get("content_meta").remove({name:""}).write(),db.set("content_meta",db.get("content_meta").uniqBy("relative_path_full").value()).write()},getMeta(e){libDb.reload();let t=db.get("content_meta").find({relative_path_full:_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath(e)}).value();return t||(t={}),t},getMetaFromUuid(e){libDb.reload();let t=db.get("content_meta").find({uuid:e}).value();return t||null},reload(){},hardReload(){console.log("强制刷新了数据库"),libDb.init(libDb.libPath)},addMeta(e,t,a){let o=Object.assign({folder:e,folder_uuid:"",uuid:(0,uuid__WEBPACK_IMPORTED_MODULE_3__.Z)(),relative_path:_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath(e),relative_path_full:_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativePath(e+"/"+t),base_info:{update_time:Date.now()}},a);return db.get("content_meta").push(o).write(),o},addUrl(e,t,a,o,s,r,n){const i=".url",l=(0,uuid__WEBPACK_IMPORTED_MODULE_3__.Z)();let _={type:"url",remark:r,name:t,uuid:l,href:a,rate:n,new:!0,ext_data:{favicon:s}},u=`\n[DEFAULT]\n[InternetShortcut]\nURL=${a}\n`;return fs.cpSync(o.replace("file://",""),libDb.getAssetsPath()+"/"+l+".jpg"),_.cover="/"+libDb.getAssetsRelativePath()+"/"+l+".jpg",fs.writeFileSync((window.configDb.getStorePath()+"/"+e+"/"+t+i).replaceAll("//","/"),u,"utf-8"),libDb.addMeta(e,t+i,_)},addImgMetaFromFile(e){return libDb.addCommonMetaInfo(e)},addVideoMetaFromFile(e){return libDb.addCommonMetaInfo(e)},removeDirMeta(e){let t=0,a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.getRelativeFullPathFromFullPath(e);return a.endsWith("/")||(a+="/"),a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.appendEndsSplash(a),db.get("content_meta").remove((e=>!!e.relative_path_full.startsWith(a)&&(t++,!0))).write(),t},getFolderMetas(e){let t=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.appendEndsSplash(e),a=db.get("content_meta").filter((e=>!!e.relative_path_full.startsWith(t))).value();return a},removeMeta(e){libDb.reload(),console.log("delete",e),db.get("content_meta").remove({relative_path_full:e}).write()},addCommonMetaInfo(e,t){const a=(0,uuid__WEBPACK_IMPORTED_MODULE_3__.Z)();let o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.getAllFromRelativeFullPath(e),s=o.relativeFolder,r=o.filename,n=o.name;return t=Object.assign({type:_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_2__.Z.getContentTypeFromFilename(r).name,remark:"",name:n,uuid:a,href:"",new:!0,ext_data:{},base_info:{update_time:Date.now()}},t),libDb.addMeta(s,r,t)},addUrlMetaInfo(e){try{let t=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.getAllFromRelativeFullPath(e),a="[a-zA-z]+://[^\\s]*",o=String(fs.readFileSync(t.storeFullPath)),s=o.match(a);s.length>0&&(s=s[0]);let r={type:"url",remark:"",name:t.name,href:s,new:!0,ext_data:{favicon:""},cover:""};return libDb.addCommonMetaInfo(e,r)}catch(t){console.warn(t)}},addFolderMetaInfo(e){let t={name:e.substr(e.lastIndexOf("/")+1)};return libDb.addCommonMetaInfo(e,t)},scanLib(e=libDb.libPath){let t=[];return _utils_fileHelper__WEBPACK_IMPORTED_MODULE_1__.Z.getFileTree(e,{showFile:!1,mapCallback:(e,a)=>{let o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.getRelativeFullPathFromFullPath(e+"/"+a),s=libDb.getMeta(o);if(!s.name){t.push(o);let e=_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_2__.Z.getContentTypeFromFilename(o),a={};switch(e.name){case"img":a=libDb.addImgMetaFromFile(o);break;case"folder":a=libDb.addFolderMetaInfo(o);break;case"video":a=libDb.addVideoMetaFromFile(o);break;case"prototype":a=libDb.addCommonMetaInfo(o);break;case"url":a=libDb.addUrlMetaInfo(o);break;default:a=libDb.addCommonMetaInfo(o);break}"folder"===a.type?window.app.$store.commit("subFolder/assignSubFolderMeta",a):window.app.$store.commit("content/assignContentMeta",a)}}}),t},setNotNew(e){db.get("content_meta").find({uuid:e}).assign({new:!1}).write()},renameMetaFolder(e,t){db.get("content_meta").forEach((a=>{_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(a.relative_path_full).startsWith(e)&&(a.folder=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.removeLastSlash(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(a.folder).replace(e,t)),a.relative_path=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.removeLastSlash(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(a.relative_path).replace(e,t)),a.relative_path_full=_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.removeLastSlash(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(a.relative_path_full).replace(e,t)))})).write()},setRecentContents(e){this.reload(),db.set("recent_contents",e).write()},getRecentContents(){return this.reload(),db.get("recent_contents").value()}};__webpack_exports__["Z"]=libDb},6649:function(__unused_webpack_module,__webpack_exports__){"use strict";const fileHelper={ignore:[".DS_Store","_assets","_db.json","_index.json"],getFileTree(dir,options){const libPath=window.configDb.getStorePath();options=Object.assign({showFile:!0,gotFlat:!0,filters:fileHelper.ignore,mapCallback:null,relative:!1},options);let path=eval("require")("path"),fs=eval("require")("fs");var tree=[];let flat=[];var mapDeep={};function readDirs(e){var t={path:e,title:path.basename(e),type:"dir"},a=fs.readdirSync(e);t.children=a.map((function(t){if(options.filters.indexOf(t)>-1)return;options.mapCallback&&options.mapCallback(e,t);var a=path.join(e,t),o=fs.statSync(a);if(o.isDirectory()&&!t.endsWith(".pxd"))return readDirs(a,t,t);let s={path:a,name:t,type:"file"};return options.relative&&(s.relativePath=a.replace(libPath,"")),options.gotFlat?(flat.push(s),!!options.showFile&&s):void 0}));let o={path:t.path,name:t.title,type:t.type};return options.relative&&(o.relativePath=t.path.replace(libPath,"")),flat.push(o),t}mapDeep[dir]=0,tree.push(readDirs(dir,dir));let result={tree:tree};return options.gotFlat&&(result["flat"]=flat),result}};__webpack_exports__["Z"]=fileHelper},3391:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_pathTools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8267),_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4117);const electron=eval("require")("electron"),shell=eval("require")("electron").shell,ipcSender=electron.ipcRenderer,fs=eval("require")("fs"),path=eval("require")("path"),ipc={openExternal(e){ipcSender.send("openExternal",{fullPath:e})},openDir(e){ipcSender.send("openDir",{dir:e})},showItemInFolder(e){ipcSender.send("showItemInFolder",{fullPath:e})},handleFileAssign(e,t){ipcSender.send("handleFileAssign",{type:e,args:{filePath:t.filePath}})},setWallPaper(e){ipcSender.send("setWallPaper",{wallPaper:e})},trashItem(e){let t=e;"win32"===process.platform&&(t=t.replaceAll("/","\\")),shell.trashItem(t).then((()=>{_utils_model_contentModel__WEBPACK_IMPORTED_MODULE_1__.Z.removeContent(e)}))},trashFolder(e){return e},createDir(e,t,a){if(!t)return void a.error("必须输入文件夹名称。");if(t=t.replaceAll("/","").replaceAll("\\",""),""===t)return void a.error("不可输入不规范字符作为文件夹名称，请重新输入。");let o=path.join(e,t).replaceAll("\\","/");fs.existsSync(o)?a.error("已存在同名文件夹，创建失败，"):(fs.mkdirSync(o),fs.existsSync(o)&&(window.libDb.addFolderMetaInfo(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.getRelativeFullPathFromFullPath(o)),window.app.$store.dispatch("subFolder/updateTreeData"),window.app.$store.dispatch("ui/reload"),a.success("创建文件夹"+t+"成功。"))),ipc.once("createDirResult",((e,t)=>{"true"===t.result?(a.success("创建文件夹成功。"),window.app.$store.dispatch("subFolder/updateTreeData")):a.error("创建文件夹失败，"+t.message)}))},renameFolder(e,t){const a=e.substr(0,e.lastIndexOf("/")),o=path.join(window.$defaultStrorePath,e),s=path.join(window.$defaultStrorePath,a,t);fs.existsSync(s)?window.app.$message.error("已经存在同名文件夹，重命名失败。"):(fs.renameSync(o,s),window.libDb.renameMetaFolder(_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(e),_utils_pathTools__WEBPACK_IMPORTED_MODULE_0__.Z.convertToCommonRelativeDir(path.join(a,t))),fs.existsSync(s)?(window.app.$message.success("重命名成功。"),window.app.$store.dispatch("subFolder/updateTreeData"),window.app.$store.dispatch("ui/reload")):window.app.$message.error("重命名失败。"))},fetchAllPwds(){return ipcSender.invoke("credentialStoreGetCredentials")},bindAddPageInfoListener(e,t){ipcSender.on("gotAddPageInfo",((t,a)=>{e(a)})),ipcSender.on("gotHdCaptureData",((e,a)=>{t(a)}))},getAddPageInfo(){ipcSender.send("getAddPageInfo")},noticeAddPageReady(){ipcSender.send("addPageReady")},hideFavPop(){ipcSender.send("hideFavPop")},addTab(e){ipcSender.send("addTab",{url:e})},once(e,t){ipcSender.once(e,t)}};ipcSender.on("error",((e,t)=>{window.app.$message.error(t.message)})),ipcSender.on("success",((e,t)=>{window.app.$message.success(t.message)})),__webpack_exports__["Z"]=ipc},4117:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5451),_utils_tools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7214),_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8267),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1960),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2744);const fs=eval("require")("fs"),sizeOf=eval("require")("image-size"),contentModel={addLink(e,t,a,o,s,r,n){return window.libDb.addUrl(e,t,a,o,s,r,n)},getMetaFromFile(e){return e=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(e),window.libDb.getMeta(e)},searchSubFolder(e){let t=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(e);return _utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.getFolderMetas(t.relativeFullPath)},getContentFromFile(e){let t,a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(e),o=a.storeFullPath,s=a.filename,r=a.storeFolder,n=a.relativeFolder;if(!fs.existsSync(o))return null;t=fs.statSync(o);const i=s.substr(s.lastIndexOf(".")),l=_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_0__.Z.getContentTypeNameFromExt(i);let _={extCanOpenInside:_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_0__.Z.extCanOpenInside(i),name:s.substr(0,s.lastIndexOf(".")),type:l,ext:i,extData:{},baseInfo:{path:r,relativePath:n,filename:s,createTime:t.birthtimeMs,addTime:t.ctimeMs,modifyTime:t.mtimeMs,size:t.size,sizeText:_utils_tools__WEBPACK_IMPORTED_MODULE_1__.Z.convertToText(t.size)},href:""},u=contentModel.getMetaFromFile(e);return _=contentModel.mergeContentAndMeta(_,u),_},getContentFromUuid(e){_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.reload();let t=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.getMetaFromUuid(e),a=contentModel.getContentFromFile(t.relative_path_full);return null===a?(_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.removeMeta(t.relative_path_full),null):a},mergeContentAndMeta(e,t){if("img"===e.type){let t=sizeOf(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(e.baseInfo.relativePath+e.baseInfo.filename));e.cover=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(e.baseInfo.relativePath+e.baseInfo.filename),e.extData.width=t.width,e.extData.height=t.height}else"url"===e.type&&t.cover&&(e.cover=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(t.cover));return e.extData=Object.assign(e.extData,e.ext_data),e.meta=t,e},removeContent(e,t=!0){let a;a=t?e:_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFullPathFromRelativeFullPath(e),fs.existsSync(a)&&fs.unlinkSync(a);let o=e;t&&(o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(e)),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.removeMeta(o)},rename(e,t){try{var a=window.libDb.getMetaFromUuid(e);let o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFullPathFromRelativeFullPath(a.relative_path_full);if(!a)return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("内容不存在。");let s=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.filterFilename(t).filename,r=s+"."+_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_0__.Z.getExtNoDotFromFilename(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFilenameFromRelativeFullPath(a.relative_path_full)),n=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.replaceSlash(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(a.relative_path)+"/"+r);return fs.existsSync(o)?fs.existsSync(n)?_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("已存在同名内容。"):(fs.renameSync(o,n),a.base_info?a.base_info.update_time=Date.now():a.base_info={update_time:Date.now()},a.name=s,a.relative_path_full=a.relative_path+r,_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.updateMeta(e,{name:a.name,relative_path_full:a.relative_path_full,base_info:a.base_info}),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("修改成功。",a)):_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("需要修改的文件不存在。")}catch(o){return console.warn(o),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("意外错误")}},update(e,t){try{let a=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.getMetaFromUuid(e);return a=Object.assign(a,t),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.updateMeta(e,a),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("修改成功。",a)}catch(a){return console.warn(a),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("意外错误")}},move(e,t,a=!1){let o=fs.existsSync(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(t));if(console.log("exists=",o,_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(t)),o&&!a)return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("文件存在");let s=contentModel.getContentFromUuid(e),r=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(s.meta.relative_path_full),n=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getAllFromRelativeFullPath(t);try{o&&fs.unlinkSync(n.storeFullPath),fs.renameSync(r.storeFullPath,n.storeFullPath)}catch(i){return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("复制失败")}return o&&contentModel.removeContent(n.relativeFullPath),contentModel.update(e,{name:n.name,folder:n.relativeFolder,relative_path:n.relativeFolder,relative_path_full:n.relativeFullPath}),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("移动成功",e)}};__webpack_exports__["Z"]=contentModel},8030:function(__unused_webpack_module,__webpack_exports__){"use strict";const electron=eval("require")("electron"),ipc=electron.ipcRenderer,fileModel={saveAs(e,t){ipc.send("exportFile",{path:e,parentPath:t})}};__webpack_exports__["Z"]=fileModel},9837:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _utils_db_configDb__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8938),_utils_fileHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6649);const low=eval("require")("lowdb"),FileSync=eval("require")("lowdb/adapters/FileSync"),libPath=_utils_db_configDb__WEBPACK_IMPORTED_MODULE_0__.Z.getStorePath(),indexSavePath=libPath+"/_index.json",indexModel={db:null,index:[],initialize(){const e=new FileSync(indexSavePath),t=low(e);return indexModel.db=t,t.get("lastUpdateTime").value()||indexModel.buildIndex(),t},buildIndex(){indexModel.updateIndexByFolder(libPath)},getAll(){return{index:indexModel.index,lastUpdateTime:indexModel.db.get("lastUpdateTime").value()}},updateIndex(e=libPath){indexModel.updateIndexByFolder(e)},updateIndexByFolder(e=libPath){const t=_utils_fileHelper__WEBPACK_IMPORTED_MODULE_1__.Z.getFileTree(e,{relative:!0});indexModel.db.set("index",t).write(),indexModel.db.set("lastUpdateTime",Date.now()).write(),indexModel.index=t}};__webpack_exports__["Z"]=indexModel},9300:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1703),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__),_utils_tools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7214),_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8267),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1960),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2744);const shell=eval("require")("electron").shell,fs=eval("require")("fs"),subFolderModel={addLink(e,t,a,o,s,r){return window.libDb.addUrl(e,t,a,o,s,r)},getMetaFromFile(e){return e=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativePath(e),window.libDb.getMeta(e)},getSubFolderFromFolder(e){let t=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFullPathFromRelativeFullPath(e),a=fs.statSync(t),o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFolderAllFromRelativeFullPath(e),s=o.parentFolderRelativeFullPath,r=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonRelativeDir(s.replace(window.$defaultStrorePath,"")),n=window.libDb.getMeta(o.relativeFullPath),i=0;try{i=fs.readdirSync(t).length}catch(_){return console.warn(_),null}let l={name:o.name,contentsCount:i,cover:"./img/folder.svg",meta:n,baseInfo:{path:o.parentFolderStoreFullPath,relativePath:r,filename:o.name,createTime:a.birthtimeMs,addTime:a.ctimeMs,modifyTime:a.mtimeMs,size:a.size,sizeText:_utils_tools__WEBPACK_IMPORTED_MODULE_1__.Z.convertToText(a.size)}};return l},removeContent(e,t=!0){let a=e;t&&(a=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(e)),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.removeMeta(a)},removeDirMeta(e){let t=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.removeDirMeta(e);return t},async remove(e){let t=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.convertToCommonDirNoEndsSplash(e),a=fs.existsSync(t);if(!a)return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("文件夹不存在。");try{if(await shell.trashItem(t),fs.existsSync(t))throw Error("文件仍然存在");_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.removeMeta(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getRelativeFullPathFromFullPath(t));let e=subFolderModel.removeDirMeta(t);return e>0?_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("删除成功。",{removedCount:e}):_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("数据库处理失败。")}catch(o){return console.log(o),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("无权删除。")}},rename(e,t){try{var a=window.libDb.getMetaFromUuid(e);if(!a)return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("文件夹不存在。");let o=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.filterFilename(t).filename,s=o,r=_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getStorePathFromRelativePath(a.relative_path)+s;return fs.existsSync(r)?_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("已存在同名内容。"):(fs.renameSync(_utils_pathTools__WEBPACK_IMPORTED_MODULE_2__.Z.getFullPathFromRelativeFullPath(a.relative_path_full),r),a.base_info?a.base_info.update_time=Date.now():a.base_info={update_time:Date.now()},a.name=o,a.relative_path_full=a.relative_path+s,_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.updateMeta(e,{name:a.name,relative_path_full:a.relative_path_full,base_info:a.base_info}),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("修改成功。",a))}catch(o){return console.warn(o),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("意外错误")}},update(e,t){try{let a=_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.getMetaFromUuid(e);return a=Object.assign(a,t),_utils_db_libDb__WEBPACK_IMPORTED_MODULE_3__.Z.updateMeta(e,a),_utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.success("修改成功。",a)}catch(a){return _utils_statusReturn__WEBPACK_IMPORTED_MODULE_4__.Z.failure("意外错误")}}};__webpack_exports__["Z"]=subFolderModel},8267:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _db_configDb__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8938),_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5451);const path=eval("require")("path"),pathTools={join(e,t){return path.join(e,t)},convertToCommonFilePath(e,t=!0){return!e.startsWith("file://")&&t&&(e="file://"+e),e=pathTools.replaceSlash(e),e},convertToCommonDir(e){return e=pathTools.replaceSlash(window.$defaultStrorePath+e),e.endsWith("/")||(e+="/"),e},convertToCommonRelativePath(e){return e=pathTools.replaceSlash(e),e.startsWith("/")||(e="/"+e),e.replaceAll("//","/"),e},convertToCommonRelativeDir(e){return e=pathTools.convertToCommonRelativePath(e).replaceAll("//","/"),e.endsWith("/")||(e+="/"),e},convertToCommonDirNoEndsSplash(e){return e=pathTools.convertToCommonRelativeDir(e),e.endsWith("/")?e.substr(0,e.length-1):e},replaceSlash(e){return e.replaceAll("\\","/").replaceAll("//","/")},getFolderFromRelativeFullPath(e){return e.substr(0,e.lastIndexOf("/"))},getFilenameFromRelativeFullPath(e){return e.substr(e.lastIndexOf("/")+1)},getNameFromRelativeFullPath(e){let t=e.substr(e.lastIndexOf("/"));return t.substr(0,t.lastIndexOf(".")).replaceAll("/","")},getRelativeFullPathFromFullPath(e){let t=pathTools.convertToCommonFilePath(window.$defaultStrorePath,!1),a=pathTools.convertToCommonFilePath(e,!1);return pathTools.convertToCommonRelativePath(a.replace(t,""))},getFullPathFromRelativeFullPath(e){return(window.$defaultStrorePath+e).replaceAll("//","/")},removeLastSlash(e){return e.endsWith("/")&&(e=e.substr(0,e.length-1)),e},filterFilename(e,t=" "){const a=["/","\\","|","?",'"',"*",":","<",">","\n"];let o=[];return a.forEach((a=>{e.indexOf(a)>-1&&o.push(a),e=e.replaceAll(a,t)})),{filename:e,hadMapped:o}},getStorePathFromRelativePath(e,t=!1){return pathTools.convertToCommonFilePath(_db_configDb__WEBPACK_IMPORTED_MODULE_0__.Z.getStorePath()+"/"+e,t)},getAllFromRelativeFullPath(e){let t=pathTools.getNameFromRelativeFullPath(e),a=pathTools.getFilenameFromRelativeFullPath(e),o=pathTools.convertToCommonRelativePath(pathTools.getFolderFromRelativeFullPath(e));o.endsWith("/")||(o+="/");let s=pathTools.getStorePathFromRelativePath(e,!1),r=pathTools.getStorePathFromRelativePath(e,!0),n=s.substr(0,s.lastIndexOf("/")),i="file:///"+r,l=_utils_contentTypeHelper__WEBPACK_IMPORTED_MODULE_1__.Z.getExtNoDotFromFilename(a),_="."+l,u={name:t,filename:a,relativeFolder:o,storeFullPath:s,storeFullPathProtocol:r,storeFolder:n,storeFolderProtocol:i,relativeFullPath:e,extNoDot:l,ext:_};return u},getFolderAllFromRelativeFullPath(e){let t=pathTools.convertToCommonDirNoEndsSplash(e);e=t;let a=t;a=a.substr(a.lastIndexOf("/")+1,a.length);let o=e.substr(0,e.lastIndexOf("/")),s=pathTools.getStorePathFromRelativePath(e,!1),r=pathTools.getStorePathFromRelativePath(o,!1),n=pathTools.getStorePathFromRelativePath(e,!0),i=pathTools.getStorePathFromRelativePath(o,!0),l={name:a,parentFolderRelativeFullPath:o,storeFullPath:s,parentFolderStoreFullPath:r,storeFullPathProtocol:n,parentFolderStoreFullPathProtocol:i,relativeFullPath:e};return l},appendEndsSplash(e){return e.endsWith("/")||(e+="/"),e}};__webpack_exports__["Z"]=pathTools},2744:function(e,t){"use strict";const a={successCode:1,failureCode:0,standardReturn(e,t,a={}){return{status:e,info:t,data:a,isFailure:e===this.failureCode,isSuccess:e===this.successCode}},success(e,t={}){return a.standardReturn(a.successCode,e,t)},failure(e,t={}){return a.standardReturn(a.failureCode,e,t)}};t["Z"]=a},7214:function(e,t){"use strict";const a={getAppProtocolUrl(e,t){return`tsb://app/redirect/?package=${e}&url=${t}`},getComProtocolUrl(e){return a.getAppProtocolUrl("com.thisky.com",e)},getWindowArgs:e=>(e.globalArgs={},process.argv.forEach((function(t){if(t.startsWith("--")){var a=t.split("=")[0].replace("--",""),o=t.split("=")[1];e.globalArgs[a]=o}})),"MacIntel"===navigator.platform?e.platformType="mac":"Win32"===navigator.platform?e.platformType="windows":e.platformType="linux",e),getDomain:function(e){let t=e;return t.startsWith("www.")&&(t=t.slice(4)),t},getRootDomain:function(e){let t=a.getDomainFromUrl(e),o=t.split(".");return o[o.length-2]+"."+o[o.length-1]},getDomainFromUrl(e){let t=e.split("/");return t=t[2]?t[2]:"",t=a.getDomain(t),t},htmlEncode(e){var t=document.createElement("span");return t.appendChild(document.createTextNode(e)),t.innerHTML},htmlDecode(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent},convertToText(e){let t=(e/1024/1024).toFixed(2);return t<1?(e/1024).toFixed(1)+"KB":t>1024?(e/1024/1024/1024).toFixed(2)+"GB":t+"MB"}};t["Z"]=a},4032:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var o=a(3396),s=a(7139),r=a(9242);const n=(0,o._)("div",{class:"type-label"},"图片",-1),i={class:"folder-name",style:{position:"relative"}},l={class:"ext"};function _(e,t,a,_,u,d){const c=(0,o.up)("a-image"),p=(0,o.up)("zoom-in-outlined");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",{onDblclick:t[1]||(t[1]=e=>d.openDetail(a.content)),onClick:t[2]||(t[2]=(...e)=>d.setSelected&&d.setSelected(...e)),class:"cover-wrapper",style:(0,s.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[n,(0,o.Wm)(c,{style:(0,s.j5)([{width:e.itemSize+"px",height:e.itemSize+"px",objectFit:"cover"},{background:"#f1f1f1"}]),preview:!1,class:"content-cover",src:d.cover},null,8,["style","src"]),(0,o._)("div",{class:"type-label preview",onClick:t[0]||(t[0]=(0,r.iM)((()=>{}),["stop"]))},[(0,o.Wm)(p)])],36),(0,o._)("div",i,(0,s.zw)(a.content.name),1),(0,o._)("div",l,[(0,o._)("span",null,(0,s.zw)(a.content.ext.substr(a.content.ext.lastIndexOf(".")+1)),1),(0,o.Uk)(" "+(0,s.zw)(a.content.extData.width)+" X "+(0,s.zw)(a.content.extData.height),1)])],64)}var u=a(65),d=a(2493),c=a(5451),p={name:"TypeImg",emits:["setSelected","openDetail"],components:{ZoomInOutlined:d.Z},props:{content:Object},data(){return{contentTypeHelper:c.Z}},computed:{...(0,u.rn)({itemSize:e=>e.ui.itemSize}),cover(){return this.content.cover.startsWith("/")?"file://"+this.$store.state.config.storePath+this.content.cover:this.content.cover}},methods:{openDetail(e){this.$emit("openDetail",e)},setSelected(){this.$emit("setSelected")}}},m=a(89);const h=(0,m.Z)(p,[["render",_]]);var f=h},4249:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var o=a(3396),s=a(7139),r=a(9242);const n={class:"type-label"},i={class:"folder-name"},l={class:"ext"};function _(e,t,a,_,u,d){const c=(0,o.up)("a-image"),p=(0,o.up)("zoom-in-outlined");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",{onDblclick:t[1]||(t[1]=e=>d.openDetail(a.content)),onClick:t[2]||(t[2]=(...e)=>d.setSelected&&d.setSelected(...e)),class:"cover-wrapper",style:(0,s.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[(0,o._)("div",n,(0,s.zw)(d.typeAlias),1),(0,o.Wm)(c,{style:(0,s.j5)([{width:e.itemSize+"px",height:e.itemSize+"px",objectFit:"cover",padding:.2*e.itemSize+"px"},{background:"white"}]),preview:!1,class:"sub-folder-cover content-cover",src:d.contentCover(a.content)},null,8,["style","src"]),(0,o._)("div",{class:"type-label preview",onClick:t[0]||(t[0]=(0,r.iM)((()=>{}),["stop"]))},[(0,o.Wm)(p)])],36),(0,o._)("div",i,(0,s.zw)(a.content.name),1),(0,o._)("div",l,[(0,o._)("span",null,(0,s.zw)(a.content.ext.substr(a.content.ext.lastIndexOf(".")+1)),1),(0,o.Uk)(" "+(0,s.zw)(u.tools.convertToText(a.content.baseInfo.size)),1)])],64)}var u=a(65),d=a(2493),c=a(5451),p=a(7214),m={name:"TypeOther",emits:["setSelected","openDetail"],components:{ZoomInOutlined:d.Z},props:{content:Object},computed:{...(0,u.rn)({itemSize:e=>e.ui.itemSize}),typeAlias(){try{return c.Z.getContentTypeAliasFromExt(this.content.ext)}catch(e){return console.log("未识别类型"),"未识别"}}},data(){return{tools:p.Z}},methods:{getExtNoDotFromFilename:c.Z.getExtNoDotFromFilename,contentCover(e){return c.Z.getContentCover(e.ext)},openDetail(e){this.$emit("openDetail",e)},...(0,u.OI)({focusItem:"ui/focusItem"}),setSelected(){this.$emit("setSelected")}}},h=a(89);const f=(0,h.Z)(m,[["render",_]]);var g=f},6697:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var o=a(3396),s=a(7139);const r=(0,o._)("div",{class:"type-label"},"密码",-1),n={class:"folder-name"},i={class:"ext"};function l(e,t,a,l,_,u){const d=(0,o.up)("a-image");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",{class:"cover-wrapper",style:(0,s.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[r,(0,o.Wm)(d,{style:(0,s.j5)([{width:e.itemSize+"px",height:e.itemSize+"px"},{background:"#f1f1f1"}]),preview:!1,class:"sub-folder-cover",src:"./img/type/pwd.svg"},null,8,["style"])],4),(0,o._)("div",n,(0,s.zw)(a.content.name)+"-"+(0,s.zw)(a.content.extData.username),1),(0,o._)("div",i,(0,s.zw)(a.content.extData.domain),1)],64)}var _=a(65),u={name:"TypePwd",props:{content:Object},computed:{...(0,_.rn)({itemSize:e=>e.ui.itemSize})}},d=a(89);const c=(0,d.Z)(u,[["render",l]]);var p=c},1098:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var o=a(3396),s=a(7139);const r=(0,o._)("div",{class:"type-label"},"网页",-1),n=["src"],i={class:"folder-name",style:{position:"relative"}},l={class:"ext"};function _(e,t,a,_,u,d){const c=(0,o.up)("a-image");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",{onDblclick:t[0]||(t[0]=e=>d.openDetail(a.content)),onClick:t[1]||(t[1]=(...e)=>d.setSelected&&d.setSelected(...e)),class:"cover-wrapper",style:(0,s.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[r,(0,o.Wm)(c,{onerror:"this.src='./img/default.svg'",style:(0,s.j5)([{width:e.itemSize+"px",height:e.itemSize+"px",objectFit:"cover"},{background:"#f1f1f1"}]),preview:!1,class:"sub-folder-cover content-cover",src:d.cover},null,8,["style","src"]),""!==a.content.meta.ext_data.favicon?((0,o.wg)(),(0,o.iD)("img",{key:0,onerror:"this.src='./img/default.svg'",src:a.content.meta.ext_data.favicon,class:"favicon",style:{bottom:"-10px",right:"-10px"}},null,8,n)):(0,o.kq)("",!0)],36),(0,o._)("div",i,(0,s.zw)(a.content.meta.name),1),(0,o._)("div",l,[(0,o._)("span",null,(0,s.zw)(a.content.meta.href),1)])],64)}var u=a(65),d=a(5451),c={name:"TypeUrl",emits:["setSelected","openDetail"],components:{},props:{content:Object},data(){return{contentTypeHelper:d.Z}},computed:{...(0,u.rn)({itemSize:e=>e.ui.itemSize}),cover(){return this.content.meta.cover?this.content.meta.cover.startsWith("/")?"file://"+this.$store.state.config.storePath+this.content.meta.cover:this.content.meta.cover:"/img/default.svg"}},methods:{openDetail(e){this.$emit("openDetail",e)},setSelected(){this.$emit("setSelected")}}},p=a(89);const m=(0,p.Z)(c,[["render",_]]);var h=m},8110:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var o=a(3396),s=a(7139);const r={class:"folder-name"},n={class:"ext"};function i(e,t,a,i,l,_){const u=(0,o.up)("a-progress");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",{onDblclick:t[1]||(t[1]=e=>_.openDetail(a.content)),onClick:t[2]||(t[2]=(...e)=>_.setSelected&&_.setSelected(...e)),onMouseenter:t[3]||(t[3]=(...e)=>_.handleMouseEnter&&_.handleMouseEnter(...e)),onMouseleave:t[4]||(t[4]=(...e)=>_.handleMouseLeave&&_.handleMouseLeave(...e)),onMousemove:t[5]||(t[5]=(...e)=>_.handleMouseMove&&_.handleMouseMove(...e)),class:"cover-wrapper",style:(0,s.j5)([{position:"relative"},{width:e.itemSize+"px",height:e.itemSize+"px"}])},[(0,o._)("div",{class:"type-label",style:(0,s.j5)({display:"none"===this.progressVisible?"inline-block":"none"})},"视频",4),(0,o._)("span",{style:(0,s.j5)([{position:"absolute",top:"5px","z-index":"99","margin-inline":"5px"},{width:e.itemSize-10+"px",display:l.progressVisible}])},[(0,o.Wm)(u,{percent:l.progress,size:"small",showInfo:!1},null,8,["percent"])],4),(0,o._)("video",{onDblclick:t[0]||(t[0]=e=>_.openDetail(a.content)),controls:"",ref:"videoPlayer",class:"video-js content-cover",style:{position:"absolute",top:"5px"}},null,544)],36),(0,o._)("div",r,(0,s.zw)(a.content.name),1),(0,o._)("div",n,[(0,o._)("span",null,(0,s.zw)(a.content.ext.substr(a.content.ext.lastIndexOf(".")+1)),1),(0,o.Uk)(" "+(0,s.zw)(l.duration),1)])],64)}var l=a(65),_=a(2595);window.$video=_.Z;var u={name:"TypeVideo",emits:["setSelected","openDetail"],props:{content:Object},components:{},computed:{...(0,l.rn)({itemSize:e=>e.ui.itemSize})},data(){return{duration:"loading",progressVisible:"none",player:null,loading:!0,videoOptions:{autoplay:!1,controls:!1,loop:!0,muted:!0,aspectRatio:"1:1",poster:"",width:this.itemSize,height:this.itemSize,fullscreen:{options:{navigationUI:"hide"}},sources:""},progress:0}},created(){this.videoOptions.sources="file://"+this.content.baseInfo.path+this.content.baseInfo.filename,this.videoOptions.poster=this.poster},mounted(){let e=this;this.player=window.$video(this.$refs.videoPlayer,this.videoOptions,(function(){this.on("error",(function(){})),this.on("canplaythrough",(function(){e.loading=!1})),this.on("canplay",(()=>{let t=this.duration();this.play(),e.duration=(t/60).toFixed(0)+"分"+(t-60*(t/60).toFixed(0)).toFixed(0)+"秒",setTimeout((()=>this.pause()),5e3)}))}))},methods:{openDetail(e){this.$emit("openDetail",e)},setSelected(){this.$emit("setSelected")},handleMouseEnter(){this.progressVisible="inline-block",this.player&&this.player.play(),this.$emit("videoTime",this.player.duration())},handleMouseLeave(){this.progressVisible="none",this.player&&this.player.pause()},handleMouseMove(e){var t=this.$refs.videoPlayer.getBoundingClientRect().left,a=e.clientX,o=this.$refs.videoPlayer.clientWidth,s=(a-t)/o,r=this.player.duration();this.player.currentTime(r*s),this.progress=(100*s).toFixed(0),this.$emit("videoratio",s)}}},d=a(89);const c=(0,d.Z)(u,[["render",i]]);var p=c},7396:function(e,t,a){"use strict";a.d(t,{Z:function(){return _}});var o=a(3396),s=a(7139);function r(e,t,a,r,n,i){const l=(0,o.up)("a-input"),_=(0,o.up)("a-modal");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(_,{visible:a.visible,title:a.title,width:a.width,onOk:i.handleOk,okText:"确定",cancelText:"取消",onCancel:i.visibleChange},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.WI)(e.$slots,"message",{},(()=>[(0,o._)("p",null,(0,s.zw)(a.message),1)]))]),(0,o._)("div",null,[(0,o.Wm)(l,{ref:"input",defaultValue:a.defaultValue},null,8,["defaultValue"])])])),_:3},8,["visible","title","width","onOk","onCancel"])])}var n={name:"PromptModal",props:{visible:{type:Boolean,default:!1},width:{type:Number,default:300},message:{type:String,default:"请输入内容"},title:{type:String,default:"输入"},defaultValue:{type:String,default:""}},model:{event:["changeVisible","handleOk"]},watch:{defaultValue:{handler(e){this.$nextTick((()=>{this.$refs.input.setValue(e),setTimeout((()=>{this.$refs.input.input.select()}),100)}))}}},data(){return{}},mounted(){},methods:{handleOk(e){this.$emit("handleOk",{e:e,value:this.$refs.input.input.value,input:this.$refs.input})},visibleChange(){this.$emit("changeVisible",!this.visible)}},computed:{}},i=a(89);const l=(0,i.Z)(n,[["render",r]]);var _=l},5893:function(){}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,a,o,s){if(!a){var r=1/0;for(_=0;_<e.length;_++){a=e[_][0],o=e[_][1],s=e[_][2];for(var n=!0,i=0;i<a.length;i++)(!1&s||r>=s)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](a[i])}))?a.splice(i--,1):(n=!1,s<r&&(r=s));if(n){e.splice(_--,1);var l=o();void 0!==l&&(t=l)}}return t}s=s||0;for(var _=e.length;_>0&&e[_-1][2]>s;_--)e[_]=e[_-1];e[_]=[a,o,s]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,r=a[0],n=a[1],i=a[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(o in n)__webpack_require__.o(n,o)&&(__webpack_require__.m[o]=n[o]);if(i)var _=i(__webpack_require__)}for(t&&t(a);l<r.length;l++)s=r[l],__webpack_require__.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return __webpack_require__.O(_)},a=self["webpackChunkfav"]=self["webpackChunkfav"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(605)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.f1f3631c.js.map